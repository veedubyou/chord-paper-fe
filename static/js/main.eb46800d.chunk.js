(this["webpackJsonpchord-paper-fe"]=this["webpackJsonpchord-paper-fe"]||[]).push([[0],{183:function(e,t,n){e.exports=n.p+"static/media/symphony.4ca23f9c.png"},185:function(e){e.exports=JSON.parse('{"id":"","owner":"","lastSavedAt":null,"elements":[{"elements":[{"chord":"G^","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"\ue100"},"type":"ChordBlock"},{"chord":"Em7","lyric":{"serializedLyric":"\ue100|"},"type":"ChordBlock"},{"chord":"Bm7b13/D","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"C13","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"}],"type":"ChordLine","label":"Intro"},{"elements":[{"chord":"G^","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"},{"chord":"B7","lyric":{"serializedLyric":"\ue400|"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"We\'re no strangers to "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"love"},"type":"ChordBlock"}],"type":"ChordLine","label":"Verse"},{"elements":[{"chord":"F#m7","lyric":{"serializedLyric":"You know the rules and "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"so do I"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"A full commitment\'s what I\'m "},"type":"ChordBlock"},{"chord":"C7","lyric":{"serializedLyric":"thinking of"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Bm7","lyric":{"serializedLyric":"You wouldn\'t get this from "},"type":"ChordBlock"},{"chord":"E7","lyric":{"serializedLyric":"any other guy"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"I just wanna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"tell you how I\'m feeling"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Gotta make you "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"understand"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"give you up"},"type":"ChordBlock"}],"type":"ChordLine","label":"Chorus"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"let you down"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"run around and de-"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"make you cry"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"say goodbye"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"tell a lie and "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"hurt you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"We\'ve known each other"},"type":"ChordBlock"},{"chord":"C7","lyric":{"serializedLyric":" for so long"},"type":"ChordBlock"}],"type":"ChordLine","label":"Verse"},{"elements":[{"chord":"Bm7","lyric":{"serializedLyric":"Your heart\'s been aching but "},"type":"ChordBlock"},{"chord":"E7","lyric":{"serializedLyric":"you\'re too shy to say it"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"Inside we both know what\'s been "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"going on"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Bm7","lyric":{"serializedLyric":"We know the game and we\'re"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":" gon-"},"type":"ChordBlock"},{"chord":"A7/C#","lyric":{"serializedLyric":"na "},"type":"ChordBlock"},{"chord":"D7","lyric":{"serializedLyric":"play it"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"G","lyric":{"serializedLyric":"And if you "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"ask me how I\'m feeling"},"type":"ChordBlock"},{"chord":"G","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Don\'t tell me you\'re too "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"blind to see"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"C#m11","lyric":{"serializedLyric":"give you "},"type":"ChordBlock"},{"chord":"F#7","lyric":{"serializedLyric":"up"},"type":"ChordBlock"}],"type":"ChordLine","label":"Chorus"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"let you down"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"G","lyric":{"serializedLyric":"run a-"},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"round and de-"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"G^","lyric":{"serializedLyric":"run a-"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"round and de-"},"type":"ChordBlock"},{"chord":"B7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"C7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"},{"chord":"E7","lyric":{"serializedLyric":"\ue200|"},"type":"ChordBlock"}],"type":"ChordLine","label":"Guitar Solo"},{"elements":[{"chord":"Em7","lyric":{"serializedLyric":"Never gonna give, never gonna give"},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"Bm7","lyric":{"serializedLyric":"Never gonna give, never gonna give"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"\ue100"},"type":"ChordBlock"},{"chord":"A7/C#","lyric":{"serializedLyric":"\ue100"},"type":"ChordBlock"},{"chord":"D7","lyric":{"serializedLyric":"\ue100"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"G","lyric":{"serializedLyric":"We\'ve known each other "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"for so long"},"type":"ChordBlock"}],"type":"ChordLine","label":"Verse"},{"elements":[{"chord":"G","lyric":{"serializedLyric":"Your heart\'s been aching but "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"you\'re too shy to say it"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"C#m7","lyric":{"serializedLyric":"Inside we "},"type":"ChordBlock"},{"chord":"F#7","lyric":{"serializedLyric":"both know what\'s been"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":" going on"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"G","lyric":{"serializedLyric":"We know the "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"game and we\'re"},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":" gonna "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"play it"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"G","lyric":{"serializedLyric":"I just wanna "},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":"tell you how I\'m feeling"},"type":"ChordBlock"},{"chord":"G","lyric":{"serializedLyric":"\ue200"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Gotta make you"},"type":"ChordBlock"},{"chord":"A","lyric":{"serializedLyric":" understand"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"G^","lyric":{"serializedLyric":"give you "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"up and de-"},"type":"ChordBlock"},{"chord":"B7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"give you up"},"type":"ChordBlock"}],"type":"ChordLine","label":"Outro"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"let you down"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"run around and de-"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"make you cry"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"say goodbye"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"tell a lie and "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"hurt you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"give you up"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"let you down"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"run around and de-"},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"sert you"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"Em9","lyric":{"serializedLyric":"make you cry"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"A7","lyric":{"serializedLyric":"say goodbye"},"type":"ChordBlock"}],"type":"ChordLine"},{"elements":[{"chord":"","lyric":{"serializedLyric":"Never gonna "},"type":"ChordBlock"},{"chord":"F#m7","lyric":{"serializedLyric":"tell a lie and "},"type":"ChordBlock"},{"chord":"Bm7","lyric":{"serializedLyric":"hurt you..."},"type":"ChordBlock"}],"type":"ChordLine"}],"metadata":{"title":"Never Gonna Give You Up x Plastic Love","composedBy":"Stock Aitken Waterman x Mariya Takeuchi","performedBy":"Rick Astley  x Mariya Takeuchi"}}')},198:function(e,t,n){e.exports=n.p+"static/media/error.c3a3f87e.jpeg"},211:function(e,t,n){e.exports=n.p+"static/media/google_signin.c386978e.svg"},248:function(e,t,n){e.exports=n(308)},253:function(e,t,n){},308:function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(0),c=n.n(i),l=n(36),u=n.n(l),s=(n(253),n(11)),d=n(220),h=n(359),m=n(383),f=n(310),p=n(50),y=n(85),v=n(43),b=n(55),g=n(183),k=n.n(g),E=n(16),w=n(98),C=n(3),O=n(4),j=n(8),L=n(1),B=n(2),S=n(21),x=n(184),T=n(23),I=n(358),D=n(51),z=n.n(D),A=n(79),F=n.n(A),R=n(19),N=n(40),P=n(30),_=n(357),M=n(107),U=n.n(M);!function(e){e[e.SmallTab=0]="SmallTab",e[e.MediumTab=1]="MediumTab",e[e.LargeTab=2]="LargeTab"}(o||(o={}));var W=[Object(P.a)({sizedTab:o.SmallTab,serializedStr:"\ue100"},"data-lyrictabtype","1"),Object(P.a)({sizedTab:o.MediumTab,serializedStr:"\ue200"},"data-lyrictabtype","2"),Object(P.a)({sizedTab:o.LargeTab,serializedStr:"\ue400"},"data-lyrictabtype","4")],K=function(e,t){var n=W.find((function(n){return n[e]===t}));if(void 0===n)throw new Error("Unexpectedly can't find tab type by ".concat(e));return n},V=function(e,t){return void 0!==W.find((function(n){return n[e]===t}))},G=function(e){if(e instanceof HTMLElement&&"span"===e.tagName.toLowerCase()){var t=e.dataset.lyrictabtype;if(V("data-lyrictabtype",t))return K("data-lyrictabtype",t).sizedTab}return null},J=function(e){return{root:{display:"inline-block",width:"".concat(1.5*e,"em")}}},H=function(e){return Object(_.a)(J(e))},q=(r={},Object(P.a)(r,o.SmallTab,H(1)),Object(P.a)(r,o.MediumTab,H(2)),Object(P.a)(r,o.LargeTab,H(4)),r),Y=function(e){var t=J(e);return Object(_.a)({root:Object(j.a)({backgroundColor:U.a[100],"&:before":{content:'"\\a0"'},margin:"0.05em"},t.root)})},X=(a={},Object(P.a)(a,o.SmallTab,Y(1)),Object(P.a)(a,o.MediumTab,Y(2)),Object(P.a)(a,o.LargeTab,Y(4)),a),Q=function(){var e;return e={},Object(P.a)(e,o.SmallTab,X[o.SmallTab]()),Object(P.a)(e,o.MediumTab,X[o.MediumTab]()),Object(P.a)(e,o.LargeTab,X[o.LargeTab]()),e},$=function(e){var t=function(){var e;return e={},Object(P.a)(e,o.SmallTab,q[o.SmallTab]()),Object(P.a)(e,o.MediumTab,q[o.MediumTab]()),Object(P.a)(e,o.LargeTab,q[o.LargeTab]()),e}(),n=Q(),r=e.edit?n:t,a=K("sizedTab",e.type);return c.a.createElement("span",{className:r[e.type].root,contentEditable:"false","data-lyrictabtype":a["data-lyrictabtype"]})},Z=function(e){return/^\s+$/.test(e)},ee=function(e){return Z(e)?"\xa0":e},te=T.k({serializedLyric:T.i}),ne=function(){var e,t="",n=Object(R.a)(W);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+="(".concat(r.serializedStr,")|")}}catch(a){n.e(a)}finally{n.f()}return t="(".concat(t+="(\\w|')+|[^w]",")"),new RegExp(t,"g")}(),re=function(){function e(t){Object(L.a)(this,e),this.serializedLyric=void 0,this.serializedLyric=t}return Object(B.a)(e,[{key:"get",value:function(e){return e(this.serializedLyric)}},{key:"tokenize",value:function(){var t=this.serializedLyric.match(ne);if(null===t)return Object(N.a)();var n=t.map((function(t){return new e(t)}));return Object(N.a)(n)}},{key:"append",value:function(t){return new e("string"===typeof t?this.serializedLyric+t:this.serializedLyric+t.serializedLyric)}},{key:"isEmpty",value:function(){return""===this.serializedLyric}},{key:"isEntirelySpace",value:function(){return Z(this.serializedLyric)||V("serializedStr",this.serializedLyric)}},{key:"isEqual",value:function(e){return this.serializedLyric===e.serializedLyric}}],[{key:"join",value:function(t,n){return new e(t.map((function(e){return e.serializedLyric})).join(n))}},{key:"fromValidatedFields",value:function(t){return new e(t.serializedLyric)}}]),e}(),ae=T.k({chord:T.i,lyric:te,type:T.e("ChordBlock")}),oe={id:"",chord:"",lyric:new re(""),type:"ChordBlock"},ie=Object(N.b)(oe),ce=function(){function e(t){if(Object(L.a)(this,e),this.record=void 0,e.isChordBlockRecord(t))this.record=t;else{var n=t.chord,r=t.lyric;this.record=new ie({id:F.a.generate(),chord:n,lyric:r,type:"ChordBlock"})}}return Object(B.a)(e,[{key:"new",value:function(t){return t===this.record?this:new e(t)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"toJSON",value:function(){var e=this.record.toJS();return z.a.omit(e,"id")}},{key:"splitByTokenIndex",value:function(t){if(0===t)throw new Error("Split index can't be zero");var n=this.lyricTokens,r=n.slice(0,t),a=n.slice(t);return[new e({chord:this.chord,lyric:re.join(r,"")}),this.set("chord","").set("lyric",re.join(a,""))]}},{key:"splitByCharIndex",value:function(t){if(0===t)return[new e({chord:"",lyric:new re("")}),this];var n=this.lyric.get((function(e){return e})),r=new re(n.slice(0,t)),a=new re(n.slice(t));return[new e({chord:this.chord,lyric:r}),this.set("chord","").set("lyric",a)]}},{key:"contentEquals",value:function(e){return this.chord===e.chord&&this.lyric.isEqual(e.lyric)}},{key:"isEmpty",value:function(){return""===this.chord&&this.lyric.isEmpty()}},{key:"lyricLength",value:function(){return this.lyric.get((function(e){return e})).length}},{key:"id",get:function(){return this.record.id}},{key:"lyric",get:function(){return this.record.lyric}},{key:"chord",get:function(){return this.record.chord}},{key:"type",get:function(){return this.record.type}},{key:"lyricTokens",get:function(){return this.lyric.tokenize()}}],[{key:"isChordBlockRecord",value:function(e){return N.b.isRecord(e)}},{key:"fromValidatedFields",value:function(t){var n=t.lyric,r=re.fromValidatedFields(n);return new e({chord:t.chord,lyric:r})}},{key:"deserialize",value:function(t){var n=Object(S.parseJSON)(t,(function(){return new Error("Failed to parse json string")}));if(Object(S.isLeft)(n))return n;var r=n.right,a=ae.decode(r);if(Object(S.isLeft)(a))return Object(S.left)(new Error("Invalid Chord Block object"));var o=a.right.lyric,i=re.fromValidatedFields(o);return Object(S.right)(new e({chord:a.right.chord,lyric:i}))}}]),e}(),le=n(111),ue=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"getElement",value:function(){var e;return(e=this.elements).get.apply(e,arguments)}},{key:"getElementAtIndex",value:function(){var e;return(e=this.elements).getAtIndex.apply(e,arguments)}},{key:"setElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.set.apply(e,t)}))}},{key:"replaceElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.replace.apply(e,t)}))}},{key:"removeElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.remove.apply(e,t)}))}},{key:"removeMultipleElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.removeMultiple.apply(e,t)}))}},{key:"updateElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.update.apply(e,t)}))}},{key:"updateAllElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.updateAll.apply(e,t)}))}},{key:"addBeginning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.addBeginning.apply(e,t)}))}},{key:"addAfter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.addAfter.apply(e,t)}))}}]),e}(),se=function(){function e(t){Object(L.a)(this,e),this.list=void 0,void 0!==t?N.a.isList(t)?this.list=t:this.list=N.a.of.apply(N.a,Object(E.a)(t)):this.list=Object(N.a)()}return Object(B.a)(e,[{key:"toJSON",value:function(){return this.list.toJSON()}},{key:"new",value:function(t){return t===this.list?this:new e(t)}},{key:"toArray",value:function(){return this.list.toArray()}},{key:"transform",value:function(e){var t=e(this.list);return this.new(t)}},{key:"indexOf",value:function(t){return e.indexOf(this.list,t)}},{key:"multiIndexOf",value:function(e){return e.map(this.indexOf)}},{key:"set",value:function(){var e,t=(e=this.list).set.apply(e,arguments);return this.new(t)}},{key:"update",value:function(e,t){var n=this.list.update(e,(function(e){if(void 0===e)throw new Error("Can't have undefined indices");return t(e)}));return this.new(n)}},{key:"updateAll",value:function(e){var t=this.list.withMutations((function(t){for(var n=function(n){t.update(n,(function(t){return function(t,n){if(void 0===t)throw new Error("Can't have undefined indices");return e(t,n)}(t,n)}))},r=0;r<t.size;r++)n(r)}));return this.new(t)}},{key:"addAfter",value:function(e){for(var t,n=this.indexOf(e.id),r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var i=(t=this.list).splice.apply(t,[n+1,0].concat(a));return this.new(i)}},{key:"addBeginning",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=(e=this.list).splice.apply(e,[0,0].concat(n));return this.new(a)}},{key:"remove",value:function(e){var t=this.indexOf(e.id),n=this.list.splice(t,1);return this.new(n)}},{key:"removeMultiple",value:function(t){var n=this.list;return t.forEach((function(t){var r=e.indexOf(n,t.id);n=n.delete(r)})),this.new(n)}},{key:"splice",value:function(e,t){for(var n,r=this.indexOf(e.id),a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var c=(n=this.list).splice.apply(n,[r,t].concat(o));return this.new(c)}},{key:"replace",value:function(e,t){var n=this.indexOf(e.id),r=this.list.update(n,(function(e){if(void 0===e)throw new Error("Item can't be undefined because index is valid");return t(e)}));return this.new(r)}},{key:"forEach",value:function(){var e;(e=this.list).forEach.apply(e,arguments)}},{key:"get",value:function(e){var t=this.indexOf(e.id),n=this.list.get(t);if(void 0===n)throw new Error("Index found but item not in list");return n}},{key:"getAtIndex",value:function(e){var t=this.list.get(e);if(void 0===t)throw new Error("Item not in list");return t}},{key:"length",get:function(){return this.list.size}}],[{key:"indexOf",value:function(e,t){var n=e.findIndex((function(e){return e.id===t}));if(n<0)throw new Error("Can't find element inside collection");return n}}]),e}(),de=function(){var e=new le.DiffMatchPatch;return e.diffTimeout=0,e.matchThreshold=0,e}(),he=function(e){return e},me=function(){function e(t){Object(L.a)(this,e),this.chordLine=void 0,this.currBlockIndex=void 0,this.currCharIndex=void 0,this.blockBuffer=void 0,this.prependLyrics=void 0,this.chordLine=t,this.currBlockIndex=0,this.currCharIndex=0,this.blockBuffer=t.chordBlocks.list.map((function(){return""})).toArray(),this.prependLyrics=""}return Object(B.a)(e,[{key:"atBlockBoundary",value:function(){return 0===this.currCharIndex}},{key:"currentBlock",value:function(){return this.chordLine.getElementAtIndex(this.currBlockIndex)}},{key:"currentRawLyrics",value:function(){return this.currentBlock().lyric.get(he)}},{key:"currentChar",value:function(){return this.currentRawLyrics().charAt(this.currCharIndex)}},{key:"nextChar",value:function(){this.currCharIndex+=1,this.currCharIndex>=this.currentRawLyrics().length&&(this.currBlockIndex+=1,this.currCharIndex=0)}},{key:"skip",value:function(e){if(this.currentChar()!==e)throw new Error("Mismatched characters when skipping");this.blockBuffer[this.currBlockIndex]+=e,this.nextChar()}},{key:"insert",value:function(e){if(this.atBlockBoundary()){var t=this.currBlockIndex-1;t>=0?this.blockBuffer[t]+=e:this.prependLyrics+=e}else this.blockBuffer[this.currBlockIndex]+=e}},{key:"delete",value:function(e){if(this.currentChar()!==e)throw new Error("Mismatched characters when deleting");this.nextChar()}},{key:"finish",value:function(){var e=this;return this.chordLine=this.chordLine.updateAllElements((function(t,n){var r=new re(e.blockBuffer[n]);return t.set("lyric",r)})),""!==this.prependLyrics&&(this.chordLine=this.chordLine.addBeginning(new ce({chord:"",lyric:new re(this.prependLyrics)}))),this.chordLine.normalizeBlocks()}}]),e}(),fe=K("sizedTab",o.SmallTab).serializedStr,pe=function(e,t){var n=e.lyrics.get(he),r=t.get(he),a=de.diff_main(n,r);de.diff_cleanupSemanticLossless(a);var o,i=new me(e),c=Object(R.a)(a);try{for(c.s();!(o=c.n()).done;){var l,u=o.value,s=u[0],d=Object(R.a)(u[1]);try{for(d.s();!(l=d.n()).done;){var h=l.value;switch(s){case le.DiffOperation.DIFF_EQUAL:i.skip(h);break;case le.DiffOperation.DIFF_INSERT:i.insert(h);break;case le.DiffOperation.DIFF_DELETE:i.delete(h)}}}catch(m){d.e(m)}finally{d.f()}}}catch(m){c.e(m)}finally{c.f()}return e=function(e){return e.updateAllElements((function(e){return e.lyric.isEmpty()?e.set("lyric",new re(fe)):e}))}(e=function(e){var t,n=[],r=Object(R.a)(e.chordBlocks.toArray());try{for(r.s();!(t=r.n()).done;){var a=t.value;a.lyric.isEmpty()&&""===a.chord||n.push(a)}}catch(m){r.e(m)}finally{r.f()}return e.updateCollection((function(){return new se(n)}))}(e=i.finish()))},ye=T.k({elements:T.b(ae),type:T.e("ChordLine")}),ve=T.k({type:T.e("label"),name:T.i}),be=T.k({type:T.e("time"),name:T.i,time:T.g}),ge=T.l([ve,be]),ke=T.h({label:T.i,section:ge}),Ee=T.d([ye,ke]),we=function(e,t){return e.time<t.time?-1:e.time>t.time?1:0},Ce={id:"",section:void 0,elements:new se,type:"ChordLine"},Oe=Object(N.b)(Ce),je=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e){var r,a;return Object(L.a)(this,n),(r=t.call(this)).record=void 0,n.isChordLineRecord(e)?(r.record=e,Object(w.a)(r)):(a=void 0===e.blocks?new se([new ce({chord:"",lyric:new re("")})]):e.blocks instanceof se?e.blocks:new se(e.blocks),r.record=Oe({id:F.a.generate(),type:"ChordLine",section:e.section,elements:a}),r)}return Object(B.a)(n,[{key:"toJSON",value:function(){var e=this.record.toJSON();return z.a.omit(e,"id")}},{key:"forCopying",value:function(){return this.set("section",void 0)}},{key:"new",value:function(e){return e===this.record?this:new n(e)}},{key:"updateCollection",value:function(e){return this.update("elements",e)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"replaceLyrics",value:function(e){return this.lyrics.isEqual(e)?this:pe(this,e)}},{key:"setChord",value:function(e,t){return this.replaceElement(e,(function(e){return e.set("chord",t)})).normalizeBlocks()}},{key:"removeSectionName",value:function(){return void 0===this.section?[this,!1]:[this.set("section",void 0),!0]}},{key:"setSectionName",value:function(e){return""===e?this.removeSectionName():void 0===this.section?[this.set("section",{type:"label",name:e}),!0]:[this.update("section",(function(t){if(void 0===t)throw new Error("Impossible");return Object(j.a)(Object(j.a)({},t),{},{name:e})})),!0]}},{key:"removeSectionTime",value:function(){return void 0===this.section?[this,!1]:[this.set("section",{type:"label",name:this.section.name}),!0]}},{key:"setSectionTime",value:function(e){if(null===e)return this.removeSectionTime();var t=void 0!==this.section?this.section.name:"";return[this.set("section",{type:"time",name:t,time:e}),!0]}},{key:"splitBlock",value:function(e,t){var n=this.elements.get(e).splitByTokenIndex(t),r=Object(s.a)(n,2),a=r[0],o=r[1];return this.updateCollection((function(t){return t.splice(e,1,a,o)}))}},{key:"splitByCharIndex",value:function(e){var t=this;if(0===e){var r=new n({blocks:this.chordBlocks});return[this.updateCollection((function(){return new se([new ce({chord:"",lyric:new re("")})])})),r]}var a=this.lyrics.get((function(e){return e})).length;if(e>=a)return[this,new n({})];var o=function(){for(var n=e,r=0;r<t.elements.length;r++){var a=t.elements.getAtIndex(r).lyricLength();if(!(n-a>=0))return[n,r];n-=a}throw new Error("Unexpected: shouldn't have walked this many characters")}(),i=Object(s.a)(o,2),c=i[0],l=i[1],u=this.elements.transform((function(e){return e.slice(0,l)})),d=new se;if(c>0){var h=this.elements.getAtIndex(l).splitByCharIndex(c),m=Object(s.a)(h,2),f=m[0],p=m[1];u=u.transform((function(e){return e.push(f)})),d=d.transform((function(e){return e.push(p)}));var y=this.elements.transform((function(e){return e.slice(l+1)}));d=d.transform((function(e){return e.push.apply(e,Object(E.a)(y.toArray()))}))}else d=this.elements.transform((function(e){return e.slice(l)}));return[this.set("elements",u),new n({blocks:d})]}},{key:"normalizeBlocks",value:function(){var e=[];return this.elements.forEach((function(t){var n=e.length>0;if(""===t.chord&&n){var r=e.length-1;e[r]=e[r].update("lyric",(function(e){return e.append(t.lyric)}))}else e.push(t)})),e.length===this.elements.length?this:this.set("elements",new se(e))}},{key:"contentEquals",value:function(e){if(this.chordBlocks.length!==e.chordBlocks.length)return!1;if(!z.a.isEqual(this.section,e.section))return!1;var t=!0;return this.chordBlocks.forEach((function(n,r){var a=e.chordBlocks.getAtIndex(r);if(!n.contentEquals(a))return t=!1,!1})),t}},{key:"isEmpty",value:function(){return!(this.chordBlocks.length>1)&&(0===this.chordBlocks.length||this.chordBlocks.getAtIndex(0).isEmpty())}},{key:"id",get:function(){return this.record.id}},{key:"type",get:function(){return this.record.type}},{key:"section",get:function(){return this.record.section}},{key:"elements",get:function(){return this.record.elements}},{key:"chordBlocks",get:function(){return this.elements}},{key:"lyrics",get:function(){var e=this.chordBlocks.list.map((function(e){return e.lyric}));return re.join(e,"")}}],[{key:"isChordLineRecord",value:function(e){return N.b.isRecord(e)}},{key:"sectionFromLabel",value:function(e){if(void 0!==e)return{type:"label",name:e}}},{key:"fromValidatedFields",value:function(e){var t=e.elements.map((function(e){return ce.fromValidatedFields(e)})),r=e.section;return void 0===r&&(r=this.sectionFromLabel(e.label)),new n({blocks:new se(t),section:r})}},{key:"deserialize",value:function(e){var t=Object(S.parseJSON)(e,(function(){return new Error("Failed to parse json string")}));if(Object(S.isLeft)(t))return t;var n=t.right,r=Ee.decode(n);return Object(S.isLeft)(r)?Object(S.left)(new Error("Invalid Chord Line object")):Object(S.right)(this.fromValidatedFields(r.right))}},{key:"fromLyrics",value:function(e){var t=new ce({chord:"",lyric:e});return new n({blocks:new se([t])})}}]),n}(ue);function Le(e,t){return Be(e,(function(e,n){return t(n)}))}function Be(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];n[r]=t(a,r)}return n}var Se,xe=function(e){if(-1===e)throw new Error("Thing that should be found is not found")},Te=function(e){if(e%1!==0)throw new Error("input isn't a whole number!")},Ie=function(e,t){return(e%t+t)%t},De=function(e){return Te(e),Ie(e,12)},ze={C:void 0,Cb:void 0,"C#":void 0,D:void 0,Db:void 0,"D#":void 0,E:void 0,Eb:void 0,"E#":void 0,F:void 0,Fb:void 0,"F#":void 0,G:void 0,Gb:void 0,"G#":void 0,A:void 0,Ab:void 0,"A#":void 0,B:void 0,Bb:void 0,"B#":void 0},Ae=["C","D","E","F","G","A","B"],Fe=[["C","B#"],["Db","C#"],["D"],["Eb","D#"],["E","Fb"],["F","E#"],["Gb","F#"],["G"],["Ab","G#"],["A"],["Bb","A#"],["B","Cb"]],Re=function(e){var t=e.charAt(0);if(!Ae.includes(t))throw new Error("Note letter reduction function failed");return t},Ne=function(){function e(t){var n=this;Object(L.a)(this,e),this.note=void 0,this.chromaticNoteIndex=void 0,this.noteLetter=void 0,this.noteLetterIndex=void 0,this.note=t;var r=Fe.findIndex((function(e){return e.includes(n.note)}));xe(r),this.chromaticNoteIndex=r,this.noteLetter=Re(t);var a=Ae.findIndex((function(e){return e===n.noteLetter}));xe(a),this.noteLetterIndex=a}return Object(B.a)(e,[{key:"semitonesUp",value:function(e){var t=(this.chromaticNoteIndex+e)%Fe.length;return Fe[t]}},{key:"semitonesBetween",value:function(e){var t=Fe.findIndex((function(t){return t.includes(e)}));return xe(t),De(t-this.chromaticNoteIndex)}},{key:"isEnharmonicTo",value:function(e){return 0===this.semitonesBetween(e)}},{key:"noteNameFrom",value:function(e){var t=(this.noteLetterIndex+e)%Ae.length;return Ae[t]}},{key:"degreesBetween",value:function(e){var t,n=Re(e),r=Ae.findIndex((function(e){return e===n}));return xe(r),t=r-this.noteLetterIndex,Te(t),Ie(t,7)}}]),e}(),Pe=Le(ze,(function(e){return new Ne(e)})),_e=function(){function e(t){Object(L.a)(this,e),this.interval=void 0,this.interval=t}return Object(B.a)(e,[{key:"semitones",get:function(){var e=Qe(this.interval),t=Me[e];return Ze.minor(this.interval)?t-=1:Ze.augmented(this.interval)?t+=1:Ze.doubleAugmented(this.interval)?t+=2:Ze.tripleAugmented(this.interval)?t+=3:Ze.diminished(this.interval)?t-=2:Ze.doubleDiminished(this.interval)&&(t-=3),De(t)}},{key:"degree",get:function(){var e=Qe(this.interval);return We[e]}}]),e}(),Me={1:0,2:2,3:4,4:5,5:7,6:9,7:11},Ue=function(e){var t;for(t in We)if(We[t]===e)return t;throw new Error("Invalid number distance passed in")},We={1:0,2:1,3:2,4:3,5:4,6:5,7:6},Ke={1:void 0,2:void 0,3:void 0,4:void 0,5:void 0,6:void 0,7:void 0},Ve={b1:void 0,b2:void 0,b3:void 0,b4:void 0,b5:void 0,b6:void 0,b7:void 0},Ge={"#1":void 0,"#2":void 0,"#3":void 0,"#4":void 0,"#5":void 0,"#6":void 0,"#7":void 0},Je={"##1":void 0,"##2":void 0,"##3":void 0,"##4":void 0,"##5":void 0,"##6":void 0,"##7":void 0},He={"###4":void 0},qe={bb1:void 0,bb2:void 0,bb3:void 0,bb4:void 0,bb5:void 0,bb6:void 0,bb7:void 0},Ye={bbb2:void 0,bbb3:void 0,bbb5:void 0,bbb6:void 0,bbb7:void 0},Xe=Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},Ke),Ve),Ge),qe),Je),Ye),He),Qe=(Le(Xe,(function(e){return new _e(e)})),function(e){return e.charAt(e.length-1)}),$e=function(e,t){for(var n in t)if(n===e)return!0;return!1},Ze={minor:function(e){return $e(e,Ve)},augmented:function(e){return $e(e,Ge)},diminished:function(e){return $e(e,qe)},doubleAugmented:function(e){return $e(e,Je)},doubleDiminished:function(e){return $e(e,Ye)},tripleAugmented:function(e){return $e(e,He)}},et=function(e,t){var n,r=new _e(t),a=r.semitones,o=r.degree,i=Pe[e],c=i.semitonesUp(a),l=i.noteNameFrom(o),u=Object(R.a)(c);try{for(u.s();!(n=u.n()).done;){var s=n.value;if(Re(s)===l)return s}}catch(d){u.e(d)}finally{u.f()}return c[0]},tt=function(e,t){var n=Pe[e];return function(e,t){var n=Ue(t),r=Me[n],a=De(e-r);if(a===De(0))return n;if(a===De(1))return"#".concat(n);if(a===De(2))return"##".concat(n);if("4"===n&&a===De(3))return"###".concat(n);if(a===De(-1))return"b".concat(n);if(a===De(-2))return"bb".concat(n);if(("2"===n||"3"===n||"5"===n||"6"===n||"7"===n)&&a===De(-3))return"bbb".concat(n);throw new Error("No matching interval for semitone and number distance")}(n.semitonesBetween(t),n.degreesBetween(t))},nt=Le(ze,(function(e){return function(e){return Le(Xe,(function(t){return et(e,t)}))}(e)})),rt=Le(ze,(function(e){return function(e){return Le(ze,(function(t){return tt(e,t)}))}(e)})),at=function(e,t,n){var r,a=[];for(r in ze)e.startsWith(r)&&a.push(r);if(0===a.length)return e;for(var o=a[0],i=0,c=a;i<c.length;i++){var l=c[i];l.length>o.length&&(o=l)}var u=function(e,t,n){var r=rt[t][e];return nt[n][r]}(o,t,n);return e.replace(o,u)},ot=function(e,t,n){var r=function(e){return""===e.chord?e:e.update("chord",(function(e){return function(e,t,n){var r=null,a=e;if(e.includes("/")){var o=e.split("/");a=o[0],r=o.slice(1).join("/")}return a=at(a,t,n),null===r?a:a+"/"+(r=at(r,t,n))}(e,t,n)}))};return e.updateAllElements((function(e){return e.updateAllElements((function(e){return r(e)}))}))},it=T.k({title:T.i,composedBy:T.i,performedBy:T.i}),ct={id:T.i,owner:T.i,lastSavedAt:T.l([I.a,T.f]),metadata:it},lt=T.k(ct),ut=T.b(lt),st=function(){function e(t){if(Object(L.a)(this,e),this.id=void 0,this.owner=void 0,this.lastSavedAt=void 0,this.metadata=void 0,void 0===t)return this.id="",this.owner="",this.metadata={title:"",composedBy:"",performedBy:""},void(this.lastSavedAt=null);this.id=t.id,this.owner=t.owner,this.metadata=t.metadata,this.lastSavedAt=t.lastSavedAt}return Object(B.a)(e,null,[{key:"fromJSONObject",value:function(t){var n=lt.decode(t);return Object(S.isLeft)(n)?Object(S.left)(new Error("Invalid Song Summary object")):Object(S.right)(new e(Object(j.a)({},n.right)))}},{key:"fromJSONList",value:function(t){var n=ut.decode(t);if(Object(S.isLeft)(n))return Object(S.left)(new Error("Invalid Song Summary list"));var r=n.right.map((function(t){return new e(Object(j.a)({},t))}));return Object(S.right)(r)}}]),e}(),dt=T.k(Object(j.a)(Object(j.a)({},ct),{},{elements:T.b(Ee)})),ht={id:"",owner:"",lastSavedAt:null,metadata:{title:"",composedBy:"",performedBy:""},elements:new se},mt=Object(N.b)(ht),ft=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e){var r;if(Object(L.a)(this,n),(r=t.call(this)).record=void 0,n.isChordSongRecord(e))return r.record=e,Object(w.a)(r);var a=Object(j.a)(Object(j.a)({},ht),{},{metadata:Object(j.a)({},ht.metadata)});return void 0===e.lines?a.elements=new se([new je({})]):e.lines instanceof se?a.elements=e.lines:a.elements=new se(e.lines),void 0!==e.fields&&(a.id=e.fields.id,a.owner=e.fields.owner,a.metadata=e.fields.metadata,a.lastSavedAt=e.fields.lastSavedAt),r.record=mt(a),r}return Object(B.a)(n,[{key:"toJSON",value:function(){return this.record.toJSON()}},{key:"new",value:function(e){return e===this.record?this:new n(e)}},{key:"updateCollection",value:function(e){return this.update("elements",e)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"get",value:function(e){return this.chordLines.get(e)}},{key:"fork",value:function(){return this.set("id","").set("owner","").set("lastSavedAt",null)}},{key:"isUnsaved",value:function(){return""===this.id}},{key:"isOwner",value:function(e){return""!==this.owner&&(null!==e&&this.owner===e.userID)}},{key:"mergeLineWithPrevious",value:function(e){var t=this.chordLines.indexOf(e.id);if(!(t>0))return[this,!1];var n=function(e,t){return e=(e=function(e,t){return e.updateCollection((function(e){return e.transform((function(e){return e.push.apply(e,Object(E.a)(t.chordBlocks.toArray()))}))}))}(e=function(e){var t=e.chordBlocks.length-1;return e.updateElement(t,(function(e){return e.update("lyric",(function(e){return e.append(" ")}))}))}(e),t)).normalizeBlocks()};return[this.updateCollection((function(e){var r=e.getAtIndex(t);return e=(e=e.update(t-1,(function(e){return n(e,r)}))).remove(r)})),!0]}},{key:"splitLine",value:function(e,t){var n=this.chordLines.get(e),r=n.splitByCharIndex(t),a=Object(s.a)(r,2),o=a[0],i=a[1];return[this.updateCollection((function(e){return e.splice(n,1,o,i)})),!0]}},{key:"contentEquals",value:function(e){if(this.chordLines.length!==e.chordLines.length)return!1;if(!z.a.isEqual(this.metadata,e.metadata))return!1;var t=!0;return this.chordLines.forEach((function(n,r){var a=e.chordLines.getAtIndex(r);if(!n.contentEquals(a))return t=!1,!1})),t}},{key:"findLineWithBlock",value:function(e){var t=this.chordLines.list.find((function(t){return void 0!==t.chordBlocks.list.find((function(t){return t.id===e.id}))}));if(void 0===t)throw new Error("BlockID can't be found in the entire song");return t}},{key:"transpose",value:function(e,t){return ot(this,e,t)}},{key:"id",get:function(){return this.record.id}},{key:"owner",get:function(){return this.record.owner}},{key:"metadata",get:function(){return this.record.metadata}},{key:"lastSavedAt",get:function(){return this.record.lastSavedAt}},{key:"elements",get:function(){return this.record.elements}},{key:"chordLines",get:function(){return this.elements}},{key:"timeSections",get:function(){var e=[];return this.chordLines.forEach((function(t){var n;"time"===(null===(n=t.section)||void 0===n?void 0:n.type)&&e.push(t.section)})),e.sort(we),Object(N.a)(e)}},{key:"title",get:function(){return this.metadata.title},set:function(e){this.metadata.title=e}},{key:"performedBy",get:function(){return this.metadata.performedBy},set:function(e){this.metadata.performedBy=e}},{key:"composedBy",get:function(){return this.metadata.composedBy},set:function(e){this.metadata.composedBy=e}}],[{key:"isChordSongRecord",value:function(e){return N.b.isRecord(e)}},{key:"fromValidatedFields",value:function(e){var t=e.elements.map((function(e){return je.fromValidatedFields(e)}));return new n({lines:new se(t),fields:e})}},{key:"deserialize",value:function(e){var t=Object(x.a)(e);if(Object(S.isLeft)(t))return Object(S.left)(new Error(JSON.stringify(t.left)));var r=t.right;return n.fromJSONObject(r)}},{key:"fromJSONObject",value:function(e){var t=dt.decode(e);return Object(S.isLeft)(t)?Object(S.left)(new Error("Invalid Chord Song object")):Object(S.right)(this.fromValidatedFields(t.right))}},{key:"fromLyricsLines",value:function(e){var t=e.map((function(e){return je.fromLyrics(e)}));return new n({lines:new se(t)})}}]),n}(ue),pt=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"URL",value:function(){return"/"}}]),e}(),yt=new pt,vt=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"URL",value:function(){return"/about"}}]),e}(),bt=new vt,gt=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"URL",value:function(){return"/guitar-demo"}}]),e}(),kt=new gt,Et=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"URL",value:function(){return"/song"}},{key:"withID",value:function(e){return new Ct(e)}},{key:"withNew",value:function(){return new Ct("new")}}]),e}(),wt=new Et,Ct=function(){function e(t){Object(L.a)(this,e),this.id=void 0,this.id=t}return Object(B.a)(e,[{key:"URL",value:function(){return"/song/".concat(this.id)}},{key:"isNew",value:function(){return"new"===this.id}},{key:"withMode",value:function(e){return new jt(this.id,e)}},{key:"parent",value:function(){return wt}}]),e}(),Ot=wt.withNew(),jt=function(){function e(t,n){Object(L.a)(this,e),this.id=void 0,this.mode=void 0,this.id=t,this.mode=n}return Object(B.a)(e,[{key:"URL",value:function(){return"/song/".concat(this.id,"/").concat(this.mode)}},{key:"parent",value:function(){return new Ct(this.id)}}],[{key:"isPlayMode",value:function(e){return null!==e.match(/\/song\/.+\/play/i)}},{key:"isEditMode",value:function(e){return null!==e.match(/\/song\/.+\/edit/i)}}]),e}(),Lt=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"URL",value:function(){return"/demo"}},{key:"withMode",value:function(e){return new St(e)}}]),e}(),Bt=new Lt,St=function(){function e(t){Object(L.a)(this,e),this.mode=void 0,this.mode=t}return Object(B.a)(e,[{key:"URL",value:function(){return"/demo/".concat(this.mode)}},{key:"parent",value:function(){return Bt}}],[{key:"isPlayMode",value:function(t){return t===new e("play").URL()}}]),e}(),xt=n(226),Tt=n(91),It=Object(f.a)((function(e){return{root:{margin:e.spacing(5),padding:e.spacing(5),minHeight:e.spacing(46),minWidth:e.spacing(92)}}}))(xt.a),Dt=function(){return c.a.createElement(h.a,{container:!0,"data-testid":"About"},c.a.createElement(h.a,{item:!0,xs:3}),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(It,null,c.a.createElement(Tt.a,{variant:"h6"},"About Chord Paper"),c.a.createElement(Tt.a,{variant:"h6"},"\xa0"),c.a.createElement(Tt.a,null,"Chord Paper makes writing and reading chord sheets easier than the traditional monospace font formatting. It's a passion project born out of frustration at the clunkiness of writing chords on a computer."),c.a.createElement(Tt.a,null,"\xa0"),c.a.createElement(Tt.a,null,"Hope you will find that Chord Paper helps you focus more of your musical time on playing and listening, and less on formatting."))),c.a.createElement(h.a,{item:!0,xs:3}))},zt=n(185),At=Object(f.a)((function(e){return{root:{margin:e.spacing(5),padding:e.spacing(5),minHeight:e.spacing(46),minWidth:e.spacing(92),position:"relative"}}}))(xt.a),Ft=function(){return c.a.createElement(h.a,{container:!0,"data-testid":"Tutorial"},c.a.createElement(h.a,{item:!0,xs:3}),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(At,null,c.a.createElement(Tt.a,null,"An Error Occurred Oh No"))),c.a.createElement(h.a,{item:!0,xs:3}))},Rt=n(15),Nt=n(229),Pt=c.a.createContext(Object(i.createRef)()),_t=function(e){var t=Object(i.useRef)(null);return c.a.createElement(Pt.Provider,{value:t},e.children)},Mt=n(394),Ut=n(366),Wt=n(367),Kt=n(368),Vt=n(315),Gt=n(223),Jt=n(369),Ht=n(370),qt=n(365),Yt=n(371),Xt=n(186),Qt=n.n(Xt),$t=n(97),Zt=n.n($t),en=function(e){return""!==e.trim()},tn=T.k({id:T.i,label:T.i}),nn=T.d([tn,T.k({track_type:T.e("single"),url:T.i})]),rn=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e,r,a){return Object(L.a)(this,n),t.call(this,{id:e,track_type:"single",label:r,url:a})}return Object(B.a)(n,[{key:"validate",value:function(){return en(this.label)&&en(this.url)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.url)}}]),n}(Object(N.b)({id:"",track_type:"single",label:"",url:""})),an=function(e,t){var n=Be(e,(function(){return T.i}));return T.d([tn,T.k({track_type:T.e(t),stem_urls:T.k(n)})])},on=function(){function e(t,n,r){Object(L.a)(this,e),this.id=void 0,this.label=void 0,this.stem_urls=void 0,this.id=t,this.label=n,this.stem_urls=r}return Object(B.a)(e,[{key:"validate",value:function(){if(!en(this.label))return!1;var e;for(e in this.stem_urls)if(!en(this.stem_urls[e]))return!1;return!0}}]),e}(),cn={accompaniment:void 0,vocals:void 0},ln=an(cn,"2stems"),un=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e,r,a){var o;return Object(L.a)(this,n),(o=t.call(this,e,r,a)).track_type=void 0,o.track_type="2stems",o}return Object(B.a)(n,[{key:"keyObject",value:function(){return cn}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(on),sn={bass:void 0,drums:void 0,other:void 0,vocals:void 0},dn=an(sn,"4stems"),hn=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e,r,a){var o;return Object(L.a)(this,n),(o=t.call(this,e,r,a)).track_type=void 0,o.track_type="4stems",o}return Object(B.a)(n,[{key:"keyObject",value:function(){return sn}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(on),mn={bass:void 0,drums:void 0,other:void 0,piano:void 0,vocals:void 0},fn=an(mn,"5stems"),pn=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e,r,a){var o;return Object(L.a)(this,n),(o=t.call(this,e,r,a)).track_type=void 0,o.track_type="5stems",o}return Object(B.a)(n,[{key:"keyObject",value:function(){return mn}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(on),yn=n(96),vn=n.n(yn),bn=n(403),gn=function(e){var t=function(e){return""!==e.trim()}(e);return{error:!t||void 0,helperText:t?void 0:"Can't be empty"}},kn=function(e){return c.a.createElement(bn.a,Object.assign({label:"Track Label",variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value)}},gn(e.value)))},En=new RegExp(".*drive.google.com/.*?.+"),wn=new RegExp(".*drive.google.com/file/d/(.+)/.*"),Cn=function(e,t){return function(e){return null!==e.match(En)}(e)?e+"&cacheBuster="+t:e},On=function(e){return c.a.createElement(bn.a,Object.assign({label:e.labelText,variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value)},onKeyDown:function(t){if((t.metaKey||t.ctrlKey)&&("g"===t.key||"G"===t.key)){var n=function(e){var t=e.match(wn);return null===t||t.length<2?null:"https://drive.google.com/uc?export=download&id="+t[1]}(e.value);null!==n&&(e.onChange(n),t.preventDefault())}},disabled:e.disabled},gn(e.value)))},jn=Object(f.a)((function(e){return{root:{margin:e.spacing(2)}}}))(h.a),Ln=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(jn,{container:!0,alignItems:"center"},c.a.createElement(h.a,{xs:5,item:!0},c.a.createElement(kn,{value:e.track.label,onChange:function(t){var n=e.track.set("label",t);e.onChange(n)}})),c.a.createElement(h.a,{xs:5,item:!0},c.a.createElement(On,{labelText:"Track URL",value:e.track.url,onChange:function(t){var n=e.track.set("url",t);e.onChange(n)}})),c.a.createElement(h.a,{xs:2,item:!0},c.a.createElement(Vt.a,{onClick:e.onRemove},c.a.createElement(vn.a,null)))),c.a.createElement(qt.a,null))},Bn=Object(f.a)((function(e){return{root:{margin:e.spacing(2)}}}))(h.a),Sn=function(e){var t=function(t){var n=e.track.setLabel(t);e.onChange(n)},n=Be(e.track.stem_urls,(function(t,n){var r=function(){var t=e.urlFieldLabels.find((function(e){return e.key===n}));return void 0===t?"File URL":t.label}();return c.a.createElement(On,{labelText:r,value:t,onChange:function(t){var r=z.a.clone(e.track);r.stem_urls[n]=t,e.onChange(r)}})})),r=e.urlFieldLabels.map((function(r,a){return 0===a?(o=r.key,c.a.createElement(Bn,{key:o,container:!0,alignItems:"center"},c.a.createElement(h.a,{xs:5,item:!0},c.a.createElement(kn,{value:e.track.label,onChange:t})),c.a.createElement(h.a,{xs:5,item:!0},n[o]),c.a.createElement(h.a,{xs:2,item:!0},c.a.createElement(Vt.a,{onClick:e.onRemove},c.a.createElement(vn.a,null))))):function(e){return c.a.createElement(Bn,{key:e,container:!0,alignItems:"center"},c.a.createElement(h.a,{xs:5,item:!0}),c.a.createElement(h.a,{xs:5,item:!0},n[e]),c.a.createElement(h.a,{xs:2,item:!0}))}(r.key);var o}));return c.a.createElement(c.a.Fragment,null,r,c.a.createElement(qt.a,null))},xn=Object(f.a)((function(e){return{root:{margin:e.spacing(2)}}}))(h.a),Tn=function(e){var t=""!==e.track.id,n=function(){if(t)return"Processing track...";switch(e.track.track_type){case"split_2stems":return"Track URL to be split into 2 stems";case"split_4stems":return"Track URL to be split into 4 stems";case"split_5stems":return"Track URL to be split into 5 stems"}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(xn,{container:!0,alignItems:"center"},c.a.createElement(h.a,{xs:5,item:!0},c.a.createElement(kn,{value:e.track.label,onChange:function(t){var n=e.track.set("label",t);e.onChange(n)}})),c.a.createElement(h.a,{xs:5,item:!0},c.a.createElement(On,{labelText:n,value:e.track.original_url,onChange:function(t){var n=e.track.set("original_url",t);e.onChange(n)},disabled:t})),c.a.createElement(h.a,{xs:2,item:!0},c.a.createElement(Vt.a,{onClick:e.onRemove},c.a.createElement(vn.a,null)))),c.a.createElement(qt.a,null))},In=T.d([tn,T.k({track_type:T.l([T.e("split_2stems"),T.e("split_4stems"),T.e("split_5stems")]),original_url:T.i})]),Dn=function(e){Object(C.a)(n,e);var t=Object(O.a)(n);function n(e,r,a,o){return Object(L.a)(this,n),t.call(this,{id:e,track_type:a,label:r,original_url:o})}return Object(B.a)(n,[{key:"validate",value:function(){return en(this.label)&&en(this.original_url)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.track_type,e.original_url)}}]),n}(Object(N.b)({id:"",track_type:"split_2stems",label:"",original_url:""})),zn=Object(f.a)((function(e){return{root:{display:"flex",padding:e.spacing(5),alignItems:"center",justifyItems:"center"}}}))(Mt.a),An=Object(f.a)({root:{display:"inline-block"}})(Mt.a),Fn=Object(f.a)((function(e){return{root:{cursor:"pointer",display:"flex",alignItems:"center",marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}))(Mt.a),Rn=Object(f.a)((function(e){return{root:{marginLeft:e.spacing(2),marginBottom:e.spacing(1)}}}))(Tt.a),Nn=function(e){var t=function(){var t=z.a.cloneDeep(e.trackList);return 0===t.tracks.length&&t.tracks.push(new rn("","","")),t}(),n=Object(i.useState)(t),r=Object(s.a)(n,2),a=r[0],o=r[1],l=Object(i.useState)(0),u=Object(s.a)(l,2),d=u[0],h=u[1],m=Object(i.useState)(null),f=Object(s.a)(m,2),p=f[0],y=f[1],v=function(){return h(d+1)},b=function(){return z.a.cloneDeep(a)},g=function(e){y(e.currentTarget)},k=function(){y(null)},E=function(){L(new rn("","",""))},w=function(){L(new un("","",{vocals:"",accompaniment:""}))},C=function(){L(new hn("","",{vocals:"",other:"",bass:"",drums:""}))},O=function(){L(new pn("","",{vocals:"",other:"",piano:"",bass:"",drums:""}))},j=function(e){L(new Dn("","",e,""))},L=function(e){B(e),k()},B=function(e){var t=b();t.tracks.push(e),v(),o(t)},S=function(e){var t=b();t.tracks.splice(e,1),v(),o(t)},x=function(){var e,t=Object(R.a)(a.tracks);try{for(t.s();!(e=t.n()).done;){if(!e.value.validate())return!0}}catch(n){t.e(n)}finally{t.f()}return!1}(),T=function(e){return function(t){!function(e,t){var n=b();n.tracks.splice(e,1,t),o(n)}(e,t)}},I=function(){var e=a.tracks.map((function(e,t){var n="".concat(d,"-").concat(t);switch(e.track_type){case"single":return c.a.createElement(Ln,{key:n,track:e,onChange:T(t),onRemove:function(){return S(t)}});case"2stems":return c.a.createElement(Sn,{key:n,track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"accompaniment",label:"Accompaniment File URL"}],onChange:T(t),onRemove:function(){return S(t)}});case"4stems":return c.a.createElement(Sn,{key:n,track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"other",label:"Other File URL"},{key:"bass",label:"Bass File URL"},{key:"drums",label:"Drums File URL"}],onChange:T(t),onRemove:function(){return S(t)}});case"5stems":return c.a.createElement(Sn,{key:n,track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"other",label:"Other File URL"},{key:"piano",label:"Piano File URL"},{key:"bass",label:"Bass File URL"},{key:"drums",label:"Drums File URL"}],onChange:T(t),onRemove:function(){return S(t)}});case"split_2stems":case"split_4stems":case"split_5stems":return c.a.createElement(Tn,{key:n,track:e,onChange:T(t),onRemove:function(){return S(t)}})}})),t=null!==p;return e.push(c.a.createElement(c.a.Fragment,{key:"append"},c.a.createElement(An,null,c.a.createElement(Fn,{key:"append-action",onClick:g},c.a.createElement(Qt.a,null),c.a.createElement(Rn,null,"Add a new track"))),c.a.createElement(Gt.a,{open:t,anchorEl:p,onClose:k},c.a.createElement(Jt.a,{onClick:E},"Single Track"),c.a.createElement(Jt.a,{onClick:w},"2 Stem Track"),c.a.createElement(Jt.a,{onClick:C},"4 Stem Track"),c.a.createElement(Jt.a,{onClick:O},"5 Stem Track"),c.a.createElement(Jt.a,{onClick:function(){return j("split_2stems")}},"Split Track into 2 Stems"),c.a.createElement(Jt.a,{onClick:function(){return j("split_4stems")}},"Split Track into 4 Stems"),c.a.createElement(Jt.a,{onClick:function(){return j("split_5stems")}},"Split Track into 5 Stems")))),e}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ht.a,null,c.a.createElement(Rn,{variant:"body2",variantMapping:{body2:"div"}},c.a.createElement(Mt.a,null,"Add URLs for the audio track this song."),c.a.createElement(Mt.a,null,"This can be your own hosted files, or Youtube, etc.")),c.a.createElement(Rn,{variant:"body2",variantMapping:{body2:"div"}},c.a.createElement(Mt.a,null,"This player works best if every track is a version of the same song,"),c.a.createElement(Mt.a,null,"e.g. the original recording, just the accompaniment, only drums + bass.")),c.a.createElement(qt.a,null),I),c.a.createElement(Yt.a,null,c.a.createElement(Vt.a,{onClick:e.onClose},"Cancel"),c.a.createElement(Vt.a,{disabled:x,onClick:function(){var t;x||null===(t=e.onSubmit)||void 0===t||t.call(e,a)}},"OK")))},Pn=function(e){var t="loading"===e.trackListLoad.state?c.a.createElement(zn,null,c.a.createElement(Ut.a,{size:"15rem"})):c.a.createElement(Nn,{trackList:e.trackListLoad.tracklist,onSubmit:e.onSubmit,onClose:e.onClose});return c.a.createElement(Wt.a,{open:e.open,onClose:e.onClose,maxWidth:!1},c.a.createElement(Kt.a,null,c.a.createElement(Vt.a,{onClick:e.onRefresh},c.a.createElement(Zt.a,null)),"Edit Track List"),t)},_n=n(87),Mn=function(){},Un={playerRef:new(function(){function e(){Object(L.a)(this,e),this._current=void 0,this._current=void 0}return Object(B.a)(e,[{key:"current",set:function(e){},get:function(){}}]),e}()),playing:!1,togglePlay:Mn,jumpBack:Mn,jumpForward:Mn,goToBeginning:Mn,skipBack:{action:Mn,enabled:!1},skipForward:{action:Mn,enabled:!1},currentTime:0,currentTimeFormatted:"0:00",onProgress:Mn,onPlay:Mn,onPause:Mn,currentSectionLabel:"",playrate:{percentage:100,onChange:Mn}},Wn=function(e,t){var n=e.get(t);if(void 0===n)throw new Error("Section index is out of range, unexpected");return n},Kn=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(0),c=Object(s.a)(o,2),l=c[0],u=c[1],d=Object(i.useRef)(),h=Object(i.useState)(100),m=Object(s.a)(h,2),f=m[0],p=m[1],y=Object(i.useRef)(l);y.current=l;var v=Object(i.useContext)(Pt),b=function(){return y.current};Object(i.useEffect)((function(){v.current=b}),[v,b]);var g=function(e){var t;e<0&&(e=0),null===(t=d.current)||void 0===t||t.seekTo(e,"seconds")},k=function(){a(!1),setTimeout((function(){g(y.current)}),200)},E=function(){if(0===e.size)return null;var t=null;return e.forEach((function(n,r){l>=n.time&&(null===t||n.time>Wn(e,t).time)&&(t=r)})),t}(),w=null!=E?Wn(e,E):null,C=null!==w?w.name:"",O={action:function(){if(null!==w){var t=null===E||0===E?null:Wn(e,E-1);null!==t&&l<=w.time+2?g(t.time-1):g(w.time-1)}},enabled:null!==w},j=function(){var t=function(t){return 0===e.size?null:null===t?0:t===e.size-1?null:t+1},n=t(E),r=function(){if(null===n)return null;var r=Wn(e,n);if(l<r.time-2)return r;var a=t(n);return null===a?null:Wn(e,a)}();return{action:function(){null!==r&&g(r.time-1)},enabled:null!==r}}(),L=_n.Duration.fromMillis(1e3*l).toFormat("m:ss");return{playerRef:d,playing:r,togglePlay:function(){r?k():a(!0)},skipBack:O,skipForward:j,jumpBack:function(){var e=l-5;e<0&&(e=0),g(e)},jumpForward:function(){g(l+5)},goToBeginning:function(){g(0)},currentTime:l,currentTimeFormatted:L,onProgress:function(e){u(e.playedSeconds)},onPlay:function(){a(!0)},onPause:function(){a(!1)},currentSectionLabel:C,playrate:{percentage:f,onChange:p}}},Vn=n(309),Gn=n(317),Jn=n(187),Hn=n.n(Jn),qn=c.a.createContext([function(){},function(){},function(){}]),Yn=function(){var e=Object(i.useContext)(qn),t=Object(s.a)(e,3);return[t[1],t[2]]},Xn=function(e){var t=Object(i.useRef)([]),n=function(e){return function(t){t.target instanceof HTMLElement&&("INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName||t.target.isContentEditable)||(e(t),t.defaultPrevented&&t.stopImmediatePropagation())}};return c.a.createElement(qn.Provider,{value:[function(e){var r=n(e);t.current.push({original:e,wrapped:r}),window.addEventListener("keydown",r,!0)},function(e){var r=n(e);!function(){var e,n=Object(R.a)(t.current);try{for(n.s();!(e=n.n()).done;){var r=e.value;window.removeEventListener("keydown",r.wrapped,!0)}}catch(a){n.e(a)}finally{n.f()}}(),t.current.unshift({original:e,wrapped:r}),function(){var e,n=Object(R.a)(t.current);try{for(n.s();!(e=n.n()).done;){var r=e.value;window.addEventListener("keydown",r.wrapped,!0)}}catch(a){n.e(a)}finally{n.f()}}()},function(e){var n=t.current.findIndex((function(t){return t.original===e}));if(-1!==n){var r=t.current[n];window.removeEventListener("keydown",r.wrapped,!0),t.current.splice(n,1)}}]},e.children)},Qn=n(372),$n=n(137),Zn=function(e){return{borderTopLeftRadius:e.spacing(1.5),borderTopRightRadius:e.spacing(1.5)}},er=function(e){return{borderRadius:e.spacing(1.5)}},tr={backgroundColor:Qn.a[50],display:"flex",alignItems:"center"},nr=function(e,t,n){var r=e.typography[t],a=function(){if(void 0!==r.fontFamily&&void 0!==r.fontSize)return"".concat(r.fontSize," ").concat(r.fontFamily)}();if(void 0!==a){var o=document.createElement("canvas").getContext("2d");if(null!==o){o.font=a;var i=o.measureText(n);return"".concat(i.width,"px")}}},rr=$n.a[700],ar=Object(f.a)((function(e){return{root:Object(j.a)({position:"fixed",bottom:0,right:e.spacing(2)},Zn(e))}}))(Mt.a),or=function(e){return c.a.createElement(ar,{boxShadow:4},e)},ir=(Object(f.a)((function(e){return{root:Object(j.a)({position:"fixed",bottom:0,left:e.spacing(2)},Zn(e))}}))(Mt.a),Object(f.a)((function(e){return{root:Object(j.a)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},Zn(e))}}))(Mt.a)),cr=n(69),lr=n.n(cr),ur=n(127),sr=n.n(ur),dr=n(188),hr=n.n(dr),mr=n(189),fr=n.n(mr),pr=Object(f.a)((function(e){return{root:{color:e.palette.primary.main}}}))(lr.a),yr=Object(f.a)((function(e){return{root:{color:e.palette.secondary.main}}}))(sr.a),vr=Object(f.a)((function(e){return{root:Object(j.a)({},Zn(e))}}))(Vt.a),br=function(e){var t=Yn(),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(null),l=Object(s.a)(o,2),u=l[0],d=l[1],h=e.playerControls.togglePlay,m=e.playerControls.jumpBack,f=e.playerControls.jumpForward,p=e.onClick,y=e.show;Object(i.useEffect)((function(){if(y){var e=function(e){if("Slash"===e.code&&(p(),e.preventDefault()),e.ctrlKey||e.metaKey)switch(e.code){case"Enter":case"Space":h(),e.preventDefault();break;case"ArrowLeft":m(),d("back"),e.preventDefault();break;case"ArrowRight":f(),d("forward"),e.preventDefault()}};return r(e),function(){return a(e)}}}),[r,a,y,p,h,m,f,d]),Object(i.useEffect)((function(){null!==u&&setTimeout((function(){return d(null)}),1e3)}),[u,d]);var v=e.playersLoaded?"back"===u?c.a.createElement(hr.a,null):"forward"===u?c.a.createElement(fr.a,null):e.playerControls.playing?c.a.createElement(pr,null):c.a.createElement(yr,null):c.a.createElement(Hn.a,null);return c.a.createElement(Vn.a,{in:e.show,direction:"up"},or(c.a.createElement(Gn.a,{title:e.tooltipMessage},c.a.createElement("span",null,c.a.createElement(vr,{className:e.className,onClick:e.onClick,disabled:e.disabled},v)))))},gr=n(398),kr=n(197),Er=n.n(kr),wr=n(128),Cr=n.n(wr),Or=n(377),jr=n(355),Lr=n(46),Br=n.n(Lr),Sr=n(191),xr=n.n(Sr),Tr=n(148),Ir=n.n(Tr),Dr=n(149),zr=n.n(Dr),Ar=n(192),Fr=n.n(Ar),Rr=n(194),Nr=n.n(Rr),Pr=n(193),_r=n.n(Pr),Mr=n(122),Ur=function(e){return c.a.createElement(Mr.a,e,c.a.createElement("path",{d:"M6 6h2v12h-2z m1.5 6l8 6V6z m7 0 l8 6V6z"}))},Wr=function(e){return c.a.createElement(Mr.a,e,c.a.createElement("path",{d:"M18,13c0,3.31-2.69,6-6,6s-6-2.69-6-6s2.69-6,6-6v4l5-5l-5-5v4c-4.42,0-8,3.58-8,8c0,4.42,3.58,8,8,8c4.42,0,8-3.58,8-8 H18z"}))},Kr=Object(f.a)((function(e){return{root:Object(j.a)({minWidth:0},er(e))}}))(Vt.a),Vr=Object(f.a)((function(e){return{root:{color:e.palette.primary.main}}}))(Kr),Gr=Object(f.a)((function(e){return{root:{color:e.palette.secondary.main}}}))(Kr),Jr=function(e,t,n,r){var a="primary"===r?Vr:Gr;return function(r){return c.a.createElement(Gn.a,{key:t,title:n},c.a.createElement("span",null,c.a.createElement(a,Object.assign({},r,{size:"large"}),e)))}},Hr={Play:Jr(c.a.createElement(lr.a,null),"play-button","Play the damn song","primary"),Pause:Jr(c.a.createElement(sr.a,null),"pause-button","Pause","secondary"),JumpBack:Jr(c.a.createElement(Fr.a,null),"jump-back-buttonn","Jump Back","primary"),JumpForward:Jr(c.a.createElement(Wr,null),"jump-forward-button","Jump Forward","primary"),SkipBack:Jr(c.a.createElement(_r.a,null),"skip-back-button","Go back a section","primary"),SkipForward:Jr(c.a.createElement(Nr.a,null),"skip-back-button","Go forward a section","primary"),Beginning:Jr(c.a.createElement(Ur,null),"beginning-button","Go to Beginning","primary"),DecreasePlayrate:Jr(c.a.createElement(Ir.a,null),"decrease-playrate-button","Play slower","primary"),IncreasePlayrate:Jr(c.a.createElement(zr.a,null),"increase-playrate-button","Play faster","primary"),TransposeDown:Jr(c.a.createElement(Ir.a,null),"transpose-down-button","Transpose down half step","primary"),TransposeUp:Jr(c.a.createElement(zr.a,null),"transpose-up-button","Transpose up half step","primary")},qr=Object(f.a)({root:{display:"flex",alignContent:"center",flexShrink:0,flexGrow:0}})(Mt.a),Yr=Object(f.a)((function(e){return{root:{marginLeft:0,marginRight:0,marginTop:e.spacing(1.5),marginBottom:e.spacing(1.5)}}}))(qt.a),Xr=function(e){var t=e.children.filter((function(e){return null!==e&&void 0!==e})).map((function(t,n){var r=c.a.createElement(Yr,{key:"divider-".concat(n),orientation:"vertical",flexItem:!0}),a="right"===e.dividers?[t,r]:[r,t];return c.a.createElement(c.a.Fragment,{key:n},a)}));return c.a.createElement(qr,null,t)},Qr=Object(f.a)({root:{justifyContent:"space-between"}})(qr),$r=Object(f.a)((function(e){return{root:{color:rr,minWidth:nr(e,"h6","200%"),display:"flex",justifyContent:"center"}}}))(Tt.a),Zr=function(e){var t=Math.round(e.playratePercentage),n="".concat(t,"%"),r=t-5<50,a=t+5>100;return c.a.createElement(Qr,null,c.a.createElement(Hr.DecreasePlayrate,{onClick:function(){return e.onChange(t-5)},disabled:r}),c.a.createElement(Gn.a,{title:"Playback speed"},c.a.createElement($r,{variant:"h6"},c.a.createElement(Mt.a,null,n))),c.a.createElement(Hr.IncreasePlayrate,{onClick:function(){return e.onChange(t+5)},disabled:a}))},ea=Object(f.a)((function(e){return{root:{marginLeft:e.spacing(1.5),marginRight:e.spacing(1.5),color:rr,flexShrink:1,flexGrow:1,display:"flex",justifyContent:"center"}}}))(Mt.a),ta=function(e){return""===e.value?null:c.a.createElement(ea,null,c.a.createElement(Tt.a,{variant:"body1"},e.value))},na=Object(f.a)({root:{justifyContent:"space-between"}})(qr),ra=Object(f.a)((function(e){return{root:{color:rr,display:"flex",justifyContent:"center"}}}))(Tt.a),aa=function(e){var t=Math.round(e.transposeLevel),n=t-1<-12,r=t+1>12,a=e.transposeLevel>0?"\u266f".concat(e.transposeLevel):e.transposeLevel<0?"\u266d".concat(-e.transposeLevel):"\u266e0";return c.a.createElement(na,null,c.a.createElement(Hr.TransposeDown,{onClick:function(){return e.onChange(t-1)},disabled:n}),c.a.createElement(Gn.a,{title:"Transposition"},c.a.createElement(ra,{variant:"h6"},c.a.createElement(Mt.a,null,a))),c.a.createElement(Hr.TransposeUp,{onClick:function(){return e.onChange(t+1)},disabled:r}))},oa=Object(f.a)((function(e){var t=e.spacing(5);return{root:Object(j.a)(Object(j.a)({},tr),{},{justifyContent:"space-between",flexWrap:"wrap",overflow:"hidden",maxHeight:t})}}))(Mt.a),ia=function(e){var t=Yn(),n=Object(s.a)(t,2),r=n[0],a=n[1],o=e.playing?c.a.createElement(Hr.Pause,{onClick:e.onTogglePlay}):c.a.createElement(Hr.Play,{onClick:e.onTogglePlay});Object(i.useEffect)((function(){if(e.show){var t=function(t){switch(t.code){case"Space":e.onTogglePlay(),t.preventDefault();break;case"ArrowLeft":t.ctrlKey||t.metaKey?e.onSkipBack.action():e.onJumpBack(),t.preventDefault();break;case"ArrowRight":return t.ctrlKey||t.metaKey?e.onSkipForward.action():e.onJumpForward(),void t.preventDefault()}};return r(t),function(){a(t)}}}),[e,r,a]);var l=void 0===e.transpose?null:c.a.createElement(Xr,{dividers:"left"},[c.a.createElement(aa,{transposeLevel:e.transpose.level,onChange:e.transpose.onChange})]);return c.a.createElement(oa,null,c.a.createElement(Xr,{dividers:"right"},c.a.createElement(Hr.Beginning,{onClick:e.onGoToBeginning}),c.a.createElement(Hr.SkipBack,{disabled:!e.onSkipBack.enabled,onClick:e.onSkipBack.action}),c.a.createElement(Hr.JumpBack,{onClick:e.onJumpBack}),o,c.a.createElement(Hr.JumpForward,{onClick:e.onJumpForward}),c.a.createElement(Hr.SkipForward,{disabled:!e.onSkipForward.enabled,onClick:e.onSkipForward.action})),c.a.createElement(ta,{value:e.sectionLabel}),c.a.createElement(Xr,{dividers:"left"},[c.a.createElement(Zr,{playratePercentage:e.playrate.percentage,onChange:e.playrate.onChange})]),l)},ca=function(e){return{ref:e.playerRef,playing:e.playing,controls:!0,playbackRate:e.playrate.percentage/100,onPlay:e.onPlay,onPause:e.onPause,onProgress:e.onProgress,progressInterval:500,height:"auto",width:"unset",onKeyUp:function(e){return e.preventDefault()}}},la=function(e){var t=Object(i.useMemo)((function(){return Cn(e.track.url,F.a.generate())}),[e.track.url]),n=function(e){var t=ca(e);return Object(j.a)(Object(j.a)({},t),{},{config:{file:{forceAudio:!0}}})}(e.playerControls);return Object(i.useEffect)((function(){!e.currentTrack&&e.playerControls.playing&&e.playerControls.onPause()}),[e.currentTrack,e.playerControls]),c.a.createElement(Mt.a,null,c.a.createElement(Mt.a,null,c.a.createElement(xr.a,Object.assign({},n,{url:t}))),c.a.createElement(ia,{show:e.focused,playing:e.playerControls.playing,sectionLabel:e.playerControls.currentSectionLabel,onTogglePlay:e.playerControls.togglePlay,onJumpBack:e.playerControls.jumpBack,onJumpForward:e.playerControls.jumpForward,onSkipBack:e.playerControls.skipBack,onSkipForward:e.playerControls.skipForward,onGoToBeginning:e.playerControls.goToBeginning,playrate:e.playerControls.playrate}))},ua=n(9),sa=n.n(ua),da=n(18),ha=n(65),ma=n(150),fa=n.n(ma),pa=null,ya=function(){return null===pa&&(pa=new window.AudioContext),pa},va=n(195),ba=n.n(va),ga=n(196),ka=n.n(ga),Ea=n(73),wa=n(405),Ca=n(138),Oa=n(373),ja=n(374),La=n(375),Ba=n(376),Sa=Object(f.a)((function(e){return{root:{width:"100%",paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)}}}))(Mt.a),xa=Object(f.a)({root:{color:Qn.a[400]}})(wa.a),Ta=function(e){return Object(f.a)((function(t){return{root:{backgroundColor:e,width:"100%",height:"100%",color:$n.a[700],padding:t.spacing(.5),textTransform:"none","&:hover":{opacity:.6,backgroundColor:e}}}}))},Ia=Ta($n.a[300])(Vt.a),Da={white:Ta("white")(Vt.a),pink:Ta(Ca.a[200])(Vt.a),yellow:Ta(Oa.a[200])(Vt.a),purple:Ta(ja.a[100])(Vt.a),lightBlue:Ta(La.a[200])(Vt.a),lightGreen:Ta(Ba.a[100])(Vt.a)},za=function(e){var t=e.stemControls.map((function(e){var t=e.enabled?Da[e.buttonColour]:Ia;return c.a.createElement(h.a,{item:!0,xs:!0},c.a.createElement(t,{variant:"contained",onClick:function(){e.onEnabledChanged(!e.enabled)}},c.a.createElement(Sa,null,c.a.createElement(Tt.a,{variant:"body1"},e.label),c.a.createElement(Mt.a,{onClick:function(e){e.preventDefault(),e.stopPropagation()}},c.a.createElement(xa,{value:e.volume,onChange:function(t,n){"number"===typeof n&&e.onVolumeChanged(n)},min:0,max:200,step:10,valueLabelDisplay:"auto"})))))}));return c.a.createElement(h.a,{container:!0},t)},Aa=function(e){var t=new Ea.c,n=new Ea.a({url:e.audioBuffer,grainSize:.1,overlap:.1});return n.chain(t),{label:e.label,volumeNode:t,playerNode:n,endNode:t}},Fa=function(e){var t=Object(p.b)().enqueueSnackbar,n=Object(i.useMemo)((function(){return e.stems.map(Aa)}),[e.stems]),r={masterVolumePercentage:100,masterPitchShift:0,stems:e.stems.map((function(e){return{key:e.label,muted:!1,volumePercentage:100}}))},a=Object(i.useState)(r),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(i.useRef)(l);d.current=l;var h=Object(i.useMemo)((function(){return 0===e.stems.length?"":function(e){var t=ya(),n=t.createBuffer(2,t.sampleRate*e,t.sampleRate),r=ba()(n),a=new window.Blob([r]);return URL.createObjectURL(a)}(e.stems[0].audioBuffer.duration)}),[e.stems]),m=function(e,t,n){var r=function(){if(void 0!==n)return{onVolumeChange:n}}(),a=ca(e);return Object(j.a)(Object(j.a)({},a),{},{volume:t/100,config:{forceAudio:!0,attributes:r}})}(e.playerControls,l.masterVolumePercentage,(function(e){var t=z.a.cloneDeep(d.current);t.masterVolumePercentage=100*e.currentTarget.volume,u(t)}));Object(i.useEffect)((function(){var n,r=null,a=null,o=Object(R.a)(e.stems);try{for(o.s();!(n=o.n()).done;){var i=n.value.audioBuffer;(null===r||i.duration<r)&&(r=i.duration),(null===a||i.duration>a)&&(a=i.duration)}}catch(c){o.e(c)}finally{o.f()}null!==a&&null!==r&&a-r>1&&t("Mismatch in length of tracks loaded, try refreshing",{variant:"warning"})}),[t,e.stems]),Object(i.useEffect)((function(){e.playerControls.playing&&"started"!==Ea.b.state?Ea.b.start():e.playerControls.playing||"paused"===Ea.b.state||"stopped"===Ea.b.state||Ea.b.pause();var t=e.playerControls.playrate.percentage/100,n=Ea.b.seconds*t;Math.abs(e.playerControls.currentTime-n)>1&&(Ea.b.seconds=e.playerControls.currentTime/t)}),[e.playerControls.playing,e.playerControls.currentTime,e.playerControls.playrate.percentage]),Object(i.useEffect)((function(){l.stems.forEach((function(t,r){var a=n[r],o=t.volumePercentage/100*(l.masterVolumePercentage/100);if(o>0){var i=20*Math.log10(o);a.volumeNode.volume.value=i}a.endNode.mute=t.muted||0===o,a.playerNode.playbackRate=e.playerControls.playrate.percentage/100}))}),[n,l,e.playerControls.playrate.percentage]),Object(i.useEffect)((function(){l.stems.forEach((function(e,t){var r=n[t];"drums"!==r.label&&(r.playerNode.detune=100*l.masterPitchShift)}))}),[n,l]),Object(i.useEffect)((function(){if(e.currentTrack)return n.forEach((function(e){e.playerNode.sync().start(0),e.endNode.toDestination()})),function(){n.forEach((function(e){e.playerNode.unsync(),e.endNode.disconnect()}))}}),[e.currentTrack,n]),Object(i.useEffect)((function(){!e.currentTrack&&e.playerControls.playing&&e.playerControls.onPause()}),[e.currentTrack,e.playerControls]),Object(i.useEffect)((function(){return function(){n.forEach((function(e){e.volumeNode.dispose(),e.playerNode.dispose()}))}}),[n]);var f=function(){var t=l.stems.map((function(t,n){var r=function(){var n=e.stems.find((function(e){return e.label===t.key}));return void 0===n?"white":n.buttonColour}();return{label:t.key,buttonColour:r,enabled:!t.muted,onEnabledChanged:function(e){var t=z.a.cloneDeep(l);t.stems[n].muted=!e,u(t)},volume:t.volumePercentage,onVolumeChanged:function(e){var t=z.a.cloneDeep(l);t.stems[n].volumePercentage=e,u(t)}}}));return c.a.createElement(za,{stemControls:t})}();return c.a.createElement(Mt.a,null,c.a.createElement(Mt.a,null,c.a.createElement(ka.a,Object.assign({},m,{url:h}))),f,c.a.createElement(ia,{show:e.focused,playing:e.playerControls.playing,sectionLabel:e.playerControls.currentSectionLabel,onTogglePlay:e.playerControls.togglePlay,onJumpBack:e.playerControls.jumpBack,onJumpForward:e.playerControls.jumpForward,onSkipBack:e.playerControls.skipBack,onSkipForward:e.playerControls.skipForward,onGoToBeginning:e.playerControls.goToBeginning,playrate:e.playerControls.playrate,transpose:{level:l.masterPitchShift,onChange:function(e){u(Object(j.a)(Object(j.a)({},l),{},{masterPitchShift:e}))}}}))},Ra=Object(f.a)((function(e){return{root:{padding:e.spacing(2),backgroundColor:$n.a[100]}}}))(Mt.a),Na=function(e){var t=Object(i.useState)({state:"not-started"}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useRef)(r);o.current=r;var l=function(){var e=Object(da.a)(sa.a.mark((function e(t,n){var r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha.a.get(t,{timeout:!1,onDownloadProgress:n}).arrayBuffer();case 2:return r=e.sent,e.next=5,ya().decodeAudioData(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();if(Object(i.useEffect)((function(){var t=function(e,t){return l(e,(function(e){var n=o.current;if("loading"===n.state){var r=z.a.clone(n);r.details[t].loadedBytes=e.transferredBytes,r.details[t].totalBytes=0!==e.totalBytes?e.totalBytes:"unknown",a(r)}})).then((function(e){return{audioBuffer:e,stemKey:t}}))},n=function(){var n=Object(da.a)(sa.a.mark((function n(){var r,o,i,c,l,u;return sa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in n.prev=0,r=[],e.track.stem_urls)i=t(e.track.stem_urls[o],o),r.push(i);return n.next=5,Promise.all(r);case 5:if(c=n.sent,l=!1,u=e.buttonSpecs.map((function(e){var t,n=c.find((function(t){return t.stemKey===e.label}));return void 0===n?(l=!0,t=new AudioBuffer({length:0,sampleRate:1})):t=n.audioBuffer,{label:e.label,audioBuffer:t,buttonColour:e.buttonColour}})),!l){n.next=11;break}return a({state:"error",error:new Error("Could not find stem key in audio buffer array to object mapping")}),n.abrupt("return");case 11:a({state:"loaded",item:u}),n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),a({state:"error",error:n.t0}),n.abrupt("return");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}();"not-started"===r.state&&(n(),a({state:"loading",details:Be(e.track.keyObject(),(function(){return{loadedBytes:0,totalBytes:"initial"}}))}))}),[r,a,e.track,e.buttonSpecs]),"not-started"===r.state)return c.a.createElement(Ra,null,c.a.createElement(Tt.a,{variant:"body1"},"Tracks have not started loading..."));if("loading"===r.state){var u=function(){var e,t=0;for(e in r.details){var n=r.details[e].totalBytes;switch(n){case"unknown":return"unknown";case"initial":return"initial";default:t+=n}}return t}(),d=function(){var e,t=0;for(e in r.details)t+=r.details[e].loadedBytes;return t}(),h=fa()(d);"unknown"!==u&&"initial"!==u&&(h+="/"+fa()(u));var m=function(){if("unknown"===u)return c.a.createElement(Or.a,null);var e=function(){if("initial"===u){return d/1e8*100}return d/u*100}();return c.a.createElement(Or.a,{variant:"determinate",value:e})}(),f=d===u?"Processing track...":"Loading track...";return c.a.createElement(Ra,null,c.a.createElement(Tt.a,{variant:"body1"},f,"(",h,")"),m)}if("error"===r.state){console.error(r.error);return c.a.createElement(Ra,{display:"flex",alignItems:"center"},c.a.createElement(Vt.a,{onClick:function(){a({state:"not-started"})}},c.a.createElement(Zt.a,null)),c.a.createElement(Tt.a,{variant:"body1"},"Failed to load tracks"))}return c.a.createElement(Fa,{focused:e.focused,currentTrack:e.currentTrack,stems:r.item,playerControls:e.playerControls})},Pa=Object(f.a)((function(e){return{root:{padding:e.spacing(2),backgroundColor:Br.a[100]}}}))(Mt.a),_a=function(e){var t=function(){switch(e.track.track_type){case"single":return c.a.createElement(la,{focused:e.focused,currentTrack:e.currentTrack,track:e.track,playerControls:e.playerControls});case"2stems":return c.a.createElement(Na,{focused:e.focused,currentTrack:e.currentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"accompaniment",buttonColour:"purple"}],playerControls:e.playerControls});case"4stems":return c.a.createElement(Na,{focused:e.focused,currentTrack:e.currentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"other",buttonColour:"purple"},{label:"bass",buttonColour:"pink"},{label:"drums",buttonColour:"yellow"}],playerControls:e.playerControls});case"5stems":return c.a.createElement(Na,{focused:e.focused,currentTrack:e.currentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"other",buttonColour:"purple"},{label:"piano",buttonColour:"lightGreen"},{label:"bass",buttonColour:"pink"},{label:"drums",buttonColour:"yellow"}],playerControls:e.playerControls});case"split_2stems":case"split_4stems":case"split_5stems":return c.a.createElement(Pa,null,c.a.createElement(Tt.a,{variant:"body1"},"Processing track. Refresh to check progress."),c.a.createElement(Or.a,null))}}();return c.a.createElement(jr.a,{in:e.focused},t)},Ma=Object(f.a)((function(e){return{root:{display:"flex",alignItems:"center",margin:e.spacing(.5)}}}))(Mt.a),Ua=Object(f.a)((function(e){return{root:{display:"flex",justifyContent:"center",margin:e.spacing(.5)}}}))(Mt.a),Wa=Object(f.a)((function(e){return{root:Object(j.a)({minWidth:0},er(e))}}))(Vt.a),Ka=Object(Nt.a)((function(e){return{root:{"& .MuiSelect-select":{paddingLeft:e.spacing(2)}}}})),Va=Object(f.a)((function(e){return{root:{minWidth:e.spacing(30)}}}))(gr.a),Ga=Object(f.a)((function(e){var t=e.spacing(36);return{root:Object(j.a)({backgroundColor:"white",minWidth:"50vw",maxWidth:t},Zn(e))}}))(Mt.a),Ja=function(e){var t=Ka(),n=Yn(),r=Object(s.a)(n,2),a=r[0],o=r[1],l=e.show,u=e.onMinimize;Object(i.useEffect)((function(){if(l){var e=function(e){"Slash"===e.code&&(u(),e.preventDefault())};return a(e),function(){return o(e)}}}),[a,o,u,l]);var d=void 0!==e.onOpenTrackEditDialog&&c.a.createElement(Wa,{onClick:e.onOpenTrackEditDialog},c.a.createElement(Er.a,null)),h=c.a.createElement(Wa,{onClick:e.onRefresh},c.a.createElement(Zt.a,null)),m=function(t){var n=t.target.value;"number"===typeof n?e.onSelectCurrentTrack(n):console.error("Unexpected! Selected value in full size player selector is not a number type")},f=function(){var n=function(){if("loaded"===e.tracklistLoad.state)return e.tracklistLoad.tracklist.tracks.map((function(e,t){return c.a.createElement(Jt.a,{key:"".concat(t,"-").concat(e.label),value:t},e.label)}))}();return c.a.createElement(Va,{className:t.root,disableUnderline:!0,value:e.currentTrackIndex,onChange:m},n)}(),p=c.a.createElement(ir,null,c.a.createElement(Mt.a,null),c.a.createElement(Ma,null,h,d,f),c.a.createElement(Mt.a,null,c.a.createElement(Wa,{onClick:e.onMinimize},c.a.createElement(Cr.a,null)))),y=function(){if("loading"===e.tracklistLoad.state)return c.a.createElement(Ua,null,c.a.createElement(Ut.a,null));return e.tracklistLoad.tracklist.tracks.map((function(t,n){var r=n===e.currentTrackIndex,a=r&&e.show,o=r?e.playerControls:Un;return c.a.createElement(_a,{key:"".concat(n,"-").concat(t.id),focused:a,currentTrack:r,track:t,playerControls:o})}))}();return c.a.createElement(Vn.a,{in:e.show,direction:"up"},or(c.a.createElement(Ga,null,p,c.a.createElement(qt.a,null),y)))},Ha=function(e){var t=Object(i.useState)("minimized"),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)({open:!1,randomID:""}),l=Object(s.a)(o,2),u=l[0],d=l[1],h=Object(i.useState)(!1),m=Object(s.a)(h,2),f=m[0],p=m[1],y=Object(i.useState)(0),v=Object(s.a)(y,2),b=v[0],g=v[1],k=Kn(e.timeSections),E="loaded"===e.tracklistLoad.state&&0===e.tracklistLoad.tracklist.tracks.length,w=function(t,n,a){return c.a.createElement(br,{className:e.collapsedButtonClassName,show:"minimized"===r,playersLoaded:f,playerControls:k,tooltipMessage:a,disabled:t,onClick:n})},C=function(){d({open:!0,randomID:F.a.generate()})},O=function(){d({open:!1,randomID:""})},j=u.open&&c.a.createElement(Pn,{key:u.randomID,open:u.open,trackListLoad:e.tracklistLoad,onSubmit:function(t){var n;O(),null===(n=e.onTrackListChanged)||void 0===n||n.call(e,t)},onClose:O,onRefresh:e.onRefresh}),L=Object(i.useCallback)((function(){f||p(!0),a("full")}),[f,p,a]),B=Object(i.useCallback)((function(){a("minimized")}),[a]);if(E)return c.a.createElement(c.a.Fragment,null,w(!1,C,"Show Player"),j);if(!f)return w(!1,L,"Show Player");var S=f&&c.a.createElement(Ja,{show:"full"===r,tracklistLoad:e.tracklistLoad,playerControls:k,currentTrackIndex:b,onSelectCurrentTrack:g,onMinimize:B,onRefresh:e.onRefresh,onOpenTrackEditDialog:C});return c.a.createElement(c.a.Fragment,null,w(!1,L,"Show Player"),S,j)},qa=n(67),Ya=function(){var e=Object(p.b)().enqueueSnackbar,t=function(t){e(t,{variant:"error"})};return function(){var e=Object(da.a)(sa.a.mark((function e(n){var r,a,o;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){console.error(n),t("An unknown error has occurred - please check the console for more details")},n instanceof ha.a.HTTPError){e.next=4;break}return r(),e.abrupt("return");case 4:return a=n.response.clone(),e.next=7,a.json();case 7:if(o=e.sent,"object"===typeof(i=o)&&null!==i&&void 0!==i&&"code"in i&&"msg"in i){e.next=11;break}return r(),e.abrupt("return");case 11:console.error(o.msg),e.t0=o.code,e.next="create_song_exists"===e.t0?15:"update_song_overwrite"===e.t0?17:"song_not_found"===e.t0?19:"failed_google_verification"===e.t0?21:"get_songs_for_user_not_allowed"===e.t0?23:"update_song_owner_not_allowed"===e.t0?25:"update_song_wrong_id"===e.t0?27:"datastore_error"===e.t0?29:31;break;case 15:return t("Save failed: The song already exists and can't be created again!"),e.abrupt("break",33);case 17:return t("Autosave failed: This song has been updated recently and saving now will clobber previously saved results. Please try to load the song in another tab and copy your work over to save it"),e.abrupt("break",33);case 19:return t("Not found: A song of this ID cannot be found"),e.abrupt("break",33);case 21:return t("Google verification failed: Please try to refresh and login again"),e.abrupt("break",33);case 23:return t("Loading songs failed: You don't have permission to see this user's songs"),e.abrupt("break",33);case 25:return t("Autosave failed: You don't have permission to update this user's songs"),e.abrupt("break",33);case 27:return t("Autosave failed: There is a mismatch of song IDs. Please refresh and try again"),e.abrupt("break",33);case 29:return t("The data operation was not successful - please check the console for more details"),e.abrupt("break",33);case 31:return t("An unknown error has occurred - please check the console for more details"),e.abrupt("break",33);case 33:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}()},Xa=function(){return"https://chord-be.philipwong.pw"}(),Qa=function(){var e=Object(da.a)(sa.a.mark((function e(t){var n;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.a.post("".concat(Xa,"/login"),{headers:{Authorization:"Bearer "+t}}).json();case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(S.left)(e.t0));case 9:return e.abrupt("return",Object(S.right)(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),$a=function(){var e=Object(da.a)(sa.a.mark((function e(t){var n;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.a.get("".concat(Xa,"/songs/").concat(t)).json();case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(S.left)(e.t0));case 9:return e.abrupt("return",Object(S.right)(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Za=function(){var e=Object(da.a)(sa.a.mark((function e(t){var n;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.a.get("".concat(Xa,"/songs/").concat(t,"/tracklist"),{timeout:!1}).json();case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(S.left)(e.t0));case 9:return e.abrupt("return",Object(S.right)(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),eo=function(){var e=Object(da.a)(sa.a.mark((function e(t,n){var r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.a.get("".concat(Xa,"/users/").concat(t,"/songs"),{headers:{Authorization:"Bearer "+n}}).json();case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(S.left)(e.t0));case 9:return e.abrupt("return",Object(S.right)(r));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),to=function(){var e=Object(da.a)(sa.a.mark((function e(t,n){var r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.a.post("".concat(Xa,"/songs"),{json:t,headers:{Authorization:"Bearer "+n}}).json();case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(S.left)(e.t0));case 9:return e.abrupt("return",Object(S.right)(r));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),no=function(){var e=Object(da.a)(sa.a.mark((function e(t,n){var r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUnsaved()){e.next=2;break}return e.abrupt("return",Object(S.left)(new Error("A song that hasn't been created can't be updated")));case 2:return e.prev=2,e.next=5,ha.a.put("".concat(Xa,"/songs/").concat(t.id),{json:t,headers:{Authorization:"Bearer "+n}}).json();case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",Object(S.left)(e.t0));case 11:return e.abrupt("return",Object(S.right)(r));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ro=function(){var e=Object(da.a)(sa.a.mark((function e(t,n){var r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.song_id){e.next=2;break}return e.abrupt("return",Object(S.left)(new Error("No song ID on the tracklist")));case 2:return e.prev=2,e.next=5,ha.a.put("".concat(Xa,"/songs/").concat(t.song_id,"/tracklist"),{json:t,headers:{Authorization:"Bearer "+n}}).json();case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",Object(S.left)(e.t0));case 11:return e.abrupt("return",Object(S.right)(r));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ao=T.l([nn,ln,dn,fn,In]),oo=T.k({song_id:T.i,tracks:T.b(ao)}),io=function(){function e(t,n){Object(L.a)(this,e),this.song_id=void 0,this.tracks=void 0,this.song_id=t,this.tracks=n}return Object(B.a)(e,null,[{key:"fromValidatedFields",value:function(t){var n=t.tracks.map((function(e){switch(e.track_type){case"single":return rn.fromValidatedFields(e);case"2stems":return un.fromValidatedFields(e);case"4stems":return hn.fromValidatedFields(e);case"5stems":return pn.fromValidatedFields(e);case"split_2stems":case"split_4stems":case"split_5stems":return Dn.fromValidatedFields(e)}}));return new e(t.song_id,n)}},{key:"fromJSONObject",value:function(e){var t=oo.decode(e);return Object(S.isLeft)(t)?Object(S.left)(new Error("Invalid Chord Song object")):Object(S.right)(this.fromValidatedFields(t.right))}}]),e}(),co=n(198),lo=n.n(co),uo=Object(Nt.a)({root:{objectFit:"contain"}}),so=function(){var e=uo();return c.a.createElement("img",{src:lo.a,className:e.root,alt:"Song Loading Error"})},ho=function(){function e(t,n,r){var a=this;Object(L.a)(this,e),this.googleUser=void 0,this.name=void 0,this.userID=void 0,this.authToken=void 0,this.googleUser=t,this.userID=n,this.name=r,this.authToken=t.get().getAuthResponse().id_token,this.googleUser.listen((function(){a.refreshAuthToken.call(a)}))}return Object(B.a)(e,[{key:"refreshAuthToken",value:function(){this.authToken=this.getNewAuthToken()}},{key:"getNewAuthToken",value:function(){return this.googleUser.get().getAuthResponse().id_token}}]),e}(),mo=c.a.createContext(null),fo=function(e){return"object"===typeof e&&(null!==e&&void 0!==e&&("id"in e&&"name"in e))},po=function(e){var t=Ya(),n=c.a.useContext(mo),r=Object(i.useState)({state:"not-started"}),a=Object(s.a)(r,2),o=a[0],l=a[1],u=function(e){if(Object(qa.isLeft)(e))l({state:"error",error:e.left});else{var t=io.fromJSONObject(e.right);Object(qa.isLeft)(t)?l({state:"error",error:"Failed to deserialize payload to tracklist"}):l({state:"loaded",item:t.right})}},d=function(){var t=Object(da.a)(sa.a.mark((function t(){var n;return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Za(e.song.id);case 2:n=t.sent,u(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(da.a)(sa.a.mark((function t(r){var a;return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n&&e.song.isOwner(n)){t.next=3;break}return l({state:"loaded",item:r}),t.abrupt("return");case 3:return t.next=5,ro(r,n.authToken);case 5:a=t.sent,u(a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){return l({state:"not-started"})};switch(o.state){case"not-started":return l({state:"loading"}),d(),c.a.createElement(c.a.Fragment,null);case"error":return t(o.error),c.a.createElement(so,null);case"loading":return e.children({state:"loading"},h,m);case"loaded":return e.children({state:"loaded",tracklist:o.item},h,m)}};!function(e){e[e.START=0]="START",e[e.END=1]="END",e[e.MIDDLE=2]="MIDDLE"}(Se||(Se={}));var yo,vo=function e(t,n){var r=bo(t,n);if(r===Se.MIDDLE)return[t,n];var a=go(t);return r===Se.END&&(a+=1),e(function(e){if(null===e.parentNode)throw new Error("Node doesn't have parent");return e.parentNode}(t),a)},bo=function(e,t){switch(e.nodeType){case Node.TEXT_NODE:return function(e,t){if(0===t)return Se.START;var n=e.nodeValue;if(null===n)throw new Error("Text node has no value?");return t===n.length?Se.END:Se.MIDDLE}(e,t);case Node.ELEMENT_NODE:return function(e,t){var n=e.childNodes;return 0===t?Se.START:t===n.length?Se.END:Se.MIDDLE}(e,t);default:throw new Error("Crash for now "+e.nodeType)}},go=function(e){if(null===e.parentNode)throw new Error("wtf");for(var t=e.parentNode.childNodes,n=0;n<t.length;n++)if(t.item(n)===e)return n;throw new Error("Child node doesn't exist in parent???")},ko=function(){var e=window.getSelection();if(null===e||0===e.rangeCount)return[];var t=function(e){var t=document.createRange(),n=e.getRangeAt(0);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset);for(var r=1;r<e.rangeCount;r++){var a=e.getRangeAt(r);-1===a.compareBoundaryPoints(Range.START_TO_START,t)&&t.setStart(a.startContainer,a.startOffset),1===a.compareBoundaryPoints(Range.END_TO_END,t)&&t.setEnd(a.endContainer,a.endOffset)}return t}(e);!function(e){var t=vo(e.startContainer,e.startOffset),n=Object(s.a)(t,2),r=n[0],a=n[1],o=vo(e.endContainer,e.endOffset),i=Object(s.a)(o,2),c=i[0],l=i[1];e.setStart(r,a),e.setEnd(c,l)}(t);for(var n=document.querySelectorAll("[data-lineid]"),r=[],a=0;a<n.length;a++){var o=n.item(a);if(t.intersectsNode(o)){var i=o.getAttribute("data-lineid");if(null===i)throw new Error("Unexpected - line element should have line ID because that's how it was selected");r.push(i)}}return r},Eo=T.k({copiedChordLines:T.b(Ee)}),wo=function(e){var t=Object(p.b)().enqueueSnackbar;return function(n){var r=ko(),a=e.chordLines.list.filter((function(e){return r.includes(e.id)}));if(0===a.size)return!1;var o,i=function(e){var t={copiedChordLines:e.map((function(e){return e.forCopying()})).toArray()};return JSON.stringify(t)}(a);return n.clipboardData.setData("application/json",i),n.preventDefault(),o=1===a.size?"1 line copied to your clipboard":"".concat(a.size," lines copied to your clipboard"),t(o,{variant:"info"}),!0}},Co=c.a.createContext({startInteraction:function(){},endInteraction:function(){}}),Oo=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(i.useContext)(Co),o=a.startInteraction,c=a.endInteraction;return{editing:n,startEdit:function(){r(!0),o()},finishEdit:function(){r(!1),c()}}},jo=n(89),Lo=n.n(jo),Bo=n(130),So=n.n(Bo),xo=n(131),To=n.n(xo),Io=n(12),Do=n(402),zo=function(e){return{backgroundColor:e.palette.primary.main}},Ao=function(e){return{color:e.palette.primary.main}},Fo=function(e){return{borderStyle:"solid",borderColor:e.palette.primary.main,borderRadius:"0.3em",borderWidth:"0.075em"}},Ro=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customLyricClassSelector)?e:"".concat(e,".").concat(t.customLyricClassSelector)},No=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customChordSymbolClassSelector)?e:"".concat(e,".").concat(t.customChordSymbolClassSelector)},Po=function(e){return function(t){var n,r=zo(t),a=Ao(t),o=void 0!==(null===e||void 0===e?void 0:e.outline)?e.outline(t):void 0,i=Object(j.a)(Object(j.a)({},Fo(t)),o),c=Ro(".".concat("LyricTokenSpace"),e),l=Ro(".".concat("LyricTokenWord"),e),u=No(".".concat("ChordSymbol"),e);return{root:(n={},Object(P.a)(n,"& ".concat(c),r),Object(P.a)(n,"& ".concat(l),a),Object(P.a)(n,"& ".concat(u),i),n)}}},_o=function(e){return function(t){var n,r=zo(t),a=Ao(t),o=void 0!==(null===e||void 0===e?void 0:e.outline)?e.outline(t):void 0,i=Object(j.a)(Object(j.a)({},Fo(t)),o),c=Ro(".".concat("LyricTokenSpace"),e),l=Ro(".".concat("LyricTokenWord"),e),u=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customChordTargetClassSelector)?e:"".concat(e,".").concat(t.customChordTargetClassSelector)}(".".concat("ChordTarget"),e),s=No(".".concat("ChordSymbol"),e);return{root:(n={},Object(P.a)(n,"& ".concat(u,":hover ~ ").concat(c),r),Object(P.a)(n,"& ".concat(u,":hover ~ * ").concat(c),r),Object(P.a)(n,"& ".concat(u,":hover ~ ").concat(l),a),Object(P.a)(n,"& ".concat(u,":hover ~ * ").concat(l),a),Object(P.a)(n,"& ".concat(u).concat(s,":hover"),i),Object(P.a)(n,"& ".concat(u,":hover ").concat(s),i),n)}}},Mo=function(e,t){for(var n=[],r=e.tokenize(),a=function(e){var a=r.get(e);if(void 0===a)throw new Error("Token index not found");var o=a.get((function(n){return function(e,t,n){if(V("serializedStr",e)){var r=K("serializedStr",e);return c.a.createElement($,{key:t,type:r.sizedTab,edit:n})}return e}(n,e,t)}));"string"===typeof o&&n.length>0&&"string"===typeof n[n.length-1]?n[n.length-1]+=o:n.push(o)},o=0;o<r.size;o++)a(o);return n},Uo=function(e){var t="";return e.forEach((function(e){var n=G(e);if(null!==n){var r=K("sizedTab",n);t+=r.serializedStr}else t+=e.textContent})),new re(t)},Wo={variant:"h6",display:"inline"},Ko=Object(Do.a)({root:{whiteSpace:"pre",wordSpacing:".15em",display:"inline-block"}}),Vo=Object(Rt.a)(Ko)(Tt.a),Go=function(e){var t,n,r=null!==(t=e.className)&&void 0!==t?t:"",a=Object(Io.a)((n={},Object(P.a)(n,"LyricTokenSpace",e.children.isEntirelySpace()),Object(P.a)(n,"LyricTokenWord",!e.children.isEntirelySpace()),Object(P.a)(n,r,void 0!==e.className),n));return c.a.createElement(Vo,Object.assign({},Wo,{className:a,"data-testid":e["data-testid"]}),Mo(e.children,!1))},Jo=Object(f.a)({root:{whiteSpace:"pre",cursor:"pointer",fontFamily:"PoriChord",userSelect:"all"}})(Tt.a),Ho=function(e){return c.a.createElement(Jo,{variant:"h6",display:"inline","data-testid":"ChordSymbol",className:e.className},function(){var t=e.children;return t.endsWith(" ")?t:ee(t+=" ")}())},qo=n(399),Yo=n(400),Xo=function(e,t){var n=Object(Yo.a)({accept:"chord",drop:function(){return{type:"dropped-chord-result",blockID:e,tokenIndex:t}},collect:function(e){return{isOver:e.isOver({shallow:!0})}}}),r=Object(s.a)(n,2),a=r[0].isOver;return[r[1],a]},Qo=function(e){var t=Xo(e.blockID,e.tokenIndex),n=Object(s.a)(t,2),r=n[0],a=n[1]?e.dragOverClassName:e.hoverableClassName,o=c.a.cloneElement(e.children,{className:a});return c.a.createElement(qo.a,{rootRef:r},o)},$o=function(e){var t=Xo(e.blockID,0),n=Object(s.a)(t,2),r=n[0],a=n[1],o=e.onDragOver;return Object(i.useEffect)((function(){o(a)}),[o,a]),c.a.createElement(qo.a,{rootRef:r},e.children)},Zo=n(401),ei=function(e){var t,n,r=Object(Zo.a)({item:(t=e.chordBlockID,n=e.children,{type:"chord",sourceBlockID:t,chord:n}),end:function(t,n){if(void 0!==t){var r,a=n.getDropResult();if(null!==(r=a)&&void 0!==r&&"object"===typeof r&&"dropped-chord-result"===r.type)e.onDrop({chord:t.chord,sourceBlockID:t.sourceBlockID,destinationBlockID:a.blockID,splitIndex:a.tokenIndex,dropType:a.dropEffect})}}}),a=Object(s.a)(r,2)[1];return c.a.createElement(qo.a,{rootRef:a},c.a.createElement(Ho,{className:e.className},e.children))},ti=function(e,t){return e.set(t.index,t.isDraggingOver)},ni=n(45),ri=function(e){var t=Object(ni.a)(),n=function(t){var n;null===(n=e.onFinish)||void 0===n||n.call(e,t)},r=function(){var n,r,a,o=void 0;void 0!==e.typographyVariant&&(o=null===t||void 0===t||null===(a=t.typography)||void 0===a?void 0:a[e.typographyVariant]);var i={style:{padding:void 0===e.paddingSpacing?0:t.spacing(e.paddingSpacing),fontSize:null===(n=o)||void 0===n?void 0:n.fontSize,opacity:1,background:Br.a[100]},className:null===(r=e.classes)||void 0===r?void 0:r.root};return void 0!==e.width&&i.style&&(i.style.width=e.width),i}();return c.a.createElement(bn.a,{autoFocus:!0,variant:e.variant,inputProps:Object(j.a)({"data-testid":"InnerInput"},r),InputProps:e.InputProps,inputRef:e.inputRef,value:e.value,onBlur:function(){n(e.value)},onChange:function(t){e.onValueChange(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&n(e.value)},placeholder:e.placeholder,error:e.error,fullWidth:!0,"data-testid":"TextInput"})},ai=function(e){var t=Object(i.useState)(e.value),n=Object(s.a)(t,2),r=n[0],a=n[1];return c.a.createElement(ri,{classes:e.classes,value:r,onValueChange:a,variant:e.variant,typographyVariant:e.typographyVariant,width:e.width,onFinish:e.onFinish})},oi=Object(Rt.a)({root:{color:"transparent",cursor:"pointer",userSelect:"none",position:"absolute",left:0,top:0,transform:"translate(0%, -115%)"}})(Vo),ii=function(e){return c.a.createElement(oi,Object.assign({},Wo,{onClick:e.onClick,className:e.className,"data-testid":"ChordEditButton"}),e.children)},ci=function(e){var t=0===e.index?"FirstLyricToken":void 0,n=c.a.createElement(Go,{className:t,"data-testid":"Token-".concat(e.index)},e.children);return c.a.createElement(Mt.a,{className:e.className,key:e.index,position:"relative",display:"inline","data-testid":"TokenBox-".concat(e.index)},function(){if(void 0===e.invisibleTarget)return null;var t=Mo(e.children,!1);return c.a.createElement(ii,{className:Object(Io.a)("ChordTarget","ChordSymbol"),onClick:e.invisibleTarget.onClick},t)}(),n)},li=Object(f.a)((function(e){return{root:{fontFamily:"PoriChord",borderBottom:"solid",borderBottomColor:e.palette.primary.main,borderBottomWidth:"2px",width:"4em"}}}))(ai),ui={dragOver:Object(_.a)(Po({outline:function(e){return{borderColor:Lo.a[300],color:Lo.a[300]}},customLyricClassSelector:"FirstLyricToken",customChordSymbolClassSelector:"BlockChordSymbol",customChordTargetClassSelector:"BlockChordTarget"})),hoverable:Object(_.a)(_o({outline:function(e){return{color:e.palette.primary.dark}},customLyricClassSelector:"FirstLyricToken",customChordSymbolClassSelector:"BlockChordSymbol",customChordTargetClassSelector:"BlockChordTarget"}))},si={dragOver:Object(_.a)(Po()),hoverable:Object(_.a)(_o())},di=function(e){var t={hoverable:ui.hoverable(),dragOver:ui.dragOver()},n={hoverable:si.hoverable(),dragOver:si.dragOver()},r=Oo(),a=r.editing,o=r.startEdit,l=r.finishEdit,u=function(e,t){var n=Object(i.useReducer)(ti,Object(N.a)([!1,!1])),r=Object(s.a)(n,2),a=r[0],o=r[1],c=function(e){var t=a.get(e);if(void 0===t)throw new Error("Out of index error");return t},l=[Object(i.useCallback)((function(e){return o({index:0,isDraggingOver:e})}),[o]),Object(i.useCallback)((function(e){return o({index:1,isDraggingOver:e})}),[o])];return[c(0)||c(1)?t:e,l[0],l[1]]}(t.hoverable.root,t.dragOver.root),d=Object(s.a)(u,3),m=d[0],f=d[1],p=d[2],y=e.chordBlock.lyricTokens;if(0===y.size){var v=new re("\xa0");y=Object(N.a)([v])}var b=function(t){return function(n){0!==t&&e.onBlockSplit(e.chordBlock,t),o(),n.stopPropagation()}},g=function(t){e.songDispatch({type:"drag-and-drop-chord",sourceBlockID:t.sourceBlockID,newChord:t.chord,dropType:t.dropType,destinationBlockID:t.destinationBlockID,splitIndex:t.splitIndex})},k=function(t){var n;null===(n=e.onChordChange)||void 0===n||n.call(e,e.chordBlock,t),l()},E=function(t,r){var a={onClick:b(r)};return c.a.createElement(Qo,{key:r,blockID:e.chordBlock,tokenIndex:r,hoverableClassName:n.hoverable.root,dragOverClassName:n.dragOver.root},c.a.createElement(ci,{index:r,invisibleTarget:a},t))},w=y.get(0);if(void 0===w)throw new Error("Lyric tokens list guaranteed at least one token");var C,O=y.slice(1),j=(C=w,""!==e.chordBlock.chord?c.a.createElement($o,{key:0,blockID:e.chordBlock,onDragOver:p},c.a.createElement(ci,{index:0},C)):E(C,0)),L=O.map((function(e,t){return E(e,t+1)})).unshift(j),B=a?c.a.createElement(Mt.a,{"data-testid":"ChordEdit"},c.a.createElement(li,{value:e.chordBlock.chord,variant:"filled",typographyVariant:"h6",onFinish:k})):""===e.chordBlock.chord?c.a.createElement(Ho,null,e.chordBlock.chord):c.a.createElement(ei,{chordBlockID:e.chordBlock,onDrop:g,className:Object(Io.a)("ChordSymbol","BlockChordSymbol")},e.chordBlock.chord);return c.a.createElement(Mt.a,{display:"inline-block"},c.a.createElement(h.a,{container:!0,direction:"column","data-testid":e["data-testid"],className:m},c.a.createElement(h.a,{className:Object(Io.a)("ChordTarget","BlockChordTarget"),onClick:b(0),item:!0},c.a.createElement($o,{blockID:e.chordBlock,onDragOver:f},B)),c.a.createElement(h.a,{item:!0,"data-testid":"Lyric"},L)))},hi=n(378),mi=Object(Rt.a)((function(e){return{contained:{backgroundColor:"transparent","&:hover":{backgroundColor:e.palette.primary.dark}}}}))(Vt.a),fi=Object(Rt.a)({tooltip:{padding:0,background:"transparent",margin:0}})(Gn.a),pi=function(e){var t=c.a.createElement(hi.a,{orientation:"vertical",variant:"text"},e.menuItems.map((function(e,t){return c.a.createElement(mi,{key:t,onClick:e.onClick,"data-testid":e["data-testid"]},e.icon)})));return c.a.createElement(fi,{placement:"right",title:t,interactive:!0},e.children)},yi=function(e){if(null===e.current)throw new Error("unexpected for ref to be null");return e.current},vi=function(e){var t=yi(e),n=window.getSelection();if(null===n||0===n.rangeCount)return null;var r=n.getRangeAt(0);return null!==r&&t.contains(r.startContainer)&&t.contains(r.endContainer)?r:null},bi=function(e,t){var n=yi(e),r=vi(e);return null!==r&&(r.deleteContents(),r.insertNode(t),r.collapse(!1),n.normalize(),!0)},gi=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if(t===n.item(r))return r;return null},ki=function(e){var t,n=yi(e),r=vi(e);if(null===r)return null;if(r.startContainer===n){if(0===r.startOffset)return null;t=r.startOffset-1}else{if(0!==r.startOffset)return null;var a=gi(n,r.startContainer);if(null===a||0===a)return null;t=a-1}return n.childNodes.item(t)},Ei=function(e){return function(t){return"Enter"===t.key&&(e(),!0)}},wi=function(e,t){return function(n){return!("Backspace"!==n.key||!n.metaKey&&!n.ctrlKey)&&(!!function(e){var t=vi(e);if(null===t)return!1;if(!t.collapsed)return!1;var n=yi(e);return t.startContainer===n&&0===t.startOffset||null!==n.firstChild&&t.startContainer===n.firstChild&&0===t.startOffset}(e)&&(t(),!0))}},Ci=function(e,t){return function(n){var r;if("Tab"!==n.key||n.shiftKey)if("Tab"===n.key&&n.shiftKey)r=o.LargeTab;else{if(" "!==n.key||!n.shiftKey)return!1;r=o.SmallTab}else r=o.MediumTab;var a=t(r);return bi(e,a)}},Oi=function(e){return function(t){if("Backspace"!==t.key)return!1;var n=ki(e);if(null===n||null===G(n))return!1;var r=n.parentElement;return null!==r&&(r.removeChild(n),!0)}},ji=function(e){return function(t){var n,r=yi(e),a=window.getSelection();if(null===a)return!1;if(t.shiftKey||t.metaKey||t.ctrlKey)return!1;if("ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return!1;if("ArrowLeft"===t.key){var o=ki(e);if(null===o||null===G(o))return!1;var i=gi(r,o);if(null===i)return console.error("Unexpected - node cannot be found inside contenteditable element"),!1;n=i}else{var c=function(e){var t=yi(e),n=vi(e);if(null===n)return null;var r,a=t.childNodes.length;if(n.endContainer===t){if(n.endOffset===a)return null;r=n.endOffset}else{if(n.endContainer.nodeType===n.endContainer.TEXT_NODE){var o=n.endContainer;if(n.endOffset!==o.length)return null}var i=gi(t,n.endContainer);if(null===i||i===a)return null;r=i+1}return t.childNodes.item(r)}(e);if(null===c||null===G(c))return!1;var l=gi(r,c);if(null===l)return console.error("Unexpected - node cannot be found inside contenteditable element"),!1;n=l+1}return a.setBaseAndExtent(r,n,r,n),!0}},Li=function(e){var t,n,r=function(){var e=Q();return function(t){var n=document.createElement("span");n.className=e[t].root,n.contentEditable="false";var r=K("sizedTab",t);return n.dataset.lyrictabtype=r["data-lyrictabtype"],n}}(),a=[(t=e.contentEditableRef,n=e.specialEnterCallback,function(e){if("Enter"!==e.key||!e.metaKey&&!e.ctrlKey)return!1;var r=vi(t);return null!==r&&(n(r.startOffset),!0)}),wi(e.contentEditableRef,e.specialBackspaceCallback),Ci(e.contentEditableRef,r),Ei(e.enterCallback),Oi(e.contentEditableRef),ji(e.contentEditableRef),function(e){return!(!e.metaKey&&!e.ctrlKey)&&("b"===e.key||"B"===e.key||"u"===e.key||"U"===e.key||"i"===e.key||"I"===e.key)}];return function(e){var t,n=Object(R.a)(a);try{for(n.s();!(t=n.n()).done;){if((0,t.value)(e))return void e.preventDefault()}}catch(r){n.e(r)}finally{n.f()}}},Bi=function(e){var t=e.cloneContents();return Uo(t.childNodes)},Si=function(e,t){var n=function(e){var t=vi(e),n=yi(e),r=document.createRange(),a=document.createRange();return null!==t?(r.setStart(n,0),r.setEnd(t.startContainer,t.startOffset),a.setStart(t.endContainer,t.endOffset),a.setEnd(n,n.childNodes.length)):(r.selectNodeContents(n),a.setStart(r.endContainer,r.endOffset),a.setEnd(r.endContainer,r.endOffset)),[r,a]}(e),r=Object(s.a)(n,2),a=r[0],o=r[1],i=Bi(a);i=i.append(t[0]);var c=t.slice(1).map((function(e){return new re(e)})),l=c.length-1,u=c[l].append(Bi(o));return c[l]=u,[i,c]},xi=function(e,t){return function(n){var r=n.clipboardData.getData("text/plain");if(""===r)return!1;var a=r.split("\r\n");if(0===(a=a.flatMap((function(e){return e.split("\n")}))).length)return!1;if(1===a.length)return bi(e,document.createTextNode(a[0]));var o=Si(e,a),i=Object(s.a)(o,2),c=i[0],l=i[1];return t(c,l),!0}},Ti=[function(e){if(!e.isCollapsed)return!1;var t=e.getRangeAt(0);return null!==G(t.endContainer)&&(t.setStartAfter(t.endContainer),t.setEndAfter(t.endContainer),t.collapse(!0),!0)}],Ii=function(e){var t=document.getSelection();if(null!==t&&1===t.rangeCount){var n,r=Object(R.a)(Ti);try{for(r.s();!(n=r.n()).done;){if((0,n.value)(t))return void e.preventDefault()}}catch(a){r.e(a)}finally{r.f()}}},Di=Object(f.a)({root:{width:"100%",backgroundColor:Br.a[200],whiteSpace:"pre",display:"inline-block"}})(Tt.a),zi=Object(_.a)({root:{display:"inline-block",width:"100%",pointerEvents:"auto",userSelect:"text",outline:"none",wordSpacing:".15em","&:empty:before":{content:'"\\a0"'}}}),Ai=function(e){var t,n=c.a.createRef(),r=function(){var e=yi(n);return null===e.textContent?new re(""):Uo(e.childNodes)},a=function(t){e.onFinish(t)},o=Li({contentEditableRef:n,enterCallback:function(){a(r())},specialBackspaceCallback:function(){e.onSpecialBackspace()},specialEnterCallback:function(t){a(r()),e.onSpecialEnter(t)}}),l=function(e){var t,n=[(t=e.pasteJSONCallback,function(e){var n=e.clipboardData.getData("application/json");return""!==n&&t(n)}),xi(e.contentEditableRef,e.pastePlainTextCallback)];return function(e){var t,r=Object(R.a)(n);try{for(r.s();!(t=r.n()).done;){if((0,t.value)(e))return void e.preventDefault()}}catch(a){r.e(a)}finally{r.f()}}}({contentEditableRef:n,pasteJSONCallback:function(t){var n=e.onJSONPaste(t),o=Object(s.a)(n,2),i=o[0],c=o[1];return i&&(a(r()),null===c||void 0===c||c()),i},pastePlainTextCallback:function(t,n){a(t),e.onLyricOverflow(n)}}),u=zi(),d=Mo(e.children,!0);return t=n,Object(i.useEffect)((function(){var e=yi(t);e.focus();var n=window.getSelection();if(null!==n){var r=document.createRange();r.selectNodeContents(e),r.collapse(!1),n.removeAllRanges(),n.addRange(r)}})),Object(i.useEffect)((function(){return document.addEventListener("selectionchange",Ii),function(){return document.removeEventListener("selectionchange",Ii)}})),c.a.createElement(Di,{classes:e.classes,variant:e.variant,display:"inline","data-testid":"LyricInput"},c.a.createElement("span",{contentEditable:!0,className:u.root,ref:n,"data-testid":"InnerInput",onBlur:function(){a(r())},onKeyDown:o,onPaste:l,suppressContentEditableWarning:!0},d))},Fi=Object(Rt.a)((function(e){return{root:Object(j.a)(Object(j.a)({},Ko.root),{},{borderBottom:"solid",borderBottomColor:e.palette.secondary.main,borderBottomWidth:"2px"})}}))(Ai),Ri=function(e){var t=Oo(),n=t.editing,r=t.startEdit,a=t.finishEdit,o=e.songDispatch,l=e.chordLine,u=Object(p.b)().enqueueSnackbar,s=Object(i.useMemo)((function(){return{lyricEdit:function(e){a(),o({type:"replace-line-lyrics",line:l,lineID:l,newLyric:e})},lyricPasteOverflow:function(e){o({type:"insert-overflow-lyrics",insertionLineID:l,overflowLyrics:e}),a()},jsonPaste:function(e){var t=function(e){var t=Object(S.parseJSON)(e,(function(){return new Error("Failed to parse json string")}));if(Object(S.isLeft)(t))return t;var n=t.right;if(void 0===n.copiedChordLines)return null;var r=Eo.decode(n);if(Object(S.isLeft)(r))return Object(S.left)(new Error("Invalid Chord Lines payload"));var a=r.right.copiedChordLines.map((function(e){return je.fromValidatedFields(e)}));return Object(S.right)(a)}(e);if(null===t)return[!1,null];if(Object(S.isLeft)(t)){var n="Failed to paste copied lines: "+t.left.message;return u(n,{variant:"error"}),[!0,null]}return[!0,function(){return o({type:"batch-insert-lines",insertLineID:l,copiedLines:t.right})}]},specialBackspace:function(){o({type:"merge-lines",latterLineID:l}),a()},specialEnter:function(e){o({type:"split-line",lineID:l,splitIndex:e}),a()}}}),[l,o,a,u]),d=e.children(r);return n?c.a.createElement(c.a.Fragment,null,d,c.a.createElement(Mt.a,{position:"absolute",left:"0",bottom:"2px",width:"100%"},c.a.createElement(Fi,{variant:"h6",onFinish:s.lyricEdit,onJSONPaste:s.jsonPaste,onLyricOverflow:s.lyricPasteOverflow,onSpecialBackspace:s.specialBackspace,onSpecialEnter:s.specialEnter},e.chordLine.lyrics))):d},Ni=Object(Do.a)({root:{borderColor:U.a[500],borderStyle:"solid",borderRadius:"0.3em",borderWidth:"0.075em",color:U.a[500],display:"inline-block"}}),Pi=n(58),_i=Object(f.a)({root:{color:Br.a[400]}})(Tt.a),Mi=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=void 0!==e.editControl?e.editControl.editing:r,l=function(){void 0!==e.editControl?e.editControl.onStartEdit():a(!0)},u=function(t){void 0!==e.editControl?e.editControl.onEndEdit():a(!1),e.onValueChange&&e.onValueChange(t)},d=o?function(){if("inherit"===e.variant||"srOnly"===e.variant)throw new Error("can't have these variant types");return c.a.createElement(ai,{value:e.value,variant:"filled",typographyVariant:e.variant,onFinish:u,"data-testid":"EditableLine"})}():function(){e.value,e.placeholder,e.onValueChange,e.editControl;var t=Object(Pi.a)(e,["value","placeholder","onValueChange","editControl"]);return""===e.value&&void 0!==e.placeholder?c.a.createElement(_i,Object.assign({},t,{onClick:l}),e.placeholder):c.a.createElement(Tt.a,Object.assign({},t,{onClick:l}),ee(e.value))}();return c.a.createElement(Mt.a,null,d)},Ui=n(379),Wi=n(380),Ki=n(200),Vi=n.n(Ki),Gi=Object(f.a)((function(e){return{root:{textAlign:"right",width:nr(e,"body1","00:00")}}}))(ri),Ji=function(e){var t=function(e){return null===e?"":_n.Duration.fromMillis(1e3*e).toFormat("mss")},n=t(e.seconds),r=Object(i.useState)(n),a=Object(s.a)(r,2),o=a[0],l=a[1],u=Object(i.useRef)(null),d=Object(i.useContext)(Pt),h=function(e){var t=Number(e),n=t%100;return[Math.floor(t/100),n]},m=function(e){if(""===e)return!0;var t=h(e),n=Object(s.a)(t,2),r=n[0],a=n[1];return!isNaN(r)&&!isNaN(a)&&!(a>59||a<0)},f=function(t){var n,r;if(""!==t){if(m(t)){var a=h(t),o=Object(s.a)(a,2),i=o[0],c=o[1];null===(n=e.onFinish)||void 0===n||n.call(e,60*i+c)}}else null===(r=e.onFinish)||void 0===r||r.call(e,null)},p=c.a.createElement(Ui.a,{position:"start"},c.a.createElement(Wi.a,{edge:"start",onClick:function(){var e=d.current;if(null!==e){var n=e(),r=t(n);l(r),f(r),null!==u.current&&void 0!==u.current.focus&&null!==u.current.focus&&u.current.focus()}}},c.a.createElement(Vi.a,null))),y=function(e){if(""===e)return"";if(1===e.length)return"0:0"+e;if(2===e.length)return"0:"+e;var t=e.length-2;return e.substring(0,t)+":"+e.substring(t)}(o),v=!m(o);return c.a.createElement(Gi,{placeholder:"0:00",value:y,onValueChange:function(e){l(function(e){var t=e.replaceAll(/\D/g,"");return"0"===t?"000":"00"===t?"":t=t.replace(/^0+/,"")}(e))},variant:"standard",typographyVariant:"body1",onFinish:function(){return f(o)},paddingSpacing:.5,error:v,InputProps:{startAdornment:p,disableUnderline:!v},inputRef:u})},Hi=Object(f.a)(Ni)(Mi),qi=Object(f.a)((function(e){return{tooltip:{background:"white",boxShadow:e.shadows[2]}}}))(Gn.a),Yi=function(e){var t,n=Oo(),r=n.editing,a=n.startEdit,o={editing:r,onStartEdit:a,onEndEdit:n.finishEdit},l=e.chordLine,u=e.songDispatch,s=Object(i.useCallback)((function(e){u({type:"set-section",lineID:l,label:e})}),[l,u]),d=Object(i.useCallback)((function(e){u({type:"set-section",lineID:l,time:e})}),[l,u]),h=e.children(a),m=e.chordLine.section;if(!r&&void 0===m)return h;var f=null!==(t=null===m||void 0===m?void 0:m.name)&&void 0!==t?t:"",p=function(){var e="time"===(null===m||void 0===m?void 0:m.type)?m.time:null;return c.a.createElement(Ji,{seconds:e,onFinish:d})}(),y=r;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Mt.a,null,c.a.createElement(qi,{arrow:!0,placement:"left",interactive:!0,title:p,disableFocusListener:y},c.a.createElement("span",null,c.a.createElement(Hi,{value:f,variant:"body2","data-testid":"EditLabel",editControl:o,onValueChange:s})))),h)},Xi=Object(Rt.a)({root:{userSelect:"all"}})(Mt.a),Qi=Object(Rt.a)({root:{color:Lo.a[300]}})(So.a),$i=Object(Rt.a)({root:{"&:hover":{backgroundColor:Br.a[100]},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})(Mt.a),Zi=c.a.memo((function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=e.chordLine,l=e.songDispatch,u=Object(i.useMemo)((function(){return{chordChange:function(e,t){l({type:"set-chord",lineID:o,blockID:e,newChord:t})},blockSplit:function(e,t){l({type:"split-block",lineID:o,blockID:e,splitIndex:t})},remove:function(){r||(a(!0),setTimeout((function(){l({type:"remove-line",lineID:o})}),250))}}}),[o,l,r]),d=e.chordLine.chordBlocks;0===d.length&&(d=new se([new ce({chord:"",lyric:new re("")})]));var h=d.list.map((function(e){return c.a.createElement(di,{key:e.id,chordBlock:e,songDispatch:l,onChordChange:u.chordChange,onBlockSplit:u.blockSplit,"data-testid":"Block"})})),m=function(e,t){return c.a.createElement(pi,{menuItems:t},function(e){return c.a.createElement($i,{"data-testid":"NoneditableLine",onClick:e},h)}(e))},f=c.a.createElement(Yi,{chordLine:o,songDispatch:l},(function(e){return function(e){return c.a.createElement(Ri,{chordLine:o,songDispatch:l},(function(t){return m(t,e)}))}([{onClick:e,icon:c.a.createElement(To.a,null),"data-testid":"EditLabel"},{onClick:u.remove,icon:c.a.createElement(Qi,null),"data-testid":"RemoveButton"}])})),p=r?"up":"down";return c.a.createElement(Vn.a,{direction:p,in:!r,timeout:250},c.a.createElement(Xi,null,c.a.createElement(Mt.a,{borderBottom:1,width:"100%",position:"relative","data-lineid":e["data-lineid"],"data-testid":e["data-testid"]},f)))})),ec=n(201),tc=n.n(ec),nc=n(139),rc=Object(f.a)({root:{"&:hover .MuiDivider-root":{backgroundColor:"rgba(0, 0, 0, 0.25)"}}})(h.a),ac=Object(f.a)({tooltip:{padding:0,background:"transparent",margin:0}})(Gn.a),oc=Object(f.a)({root:{width:"100%",backgroundColor:"transparent"}})(qt.a),ic=Object(f.a)((function(e){return{root:{color:e.palette.secondary.light}}}))(tc.a),cc=c.a.memo((function(e){var t=Object(nc.a)(),n=function(){e.songDispatch({type:"add-line",lineID:e.lineID})};return c.a.createElement(ac,{title:c.a.createElement(Vt.a,{"data-testid":"AddButton",onClick:n},c.a.createElement(ic,null)),interactive:!0,placement:"right"},c.a.createElement(rc,{container:!0,direction:"column",justify:"center",onClick:n,"data-testid":e["data-testid"],style:{minHeight:t.spacing(3)}},c.a.createElement(oc,null)))})),lc=Object(_.a)({root:{pointerEvents:"none"}}),uc=Object(Rt.a)({root:{width:"auto"}})(xt.a),sc=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=wo(e.song),l=e.songDispatch,u=Object(i.useMemo)((function(){return{startInteraction:function(){setTimeout((function(){a(!0)}))},endInteraction:function(){setTimeout((function(){a(!1)}))}}}),[]),d=lc(),m=function(){var t=e.song.chordLines.list.flatMap((function(e){return[c.a.createElement(Zi,{key:e.id,chordLine:e,songDispatch:l,"data-lineid":e.id,"data-testid":"Line"}),c.a.createElement(cc,{key:"NewLine-"+e.id,lineID:e,songDispatch:l,"data-testid":"NewLine"})]})),n=c.a.createElement(cc,{key:"NewLine-Top",lineID:"beginning",songDispatch:l,"data-testid":"NewLine-Top"});return t=t.splice(0,0,n)}(),f=!r,p=f?void 0:d.root;return c.a.createElement(Co.Provider,{value:u},c.a.createElement(uc,{onKeyDown:f?function(e){var t=function(e){if("Backspace"!==e.key)return!1;var t=ko();return 0!==t.length&&(e.preventDefault(),t.map((function(e){return{type:"ChordLine",id:e}})))}(e);!1!==t&&l({type:"batch-remove-lines",lineIDs:t})}:void 0,onCopy:f?o:void 0,className:p,elevation:0,tabIndex:0},c.a.createElement(h.a,{container:!0,justify:"center"},c.a.createElement(h.a,{item:!0,xs:10},m))))},dc=Object(f.a)({root:{color:Br.a[600]}})(Tt.a),hc=function(e){var t=Object(i.useState)(new Date),n=Object(s.a)(t,2)[1];return Object(i.useEffect)((function(){var e=setInterval((function(){return n(new Date)}),3e4);return function(){return clearInterval(e)}}),[n]),c.a.createElement(dc,{classes:e.classes,variant:"caption"},"Last Saved: ".concat(function(){var t=_n.DateTime.fromJSDate(e.lastSaved);if(t.diffNow().as("day")<=-1)return t.toLocaleString(_n.DateTime.DATE_MED);if(t.diffNow().as("second")>=-1)return"just now";var n=t.toRelative();return null===n?"WHAT IS HAPPENING? CONTACT YOUR DEV":n}()))},mc=Object(f.a)((function(e){return{root:{position:"absolute",top:e.spacing(2),right:e.spacing(2)}}}))(hc),fc=c.a.memo((function(e){var t=Object(nc.a)(),n=c.a.createElement(Mt.a,{paddingBottom:t.spacing(.5)},c.a.createElement(Mi,{value:e.song.title,variant:"h4",align:"center","data-testid":"SongTitle",placeholder:"Song Title",onValueChange:function(t){e.songDispatch({type:"set-header",title:t})}})),r=null===e.song.lastSavedAt?null:c.a.createElement(mc,{lastSaved:e.song.lastSavedAt}),a=c.a.createElement(h.a,{container:!0,justify:"center"},c.a.createElement(h.a,{container:!0,item:!0,xs:6,justify:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(Tt.a,{display:"block",variant:"caption"},"Composed by:"," "),c.a.createElement(Mi,{value:e.song.composedBy,display:"block",variant:"caption",placeholder:"Stock Aitken Waterman",onValueChange:function(t){e.songDispatch({type:"set-header",composedBy:t})},"data-testid":"ComposedBy"}))),c.a.createElement(h.a,{container:!0,item:!0,xs:6,justify:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(Tt.a,{display:"inline",variant:"caption"},"Performed by:"," "),c.a.createElement(Mi,{value:e.song.performedBy,variant:"caption",placeholder:"Rick Astley",onValueChange:function(t){e.songDispatch({type:"set-header",performedBy:t})},"data-testid":"PerformedBy"}))));return c.a.createElement(Mt.a,{paddingTop:t.spacing(1),paddingLeft:t.spacing(.5),paddingRight:t.spacing(.5),"data-testid":"Header"},r,n,a)})),pc=n(133),yc=n.n(pc),vc=n(206),bc=n.n(vc),gc=n(204),kc=n.n(gc),Ec=n(132),wc=n.n(Ec),Cc=n(203),Oc=n.n(Cc),jc=n(205),Lc=n.n(jc),Bc=n(408),Sc=n(381),xc=n(202),Tc=n.n(xc),Ic=function(e,t){return function(){var n=document.createElement("input");n.type="file";var r=function(e,t){return function(){var n=this.files;if(null!==n)if(n.length>1)t("Multiple files selected, only one file expected",{variant:"error"});else{var r=n.item(0);if(null!==r){var a=new FileReader;a.onload=function(n){if(!(null===n.target||null===n.target.result||n.target.result instanceof ArrayBuffer)){var r=ft.deserialize(n.target.result);Object(S.isLeft)(r)?t("Can't load file, Song file failed validation",{variant:"error"}):e(r.right)}},a.readAsText(r)}else t("Could not retrieve file from file dialog",{variant:"error"})}}}(e,t);n.addEventListener("change",r),n.click()}},Dc=n(362),zc=n(363),Ac=Object(f.a)((function(e){return{root:{margin:e.spacing(2),display:"flex"}}}))(Dc.a),Fc=Object(f.a)((function(e){return{root:{margin:e.spacing(.5)}}}))(gr.a),Rc=function(e){var t=Object(i.useState)({originalKey:"C",transposedKey:"C"}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=function(e){return function(t){var n=t.target.value,o=Object(j.a)({},r);o[e]=n,a(o)}},l=function(e,t,n){var r=[];for(var a in ze)r.push(c.a.createElement(Jt.a,{value:a},a));return c.a.createElement(Fc,{id:e,value:t,onChange:n},r)};return c.a.createElement(Wt.a,{open:e.open,onClose:e.onClose},c.a.createElement(Kt.a,null,"Transpose Key"),c.a.createElement(Ht.a,null,c.a.createElement(h.a,{container:!0,direction:"row"},c.a.createElement(h.a,{item:!0},c.a.createElement(Ac,null,c.a.createElement(zc.a,{htmlFor:"original-key"},"Original Key"),l("original-key",r.originalKey,o("originalKey")))),c.a.createElement(h.a,{item:!0},c.a.createElement(Ac,null,c.a.createElement(zc.a,{htmlFor:"transposed-key"},"Transposed Key"),l("transposed-key",r.transposedKey,o("transposedKey")))))),c.a.createElement(Yt.a,null,c.a.createElement(Vt.a,{onClick:e.onClose},"Cancel"),c.a.createElement(Vt.a,{onClick:function(){e.songDispatch({type:"transpose",originalKey:r.originalKey,transposeKey:r.transposedKey}),e.onClose()}},"Transpose")))},Nc=Object(f.a)((function(e){return{root:{position:"fixed",top:e.spacing(3),right:e.spacing(2)}}}))(Bc.a),Pc=function(e){var t,n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],l=Object(i.useState)(!1),u=Object(s.a)(l,2),d=u[0],h=u[1],m=Object(i.useState)(!1),f=Object(s.a)(m,2),y=f[0],b=f[1],g=Object(p.b)().enqueueSnackbar,k=c.a.useContext(mo),E=Ic((function(t){return e.songDispatch({type:"replace-song",newSong:t})}),g),w=(t=e.song,function(){var e=JSON.stringify(t.fork()),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.download="chord_paper_song.json",""!==t.title&&(a.download=t.title+".json"),a.href=r,a.click(),URL.revokeObjectURL(r)}),C=function(){var e=Object(p.b)().enqueueSnackbar,t=Ya(),n=Object(v.h)(),r=function(){var r=Object(da.a)(sa.a.mark((function r(a,o){var i,c,l,u;return sa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=a.set("owner",o.userID),r.next=3,to(i,o.authToken);case 3:if(c=r.sent,!Object(qa.isLeft)(c)){r.next=8;break}return r.next=7,t(c.left);case 7:return r.abrupt("return");case 8:if(l=ft.fromJSONObject(c.right),!Object(qa.isLeft)(l)){r.next=14;break}return console.error("Backend response does not match song format"),console.log(c.right),e("A failure happened. Check console for more error details",{variant:"error"}),r.abrupt("return");case 14:u=l.right,n.push(wt.withID(u.id).withMode("edit").URL());case 16:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return function(){var e=Object(da.a)(sa.a.mark((function e(t,n){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUnsaved()){e.next=3;break}return e.next=3,r(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}();return Tc()((function(){b(!0),g("Local save and load buttons are enabled!",{variant:"info"})})),d?c.a.createElement(Rc,{song:e.song,songDispatch:e.songDispatch,open:!0,onClose:function(){h(!1)}}):c.a.createElement(Nc,{icon:c.a.createElement(wc.a,null),open:a,onOpen:function(){o(!0)},onClose:function(){o(!1)},direction:"down",ariaLabel:"SpeedDial"},c.a.createElement(Sc.a,{icon:c.a.createElement(lr.a,null),tooltipTitle:"Play Mode",onClick:e.onPlay}),!e.song.isUnsaved()&&null!==k&&c.a.createElement(Sc.a,{icon:c.a.createElement(Oc.a,null),tooltipTitle:"Fork",onClick:function(){return function(e,t){var n=e.fork();C(n,t)}(e.song,k)}}),e.song.isUnsaved()&&null!==k&&c.a.createElement(Sc.a,{icon:c.a.createElement(yc.a,null),tooltipTitle:"Save to Cloud",onClick:function(){return C(e.song,k)}}),c.a.createElement(Sc.a,{icon:c.a.createElement(kc.a,null),tooltipTitle:"Transpose",onClick:function(){h(!0)}}),y&&c.a.createElement(Sc.a,{icon:c.a.createElement(Lc.a,null),tooltipTitle:"Save to computer",onClick:w}),y&&c.a.createElement(Sc.a,{icon:c.a.createElement(bc.a,null),tooltipTitle:"Load from computer",onClick:E}))},_c=Object(Rt.a)((function(e){return{root:{position:"relative",margin:e.spacing(5),minHeight:e.spacing(92),minWidth:e.spacing(92)}}}))(xt.a),Mc=Object(Nt.a)({root:{backgroundColor:"white"}}),Uc=function(e){var t=Mc(),n=e.song.isUnsaved()?null:c.a.createElement(po,{song:e.song},(function(n,r,a){return c.a.createElement(Ha,{collapsedButtonClassName:t.root,timeSections:e.song.timeSections,tracklistLoad:n,onTrackListChanged:r,onRefresh:a})}));return c.a.createElement(_t,null,c.a.createElement(y.a,null,c.a.createElement("title",null,""!==e.song.metadata.title?e.song.metadata.title:"New Song")),c.a.createElement(_c,{elevation:3,"data-testid":"ChordPaper"},c.a.createElement(fc,{"data-testid":"Header",song:e.song,songDispatch:e.songDispatch}),c.a.createElement(sc,{song:e.song,songDispatch:e.songDispatch}),c.a.createElement(Pc,{song:e.song,songDispatch:e.songDispatch,onPlay:e.onPlay}),n))},Wc=n(222),Kc=["ArrowUp","ArrowLeft","Backspace","ShiftLeft"],Vc=["KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Space","Enter","ArrowDown","ArrowRight","Comma","Period","Slash","Backslash","Semicolon","Quote","Backquote","Tab","ShiftRight","Equal","BracketLeft","BracketRight"],Gc=function(e){return c.a.createElement(Mt.a,{display:"inline-block"},c.a.createElement(h.a,{container:!0,direction:"column",component:"span"},c.a.createElement(h.a,{item:!0},c.a.createElement(Ho,null,e.block.chord)),c.a.createElement(h.a,{item:!0},c.a.createElement(Go,{"data-testid":"lyric"},e.block.lyric))))},Jc=Object(f.a)(Ni)(Tt.a),Hc=Object(f.a)((function(e){return{root:{marginTop:e.spacing(1)}}}))(Mt.a),qc=function(e){var t,n=c.a.createElement(Mt.a,null,e.chordLine.chordBlocks.list.map((function(e){return c.a.createElement(Gc,{block:e,key:e.id})}))),r=null===(t=e.chordLine.section)||void 0===t?void 0:t.name;if(void 0!==r&&""!==r){var a=c.a.createElement(Hc,null,c.a.createElement(Jc,{variant:"body2"},r));n=c.a.createElement(Mt.a,null,a,n)}return n},Yc=function(e){var t=c.a.useRef(),n=Object(i.useState)(0),r=Object(s.a)(n,2),a=r[0],o=r[1],l=function(){var e=Object(i.useContext)(qn),t=Object(s.a)(e,3);return[t[0],t[2]]}(),u=Object(s.a)(l,2),d=u[0],h=u[1],m=e.displaySettings.numberOfColumnsPerPage>=1?e.displaySettings.numberOfColumnsPerPage:1,p=e.displaySettings.columnMargin>=0?e.displaySettings.columnMargin:0,y=Object(Wc.a)(),v=y/m,b=v/2,g=Object(i.useCallback)((function(t){var n=window.scrollX+function(){var n="column"===e.displaySettings.scrollType?v:y;return t?n:-n}(),r=n%v;r<b?n-=r:n+=v-r;window.scrollTo({left:n,top:0,behavior:"smooth"})}),[v,y,b,e.displaySettings.scrollType]),k=Object(i.useCallback)((function(){return g(!0)}),[g]),E=Object(i.useCallback)((function(){return g(!1)}),[g]),w=function(e){return 0!==e.button||k(),!1},C=function(e){return 2===e.button&&(E(),!0)},O=Object(f.a)({root:{columnGap:"0px",columnRuleWidth:"2px",columnRuleStyle:"solid",columnRuleColor:Br.a[300],columns:m,height:"100vh",width:"100%"}})(xt.a),j=Object(f.a)({root:{marginLeft:"".concat(p,"px"),marginRight:"".concat(p,"px")}})(Mt.a),L=e.song.chordLines.list.map((function(e){return c.a.createElement(qc,{chordLine:e,key:e.id})})),B=Object(f.a)({root:{height:"100vh",pageBreakInside:"avoid"}})(Mt.a),S=function(){if(null===a)return[];for(var e=[],t=0;t<a;t++)e.push(c.a.createElement(B,{key:"empty-column-".concat(t)},c.a.createElement("div",null)));return e}();return Object(i.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.focus()})),Object(i.useEffect)((function(){var e=function(e){return function(e){var t,n=Object(R.a)(Kc);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}(e.code)?(E(),void e.preventDefault()):function(e){var t,n=Object(R.a)(Vc);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}(e.code)?(k(),void e.preventDefault()):void 0};return d(e),function(){return h(e)}}),[E,k,d,h]),Object(i.useEffect)((function(){var e=Math.round(document.body.scrollWidth/v)%m;if(0!==e){var t=m-e+a;o(t%=m)}}),[m,v,a,o,e]),c.a.createElement(qo.a,{rootRef:t},c.a.createElement(O,{onMouseDown:function(e){for(var t=0,n=[w,C];t<n.length;t++){if((0,n[t])(e))return void e.preventDefault()}},onContextMenu:function(e){e.preventDefault()}},c.a.createElement(j,null,L),S))},Xc=n(208),Qc=n.n(Xc),$c=n(207),Zc=n.n($c),el=n(313),tl=n(406),nl=n(382),rl=n(396),al=Object(f.a)((function(e){return{root:{margin:e.spacing(1)}}}))(Mt.a),ol=Object(f.a)((function(e){return{root:{fontSize:"0.75rem"}}}))(el.a),il=Object(f.a)((function(e){return{root:{fontSize:"0.75rem"}}}))(Tt.a),cl=function(e){var t=Object(i.useState)({numberOfColumns:e.defaultSettings.numberOfColumnsPerPage.toString(),fontSize:e.defaultSettings.fontSize.toString(),columnMargin:e.defaultSettings.columnMargin.toString(),scrollType:e.defaultSettings.scrollType}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=function(e){if(""===e||Z(e))return Object(S.left)(new Error("A value is required"));var t=Number(e);return isNaN(t)?Object(S.left)(new Error("Only numbers are allowed")):t<=0?Object(S.left)(new Error("Only positive numbers are allowed")):Object(S.right)(t)},l=function(e){var t=o(e);if(Object(S.isLeft)(t))return t;var n=t.right,r=Math.floor(n);return n!==r?Object(S.left)(new Error("Only integers are allowed")):Object(S.right)(r)},u=function(){var e=l(r.numberOfColumns),t=o(r.fontSize),n=o(r.columnMargin);if(Object(S.isLeft)(e))return e;if(Object(S.isLeft)(t))return t;if(Object(S.isLeft)(n))return n;var a={numberOfColumnsPerPage:e.right,fontSize:t.right,columnMargin:n.right,scrollType:r.scrollType};return Object(S.right)(a)},d=[{label:"number of columns",field:"numberOfColumns",adornment:null,validationErrorPropsFn:function(e){return l(e)}},{label:"font size",field:"fontSize",adornment:"px",validationErrorPropsFn:function(e){return o(e)}},{label:"column margin",field:"columnMargin",adornment:"px",validationErrorPropsFn:function(e){return o(e)}}],h=function(e){var t,n,o=Object(j.a)({label:e.label,defaultValue:r[e.field],onChange:(n=e.field,function(e){var t=e.target.value,o=Object(j.a)({},r);o[n]=t,a(o)})},(t=e.validationErrorPropsFn(r[e.field]),{error:!!Object(S.isLeft)(t)||void 0,helperText:Object(S.isLeft)(t)?t.left.message:void 0}));return null!==e.adornment&&(o.InputProps={endAdornment:c.a.createElement(Ui.a,{position:"end"},e.adornment)}),c.a.createElement(al,null,c.a.createElement(bn.a,o))},m=c.a.createElement(al,null,c.a.createElement(Dc.a,{component:"fieldset"},c.a.createElement(ol,null,"scroll type"),c.a.createElement(tl.a,{value:r.scrollType,onChange:function(e,t){"page"===t||"column"===t?a(Object(j.a)(Object(j.a)({},r),{},{scrollType:t})):console.error("Display dialog - scroll type: Received an invalid radio value")}},c.a.createElement(nl.a,{value:"column",control:c.a.createElement(rl.a,{size:"small"}),label:c.a.createElement(il,null,"scroll by column")}),c.a.createElement(nl.a,{value:"page",control:c.a.createElement(rl.a,{size:"small"}),label:c.a.createElement(il,null,"scroll by page")}))));return c.a.createElement(Wt.a,{open:e.open,onClose:e.onClose},c.a.createElement(Kt.a,null,"Display Settings"),c.a.createElement(Ht.a,null,m,d.map((function(e){return h(e)}))),c.a.createElement(Yt.a,null,c.a.createElement(Vt.a,{onClick:e.onClose},"Cancel"),c.a.createElement(Vt.a,{disabled:Object(S.isLeft)(u()),onClick:function(){var t,n=u();Object(S.isLeft)(n)||null===(t=e.onSubmit)||void 0===t||t.call(e,{numberOfColumnsPerPage:n.right.numberOfColumnsPerPage,fontSize:n.right.fontSize,columnMargin:n.right.columnMargin,scrollType:n.right.scrollType})}},"OK")))},ll=Object(f.a)({root:{backgroundColor:"transparent"}})(wc.a),ul=Object(f.a)((function(e){return{root:{position:"fixed",top:e.spacing(3),right:e.spacing(2),"& .MuiSpeedDial-fab":{backgroundColor:"transparent",color:Br.a[500]}}}}))(Bc.a),sl=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=l[1];if(u){return c.a.createElement(cl,{open:!0,onClose:function(){return d(!1)},defaultSettings:e.displaySettings,onSubmit:function(t){var n;null===(n=e.onDisplaySettingsChange)||void 0===n||n.call(e,t),d(!1)}})}return c.a.createElement(ul,{icon:c.a.createElement(ll,null),direction:"down",open:r,onOpen:function(){a(!0)},onClose:function(){a(!1)},ariaLabel:"SpeedDial",FabProps:{color:"inherit"}},c.a.createElement(Sc.a,{icon:c.a.createElement(Zc.a,null),tooltipTitle:"Display Settings",onMouseDownCapture:function(){return d(!0)}}),c.a.createElement(Sc.a,{icon:c.a.createElement(Qc.a,null),tooltipTitle:"Exit Play Mode",onMouseDownCapture:function(t){var n;null===(n=e.onExit)||void 0===n||n.call(e),t.stopPropagation()}}))},dl=Object(Nt.a)({root:{backgroundColor:"transparent"}}),hl=function(e){var t=Object(i.useState)({numberOfColumnsPerPage:2,fontSize:14,columnMargin:20,scrollType:"column"}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=dl(),l=e.song.isUnsaved()?null:c.a.createElement(po,{song:e.song},(function(t,n,r){return c.a.createElement(Ha,{collapsedButtonClassName:o.root,timeSections:e.song.timeSections,tracklistLoad:t,onTrackListChanged:n,onRefresh:r})}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,null,c.a.createElement("title",null,""!==e.song.metadata.title?e.song.metadata.title:"New Song")),c.a.createElement(sl,{displaySettings:r,onDisplaySettingsChange:a,onExit:e.onEdit}),c.a.createElement(m.a,{theme:function(e){return Object(d.a)(Object(j.a)(Object(j.a)({},e),{},{typography:{fontFamily:e.typography.fontFamily,fontWeightRegular:e.typography.fontWeightRegular,fontSize:r.fontSize}}))}},c.a.createElement(Yc,{song:e.song,displaySettings:r})),l)},ml=function(e){var t=Object(v.h)(),n=e.path.withMode("edit"),r=e.path.withMode("play");return[c.a.createElement(v.c,{key:e.path.URL(),path:e.path.URL(),exact:!0},c.a.createElement(v.b,{to:n.URL()}),","),c.a.createElement(v.c,{key:n.URL(),path:n.URL()},c.a.createElement(Uc,{song:e.song,songDispatch:e.songDispatch,onPlay:function(){t.push(r.URL())}})),c.a.createElement(v.c,{key:r.URL(),path:r.URL()},c.a.createElement(hl,{song:e.song,onEdit:function(){t.push(n.URL())}}))]},fl=function(e,t){switch(t.type){case"replace-song":return t.newSong;case"set-header":if(void 0!==t.title){var n=t.title;e=e.update("metadata",(function(e){return Object(j.a)(Object(j.a)({},e),{},{title:n})}))}if(void 0!==t.composedBy){var r=t.composedBy;e=e.update("metadata",(function(e){return Object(j.a)(Object(j.a)({},e),{},{composedBy:r})}))}if(void 0!==t.performedBy){var a=t.performedBy;e=e.update("metadata",(function(e){return Object(j.a)(Object(j.a)({},e),{},{performedBy:a})}))}return e;case"set-last-saved-at":return e.set("lastSavedAt",t.lastSavedAt);case"add-line":return"beginning"===t.lineID?e.addBeginning(new je({})):e.addAfter(t.lineID,new je({}));case"remove-line":return e.removeElement(t.lineID);case"split-line":var o=e.splitLine(t.lineID,t.splitIndex),i=Object(s.a)(o,2),c=i[0];return i[1]?c:e;case"merge-lines":var l=e.mergeLineWithPrevious(t.latterLineID),u=Object(s.a)(l,2),d=u[0];return u[1]?d:e;case"batch-insert-lines":var h,m=e.get(t.insertLineID);return e=(h=e).addAfter.apply(h,[t.insertLineID].concat(Object(E.a)(t.copiedLines))),m.isEmpty()&&(e=e.removeElement(t.insertLineID)),e;case"batch-remove-lines":return e.removeMultipleElements(t.lineIDs);case"replace-line-lyrics":return e.replaceElement(t.lineID,(function(e){return e.replaceLyrics(t.newLyric)}));case"insert-overflow-lyrics":var f,p=t.overflowLyrics.map((function(e){return je.fromLyrics(e)}));return(f=e).addAfter.apply(f,[t.insertionLineID].concat(Object(E.a)(p)));case"set-chord":return e.replaceElement(t.lineID,(function(e){return e.setChord(t.blockID,t.newChord)}));case"split-block":return e.replaceElement(t.lineID,(function(e){return e.splitBlock(t.blockID,t.splitIndex)}));case"drag-and-drop-chord":var y=e.findLineWithBlock(t.sourceBlockID),v=e.findLineWithBlock(t.destinationBlockID),b=y===v,g=function(e){b&&(y=e,v=e)};return"move"===t.dropType&&g(y=y.replaceElement(t.sourceBlockID,(function(e){return e.set("chord","")}))),0!==t.splitIndex&&g(v=v.splitBlock(t.destinationBlockID,t.splitIndex)),g(v=v.replaceElement(t.destinationBlockID,(function(e){return e.set("chord",t.newChord)}))),b?g(y=y.normalizeBlocks()):(y=y.normalizeBlocks(),v=v.normalizeBlocks()),e=(e=e.replaceElement(y,(function(){return y}))).replaceElement(v,(function(){return v}));case"set-section":return e.updateCollection((function(e){return e.replace(t.lineID,(function(e){return e=function(e){if(void 0!==t.time){var n=e.setSectionTime(t.time);e=Object(s.a)(n,1)[0]}return e}(e=function(e){if(void 0!==t.label){var n=e.setSectionName(t.label);e=Object(s.a)(n,1)[0]}return e}(e))}))}));case"transpose":return e.transpose(t.originalKey,t.transposeKey)}},pl=function(e,t){var n=Object(i.useCallback)((function(e,n){var r=fl(e,n);return null===t||void 0===t||t(r,n),r}),[t]);return Object(i.useReducer)(n,e)},yl=n(209),vl=n.n(yl),bl=(yo=ml,function(e){var t=pl(e.song),n=Object(s.a)(t,2),r=n[0],a=n[1],o=(e.song,Object(Pi.a)(e,["song"])),i=Object(j.a)(Object(j.a)({},o),{},{song:r,songDispatch:a});return c.a.createElement(yo,i)}),gl=function(){var e=ft.fromJSONObject(zt);if(Object(S.isLeft)(e))return c.a.createElement(Ft,null);var t=e.right;return c.a.createElement(bl,{path:Bt,song:t})},kl=n(384),El=n(221),wl=function(){var e=El.a.apply(void 0,arguments),t=function(){throw console.error("----------------------BAD THING HAPPENED----------------------"),console.error("HTML5 Drag and Drop backend changed internally"),console.error("Drag and drop is probably broken"),console.error("----------------------BAD THING HAPPENED----------------------"),new Error("HTMLBackend changed and is now broken")},n=e;return void 0!==n.handleTopDragEnter&&null!==n.handleTopDragEnter||t(),n.__original__handleTopDragEnter=n.handleTopDragEnter,n.handleTopDragEnter=function(e){var t;null===(t=n.__original__handleTopDragEnter)||void 0===t||t.call(n,e),n.altKeyPressed=e.ctrlKey||e.metaKey},void 0!==n.handleTopDragOver&&null!==n.handleTopDragOver||t(),n.__original__handleTopDragOver=n.handleTopDragOver,n.handleTopDragOver=function(e){var t;null===(t=n.__original__handleTopDragOver)||void 0===t||t.call(n,e),n.altKeyPressed=e.ctrlKey||e.metaKey},e},Cl=function(e){return c.a.createElement(kl.a,{backend:wl},e.children)},Ol=(n(305),n(393)),jl=n(386),Ll=n(387),Bl=n(388),Sl=n(395),xl=(n(306),{Lydian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"#4",importance:"special"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"7",importance:"chordtone"}],Ionian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"7",importance:"chordtone"}],Mixolydian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Dorian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"special"},{interval:"b7",importance:"chordtone"}],Aeolian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Phrygian:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Locrian:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"b5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Dominant:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"#2",importance:"special"},{interval:"3",importance:"chordtone"},{interval:"#4",importance:"special"},{interval:"b6",importance:"special"},{interval:"b7",importance:"chordtone"}]}),Tl=function(e,t){var n=xl[t].map((function(t){return{note:nt[e][t.interval],interval:t.interval,importance:t.importance}}));return{center:e,name:t,notes:n}},Il=Le(xl,(function(e){return function(e){return Le(ze,(function(t){return Tl(t,e)}))}(e)})),Dl=function(){function e(t){Object(L.a)(this,e),this.scale=void 0,this.scale=t}return Object(B.a)(e,[{key:"name",value:function(){return"".concat(this.scale.center," ").concat(this.scale.name)}}]),e}(),zl=n(112),Al={highE:void 0,B:void 0,G:void 0,D:void 0,A:void 0,E:void 0},Fl=function(){function e(){Object(L.a)(this,e),this.noteMap=void 0,this.noteMap={highE:e.buildString("E"),B:e.buildString("B"),G:e.buildString("G"),D:e.buildString("D"),A:e.buildString("A"),E:e.buildString("E")}}return Object(B.a)(e,null,[{key:"buildString",value:function(t){for(var n=Le(ze,(function(){return[]})),r=Pe[t],a=0;a<=e.maxFrets;a++){var o,i=r.semitonesUp(De(a)),c=Object(R.a)(i);try{for(c.s();!(o=c.n()).done;){n[o.value].push(a)}}catch(l){c.e(l)}finally{c.f()}}return n}}]),Object(B.a)(e,[{key:"getPositions",value:function(e,t,n){var r,a=Le(Al,(function(){return[]}));for(r in a){var o,i=this.noteMap[r][e],c=Object(R.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;l<t||l>n||a[r].push({fret:l,note:e})}}catch(u){c.e(u)}finally{c.f()}}return a}}]),e}();Fl.maxFrets=24;var Rl=new Fl,Nl=function(e,t){switch(t){case"interval":return e.interval;case"note":return e.note}},Pl=Object(f.a)({root:{transform:"rotate(270deg)","& svg":{transform:"scale(0.85)"},"& .title":{fontFamily:"PoriChord"}}})(Mt.a),_l={highE:1,B:2,G:3,D:4,A:5,E:6},Ml=function(e,t){var n,r=[];for(n in e){var a,o=_l[n],i=e[n],c=Object(R.a)(i);try{var l=function(){var e=a.value,n=function(){var n=e.fret-t+1;if(n<=0)throw new Error("Invalid finger generated - got a zero or negative fretting");return n}(),i=function(){switch(e.importance){case"normal":return"black";case"root":return"#f44336";case"chordtone":return"#64b5f6";case"special":return"purple"}}(),c="root"===e.importance?zl.c.SQUARE:zl.c.CIRCLE;r.push([o,n,{text:e.labelText,color:i,shape:c}])};for(c.s();!(a=c.n()).done;)l()}catch(u){c.e(u)}finally{c.f()}}return r},Ul=function(e){var t=Object(i.useRef)(null),n=Object(i.useRef)(null);Object(i.useEffect)((function(){if(null!==t.current){null!==n.current&&n.current.remove();var r=e.startingFret+4,a=function(e,t,n,r){var a,o=Le(Al,(function(){return[]})),i=Object(R.a)(e.notes);try{var c=function(){var e=a.value,i=Rl.getPositions(e.note,t,n),c=void 0;for(c in i){var l,u=i[c].map((function(t){return{fret:t.fret,labelText:Nl(e,r),importance:e.importance}}));(l=o[c]).push.apply(l,Object(E.a)(u))}};for(i.s();!(a=i.n()).done;)c()}catch(l){i.e(l)}finally{i.f()}return o}(e.scale,e.startingFret,r,"note"),o=new zl.b(t.current);o.chord({barres:[],fingers:Ml(a,e.startingFret),title:new Dl(e.scale).name()}),o.configure({position:e.startingFret,fretLabelPosition:zl.a.LEFT}),o.draw(),n.current=o,t.current.querySelectorAll(".nut-text,.position").forEach((function(e){if(e instanceof SVGTextElement){var t=function(e){if(0!==e.x.baseVal.numberOfItems&&0!==e.y.baseVal.numberOfItems)return[e.x.baseVal.getItem(0).value,e.y.baseVal.getItem(0).value]}(e);void 0!==t&&setTimeout((function(){return e.setAttribute("transform","rotate(90,".concat(t[0],",").concat(t[1],")"))}))}}))}}),[e.scale,e.startingFret]);var r={ref:t};return c.a.createElement(Pl,r)},Wl=n(385),Kl=n(397),Vl=function(){var e,t,n=[];for(e in ze)for(t in xl)n.push({note:e,scaleName:t,label:"".concat(e," ").concat(t)});return n}(),Gl=function(e){var t=Object(Wl.a)({matchFrom:"start"});return c.a.createElement(Kl.a,{multiple:!0,options:Vl,filterOptions:t,getOptionLabel:function(e){return e.label},renderInput:function(e){return c.a.createElement(bn.a,Object.assign({},e,{variant:"outlined",label:"Scales"}))},value:e.scales,onChange:function(t,n){e.onSelection(n)}})};Ol.a.use([jl.a,Ll.a]);var Jl=Object(f.a)((function(e){return{root:{margin:e.spacing(2)}}}))(Mt.a),Hl=Object(f.a)({root:{display:"block"}})(xt.a),ql=function(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(5),l=Object(s.a)(o,2),u=l[0],d=l[1],m=Object(i.useRef)(null),f=Object(i.useRef)(null),p=c.a.createElement(bn.a,{label:"Starting Fret",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:u,onChange:function(e){var t=parseInt(e.target.value);t<=0||t>21||t%1===0&&d(t)}}),y=c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:9},c.a.createElement(Jl,null,c.a.createElement(Gl,{scales:r,onSelection:a}))),c.a.createElement(h.a,{item:!0,xs:3},c.a.createElement(Jl,null,p))),v=function(e){return c.a.createElement(Bl.a,null,c.a.createElement(Ul,{scale:Il[e.scaleName][e.note],startingFret:u}))},b=r.length>4,g=r.length>8,k=function(){var e=g?r.map(v):r.slice(0,4).map(v);return c.a.createElement(Sl.a,{slidesPerView:4,navigation:g,loop:g,onSlideChange:function(e){if(g&&null!==f.current){var t=(e.realIndex+4)%r.length;f.current.slideToLoop(t)}},onSwiper:function(e){m.current=e}},e)}(),E=function(){if(!b)return null;var e=g?r.map(v):r.slice(4,8).map(v);return c.a.createElement(Sl.a,{slidesPerView:4,loop:g,onSwiper:function(e){f.current=e},initialSlide:4},e)}();return c.a.createElement(Hl,null,y,k,E)},Yl=n(391),Xl=n(316),Ql=n(389),$l=n(392),Zl=n(364),eu=n(213),tu=n.n(eu),nu=n(215),ru=n.n(nu),au=n(214),ou=n.n(au),iu=n(217),cu=n.n(iu),lu=n(212),uu=n.n(lu),su=n(216),du=n.n(su),hu=n(219),mu=n.n(hu),fu=n(218),pu=n.n(fu),yu=function(e){var t=Object(i.useState)({state:"not-started"}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Ya(),l=c.a.useContext(mo),u=Object(v.h)(),d=function(t){return c.a.createElement(Wt.a,{open:e.open,onClose:e.onClose,fullWidth:!0},c.a.createElement(Kt.a,null,"Load Songs"),c.a.createElement(Ht.a,null,t))};if(null===l)return d(c.a.createElement(Tt.a,null,"You must be logged in to load a song graahhhhh *foams at mouth*"));var h,m=function(e,t){return e.lastSavedAt===t.lastSavedAt?0:null===e.lastSavedAt?1:null===t.lastSavedAt?-1:e.lastSavedAt<t.lastSavedAt?1:-1},f=function(){var e=Object(da.a)(sa.a.mark((function e(){var t,n,r;return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eo(l.userID,l.authToken);case 2:if(t=e.sent,!Object(S.isLeft)(t)){e.next=6;break}return a({state:"error",error:t.left}),e.abrupt("return");case 6:if(n=st.fromJSONList(t.right),!Object(S.isLeft)(n)){e.next=10;break}return a({state:"error",error:n.left}),e.abrupt("return");case 10:(r=n.right).sort(m),a({state:"loaded",item:r});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(t){var n=wt.withID(t.id),r=function(e,n){return""===e?null:c.a.createElement(Tt.a,{key:"".concat(t.id,"-").concat(n),display:"block",variant:"caption"},"".concat(n,": ").concat(e))},a=c.a.createElement(c.a.Fragment,null,r(t.metadata.performedBy,"Performed by"),r(t.metadata.composedBy,"Composed by"),null!==t.lastSavedAt&&c.a.createElement(Tt.a,{key:"".concat(t.id,"-lastSavedAt"),display:"block",variant:"caption"},"Last Saved At: ".concat(t.lastSavedAt.toLocaleString()))),o=""!==t.metadata.title?t.metadata.title:"(Untitled)";return c.a.createElement(c.a.Fragment,null,c.a.createElement(Xl.a,{key:t.id,button:!0,onClick:function(){var t;u.push(n.URL()),null===(t=e.onClose)||void 0===t||t.call(e)}},c.a.createElement(Ql.a,{primary:o,primaryTypographyProps:{key:"".concat(t.id,"-primary")},secondary:a,secondaryTypographyProps:{key:"".concat(t.id,"-seccondary")}})),c.a.createElement(qt.a,{key:"".concat(t.id,"-divider")}))};switch(r.state){case"not-started":return a({state:"loading"}),f(),c.a.createElement(c.a.Fragment,null);case"error":return o(r.error),d(c.a.createElement(so,null));case"loading":return d(c.a.createElement(Or.a,null));case"loaded":return d(0===(h=r.item).length?c.a.createElement(Tt.a,null,"You don't have any songs saved. GET TO IT"):c.a.createElement(Zl.a,null,h.map(p)))}},vu=n(319),bu=Object(f.a)((function(e){return{root:{color:e.palette.secondary.light}}}))(Tt.a),gu=Object(f.a)((function(e){return{root:{color:e.palette.primary.main}}}))(Tt.a),ku=function(){return c.a.createElement(Tt.a,null,"\xa0")},Eu=n(390),wu=n(210),Cu=n.n(wu),Ou=Object(Rt.a)((function(e){return{root:{color:e.palette.success.main}}}))(Cu.a),ju=Object(Rt.a)({root:{display:"inherit"}})(Eu.a),Lu=function(e){var t=pl(e.initialSong),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=l[1],h=e.expectedSong;return Object(i.useEffect)((function(){u||void 0!==h&&h.contentEquals(r)&&d(!0)}),[r,h,u,d]),c.a.createElement(ju,{badgeContent:c.a.createElement(Ou,null),invisible:!u},c.a.createElement(xt.a,{elevation:1},c.a.createElement(sc,{song:r,songDispatch:a})))},Bu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Adding Chords"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Add a chord by hovering above a word, and clicking the outlined box. Let's add"," ",c.a.createElement(gu,{display:"inline"},"B7")," back above"," ",c.a.createElement(bu,{display:"inline"},"appear"),"."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Su=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Every time you are near")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Adding New Lines"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"You can add more lines by hovering below (or above) and existing line, and clicking the gray line or the add icon to the right."),c.a.createElement(Tt.a,null,"Let's add a line, and change the lyrics to:"),c.a.createElement(bu,null,"Why do birds suddenly ap-pear?"),c.a.createElement(bu,null,"Every time you are near"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},xu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"",lyric:new re("appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly")}),new ce({chord:"F#7",lyric:new re(" ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]})]}),n=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly")}),new ce({chord:"F#7",lyric:new re(" ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Chord Positioning"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Sometimes you want to emphasize a chord landing on a specific syllable or between words. Without the overhead of standard notation, we can do this by breaking up lyrics and annotating spaces."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Let's change the lyrics to:"),c.a.createElement(bu,null,"Why do birds suddenly ap-pear?"),c.a.createElement(Tt.a,null,"And add a tab after the"," ",c.a.createElement(bu,{display:"inline"},"?")),c.a.createElement(Tt.a,null,"Then add the chord"," ",c.a.createElement(gu,{display:"inline"},"F#7")," to the space before"," ",c.a.createElement(bu,{display:"inline"},"ap-")),c.a.createElement(Tt.a,null,"Add the chord"," ",c.a.createElement(gu,{display:"inline"},"B7sus4")," to"," ",c.a.createElement(bu,{display:"inline"},"pear")),c.a.createElement(Tt.a,null,"Add the chord"," ",c.a.createElement(gu,{display:"inline"},"B7")," to the tabbed space after"," "),c.a.createElement(Tt.a,null,"It should look like this:"),c.a.createElement(Lu,{initialSong:t}),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:n}))},Tu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"",lyric:new re("But I'm a ")}),new ce({chord:"G",lyric:new re("creep, I'm a ")}),new ce({chord:"B7",lyric:new re("weirdo")})]}),new je({blocks:[new ce({chord:"",lyric:new re("What the hell am doing ")}),new ce({chord:"C",lyric:new re("here? I don't be-")}),new ce({chord:"Cm",lyric:new re("long here")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I don't care if it ")}),new ce({chord:"G",lyric:new re("hurts, I wanna have con-")}),new ce({chord:"B7",lyric:new re("trol")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I want a perfect ")}),new ce({chord:"C",lyric:new re("body, I want a perfect ")}),new ce({chord:"Cm",lyric:new re("soul")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I want you to ")}),new ce({chord:"G",lyric:new re("notice when I'm not a-")}),new ce({chord:"B7",lyric:new re("round")})]}),new je({blocks:[new ce({chord:"",lyric:new re("You're so fucking ")}),new ce({chord:"C",lyric:new re("special, I wish I was ")}),new ce({chord:"Cm",lyric:new re("special")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"",lyric:new re("But I'm a ")}),new ce({chord:"G",lyric:new re("creep, I'm a ")}),new ce({chord:"B7",lyric:new re("weirdo")})]}),new je({blocks:[new ce({chord:"",lyric:new re("What the hell am doing ")}),new ce({chord:"C",lyric:new re("here? I don't be-")}),new ce({chord:"Cm",lyric:new re("long here")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I don't care if it ")}),new ce({chord:"G",lyric:new re("hurts, I wanna have con-")}),new ce({chord:"B7",lyric:new re("trol")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I want a perfect ")}),new ce({chord:"C",lyric:new re("body, I want a perfect ")}),new ce({chord:"Cm",lyric:new re("soul")})]}),new je({blocks:[new ce({chord:"",lyric:new re("I want you to ")}),new ce({chord:"G",lyric:new re("notice when I'm not a-")}),new ce({chord:"B7",lyric:new re("round")})]}),new je({blocks:[new ce({chord:"",lyric:new re("You're so fucking ")}),new ce({chord:"C",lyric:new re("special, I wish I was ")}),new ce({chord:"Cm",lyric:new re("special")})]}),new je({blocks:[new ce({chord:"",lyric:new re("But I'm a ")}),new ce({chord:"G",lyric:new re("creep, I'm a ")}),new ce({chord:"B7",lyric:new re("weirdo")})]}),new je({blocks:[new ce({chord:"",lyric:new re("What the hell am doing ")}),new ce({chord:"C",lyric:new re("here? I don't be-")}),new ce({chord:"Cm",lyric:new re("long here")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Copying and Pasting Lines"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Sometimes you want to just repeat what's on the page without entering it all over again - choruses with the same lyrics, repeating instrumental sections. You can do this by copying and pasting entire lines that you've already written out."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"The easiest way to copy is to drag down from some empty space on the left of the line you wish to start copying from, then pressing (CTRL or CMD) + C, or right click ","->"," copy."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"To paste, click to edit a lyric line, and press (CTRL or CMD) + V, or right click ","->"," paste."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Note that there's no partial copy - if any part of the line is selected during the copy, the whole line is copied."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"If you have trouble selecting a line, try dragging your cursor starting further left and above the line."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Let's try copying and pasting the repeated chorus:"),c.a.createElement(bu,{variantMapping:{body1:"div"}},"But I'm a creep, I'm a weirdo"),c.a.createElement(bu,{variantMapping:{body1:"div"}},"What the hell am I doing here? I don't belong here."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Copy those two lines, add a new line at the bottom, and paste it there."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Iu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds ")}),new ce({chord:"B7",lyric:new re("suddenly appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Dragging and Dropping Chords"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"It's also possible to drag and drop chords onto different parts of the line when its initial placement wasn't quite correct. Just drag a chord and drop it to the space above or on another lyric."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"If you hold CTRL or CMD while dragging and dropping, the chord will be copied instead of moved over."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Let's move the"," ",c.a.createElement(gu,{display:"inline"},"B7")," above"," ",c.a.createElement(bu,{display:"inline"},"suddenly")," ","to above"," ",c.a.createElement(bu,{display:"inline"},"appear"),"."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Du=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"Bm",lyric:new re("appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Editing Chords"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Click on a chord to change it, then press enter to commit your changes. Let's change the chord above"," ",c.a.createElement(bu,{display:"inline"},"appear")," ","from ",c.a.createElement(gu,{display:"inline"},"Bm")," to"," ",c.a.createElement(gu,{display:"inline"},"B7"),"."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},zu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why oh why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Editing Lyrics"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"You can edit the lyrics by clicking anywhere along the lyrics. Finish editing lyrics by pressing enter or clicking outside the text edit box. Chord Paper will move chords along with lyrics when you edit them. Let's change the lyrics to:"),c.a.createElement(bu,null,"Why oh why do birds suddenly appear?"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Au=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"Bm",lyric:new re("\ue200")}),new ce({chord:"A",lyric:new re("\ue200")}),new ce({chord:"E",lyric:new re("\ue400")})]})]}),t=new ft({}),n=new ft({lines:[new je({blocks:[new ce({chord:"Bm",lyric:new re("\ue200")}),new ce({chord:"A",lyric:new re("\ue200")}),new ce({chord:"E",lyric:new re("\ue400")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Instrumental Sections"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"In addition to putting chords over lyrics, you can also put them in the spaces between lyrics. When there are no lyrics around the harmony, you can use tabs to create spacing in the lyrics for placing chords."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"You can do this by hitting"," ",c.a.createElement(bu,{display:"inline"},"tab")," when editting lyrics, for a normal sized tab, or"," ",c.a.createElement(bu,{display:"inline"},"SHIFT + space")," ","for a small sized tab, or"," ",c.a.createElement(bu,{display:"inline"},"SHIFT + tab")," ","for a large sized tab."),c.a.createElement(Lu,{initialSong:e}),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Let's replicate the example from above using"," ",c.a.createElement(bu,{display:"inline"},"tab"),"s. Start by editing the lyrics. Insert two normal sized tabs with the ",c.a.createElement(bu,{display:"inline"},"tab")," ","key, and a large sized tab using"," ",c.a.createElement(bu,{display:"inline"},"SHIFT + tab")," ","key. Then add"," ",c.a.createElement(gu,{display:"inline"},"Bm"),","," ",c.a.createElement(gu,{display:"inline"},"A"),","," ",c.a.createElement(gu,{display:"inline"},"E"),","," ","respectively to each tab."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:t,expectedSong:n}))},Fu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds")})]}),new je({blocks:[new ce({chord:"",lyric:new re("suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Merging Lines"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Sometimes the lyrics that we paste in is not the division we want. Let's merge the two lines. Click into the second line, move the cursor to the beginning of the line, and press"),c.a.createElement(Tt.a,null,"(CTRL+Backspace : Windows | CMD+Backspace : Mac)"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Ru=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]}),new je({})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Every time you are near")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Just like me, they long to be")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Close to you")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Pasting Lyrics"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"It would be annoying to have to type out the lyrics. But we can paste it in! Copy these lyrics, click into the second line, and paste:"),c.a.createElement(bu,{variantMapping:{body1:"div"}},"Every time you are near"),c.a.createElement(bu,{variantMapping:{body1:"div"}},"Just like me, they long to be"),c.a.createElement(bu,{variantMapping:{body1:"div"}},"Close to you"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Nu=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ")}),new ce({chord:"B7",lyric:new re("appear?")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly appear?")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Removing Chords"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Simply remove all the chord text when editing to clear the chord. Let's remove the"," ",c.a.createElement(gu,{display:"inline"},"B7"),"."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Pu=Object(Rt.a)({root:{color:Lo.a[300]}})(So.a),_u=function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Every time you are near")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Removing Lines"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Similarly, you can remove a line by hovering over the line, and clicking the ",c.a.createElement(Pu,null)," icon to the right. Let's remove the second line of lyrics."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))},Mu=function(){return c.a.createElement(Tt.a,{variant:"h5"},"Learning Chord Paper")},Uu=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,null,"Chord Paper aims to be as intuitive and handy as possible, but there could still be features that aren't obvious as we work out the kinks. Let's walk through the basics together by making some changes to chords and lyrics!"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Since Chord Paper is still in early stages, some of these could change in the future."))},Wu=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Mu,null),c.a.createElement(ku,null),c.a.createElement(Uu,null))},Ku=Object(Rt.a)(Ni)(Tt.a),Vu=[{title:"Starting",route:"/learn/start",component:Wu},{title:"Edit a Chord",route:"/learn/edit_chord",component:Du},{title:"Remove a Chord",route:"/learn/remove_chord",component:Nu},{title:"Add a Chord",route:"/learn/add_chord",component:Bu},{title:"Drag and Drop Chords",route:"/learn/drag_and_drop_chord",component:Iu},{title:"Edit Lyrics",route:"/learn/edit_lyrics",component:zu},{title:"Instrumentals",route:"/learn/instrumentals",component:Au},{title:"Chord Positioning",route:"/learn/chord_positioning",component:xu},{title:"Adding New Line",route:"/learn/add_line",component:Su},{title:"Removing a Line",route:"/learn/remove_line",component:_u},{title:"Pasting Lyrics",route:"/learn/paste_lyrics",component:Ru},{title:"Merging Lines",route:"/learn/merge_lines",component:Fu},{title:"Splitting Lines",route:"/learn/split_lines",component:function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear? Every ")}),new ce({chord:"B7",lyric:new re("time you are near")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear? ")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Every ")}),new ce({chord:"B7",lyric:new re("time you are near")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Splitting Lines"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Similarly, we can split lines that may be too long for our chart into two lines. Move the cursor to where you want the line to split, and press"),c.a.createElement(Tt.a,null,"(CTRL+Enter : Windows | CMD+Enter : Mac)"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Right now, chords won't move to the subsequent line - only lyrics will. This can be worked around by dragging and dropping chords after until the feature is cleaned up."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Let's break the one long line of lyrics up, so that it looks like:"),c.a.createElement(bu,null,"Why do birds suddenly appear?"),c.a.createElement(bu,null,"Every time you are near"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))}},{title:"Copying and Pasting Lines",route:"/learn/copy_and_paste",component:Tu},{title:"Labels",route:"/learn/labels",component:function(){var e=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})]}),new je({blocks:[new ce({chord:"",lyric:new re("Every time you are near")})]})]}),t=new ft({lines:[new je({blocks:[new ce({chord:"C^",lyric:new re("Why do birds suddenly ap-")}),new ce({chord:"B7sus4",lyric:new re("pear?")}),new ce({chord:"B7",lyric:new re("\ue200")})],section:{type:"label",name:"Verse"}}),new je({blocks:[new ce({chord:"",lyric:new re("Every time you are near")})]})]});return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Labels"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,'It\'s common to label sections to navigate easily within the song. For example, some common labels are "Verse", "Chorus", "Bridge", or more simplified markers like "A", "B", etc.'),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Add a label to a line by hovering over the line, and then clicking the ",c.a.createElement(To.a,null)," icon to insert a label for that line. Let's add"," ",c.a.createElement(Ku,{display:"inline"},"Verse")," to the first line."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try it!"),c.a.createElement(Lu,{initialSong:e,expectedSong:t}))}},{title:"Play Mode",route:"/learn/play_mode",component:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Play Mode"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Play mode is where you focus on playing the song rather than writing or transcribing it. The chords and lyrics are laid out for ease of reading while playing through."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"To go forward a page, left click anywhere on the page, or tap any button except the buttons that go back a page."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"To go back a page, right click anywhere on the page, or tap left, up, or backspace."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"Try this by going into your own song or the demo song, hovering over the menu icon on the bottom right, and clicking the"," ",c.a.createElement(lr.a,null)," icon."))}},{title:"Saving and Loading",route:"/learn/saving",component:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{variant:"h6"},"Saving and Loading"),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"You can save and load your songs if you have logged in. When you want to save your song to the cloud, hover to the bottom right menu and click ",c.a.createElement(yc.a,null)," to commit the song. After the song is saved once, it will continue to save any changes automatically."),c.a.createElement(ku,null),c.a.createElement(Tt.a,null,"If you don't want to sign in or save your songs to the cloud, I get it. You can also reveal (offline) Save and Load menu icons in the bottom right menu by entering the Konami code to save and load the files striaght to your computer."))}}],Gu=Object(f.a)({root:{color:"white"}})(lr.a),Ju=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),marginBottom:e.spacing(5),padding:e.spacing(5),minHeight:e.spacing(46),width:e.spacing(92),position:"relative"}}}))(xt.a),Hu=Object(f.a)((function(e){return{root:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}))(vu.a),qu=function(e){var t=function(t){return t.route===e.route},n=Vu.find(t);if(void 0===n)return c.a.createElement(Ft,null);var r=Vu.findIndex(t),a=null;if(r<Vu.length-1){var o=Vu[r+1];a=c.a.createElement(b.b,{to:o.route},c.a.createElement(Hu,{color:"primary"},c.a.createElement(Gu,null)))}return c.a.createElement(Ju,null,c.a.createElement(n.component,null),a)},Yu=n(211),Xu=n.n(Yu),Qu=Object(f.a)({root:{width:"100%",cursor:"pointer"}})(xt.a),$u=Object(f.a)((function(e){return{root:{margin:e.spacing(2),color:Br.a[600]}}}))(Tt.a),Zu=Object(Nt.a)({root:{display:"inline-block",objectFit:"contain"}}),es=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(p.b)().enqueueSnackbar,l=Ya(),u=Zu(),d=c.a.useContext(mo),m=function(e){return null===e};if(Object(i.useEffect)((function(){r||(void 0!==window.gapi?a(!0):o("gapi is not loaded, working offline only",{variant:"error"}))}),[r,o]),Object(i.useEffect)((function(){r&&gapi.load("auth2",(function(){var t=function(){var t=Object(da.a)(sa.a.mark((function t(n){var r,a,i;return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.get().getAuthResponse().id_token,t.next=3,Qa(r);case 3:if(a=t.sent,!Object(qa.isLeft)(a)){t.next=8;break}return t.next=7,l(a.left);case 7:return t.abrupt("return");case 8:if(c=a.right,u=n,null!==(i=fo(c)?new ho(u,c.id,c.name):null)){t.next=13;break}return console.error("JSON payload is not a user",a.right),o("Failed to login to backend. Check console for more error details",{variant:"error"}),t.abrupt("return");case 13:e.onUserChanged(i);case 14:case"end":return t.stop()}var c,u}),t)})));return function(e){return t.apply(this,arguments)}}();if(m(d)){gapi.auth2.init({client_id:"650853277550-ta69qbfcvdl6tb5ogtnh2d07ae9rcdlf.apps.googleusercontent.com",scope:"profile email"}).then((function(e){e.attachClickHandler(document.getElementById("google-sign-in"),{},(function(){return t(e.currentUser)}),(function(e){console.error("Failed to login to Google",e)})),e.isSignedIn.get()&&t(e.currentUser)}))}}))}),[o,d,e,r,l]),!r)return c.a.createElement("div",null);return c.a.createElement(Qu,{id:"google-sign-in",classes:e.classes},c.a.createElement(h.a,{container:!0,alignItems:"center",justify:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement("img",{src:Xu.a,alt:"Google Signin",className:u.root})),c.a.createElement(h.a,{item:!0},c.a.createElement($u,{variant:"h6",display:"inline"},function(e){return m(e)?"Sign In":null===e.name?"You Logged In But Who Are You???":e.name}(d)))))},ts=Object(f.a)({root:{cursor:"pointer"}}),ns=ts(uu.a),rs=ts(tu.a),as=Object(f.a)({root:{display:"flex",flexDirection:"column"}})(Yl.a),os=Object(f.a)({root:{maxWidth:"none"}})(h.a),is=Object(f.a)((function(e){return{root:{padding:e.spacing(3)}}}))(h.a),cs=Object(f.a)({root:{color:Br.a[600]}})(Tt.a),ls=Object(f.a)({root:{minWidth:"24px",height:"100vh"}})(xt.a),us=Object(f.a)({root:{height:"100%",width:"100%"}})(h.a),ss=Object(Nt.a)({root:{flexGrow:1}}),ds=function(e){var t=c.a.useContext(mo),n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],l=Object(i.useState)(!1),u=Object(s.a)(l,2),d=u[0],m=u[1],f=Object(i.useState)(!1),p=Object(s.a)(f,2),y=p[0],v=p[1],g=ss(),k={variant:"h6"},E=function(){v(!y)},w={textDecoration:"none",color:"inherit"},C=c.a.createElement(as,{variant:"persistent",open:!a,anchor:"left"},c.a.createElement(ls,null,c.a.createElement(us,{container:!0,direction:"column",alignContent:"center"},c.a.createElement(os,{item:!0,xs:1}),c.a.createElement(os,{item:!0,xs:1},c.a.createElement(ns,{onClick:function(){return o(!0)}})),c.a.createElement(os,{item:!0,xs:10})))),O=c.a.createElement(as,{variant:"persistent",open:a,anchor:"left"},c.a.createElement(is,{container:!0,alignItems:"center",justify:"space-between"},c.a.createElement(h.a,{item:!0},c.a.createElement(b.b,{to:"/",style:w,"data-testid":"Menu-TitleButton"},c.a.createElement(cs,{variant:"h5",display:"inline"},"Chord Paper"))),c.a.createElement(h.a,{item:!0},c.a.createElement(rs,{onClick:function(){return o(!1)}}))),c.a.createElement(qt.a,null),c.a.createElement(Zl.a,null,c.a.createElement(b.b,{key:wt.URL(),to:wt.URL(),style:w,"data-testid":"Menu-HomeButton"},c.a.createElement(Xl.a,{key:"New Song",button:!0},c.a.createElement($l.a,null,c.a.createElement(du.a,null)),c.a.createElement(Ql.a,{primary:"New Song",primaryTypographyProps:k}))),null!==t&&c.a.createElement(Xl.a,{key:"Load Song",button:!0,onClick:function(e){return m(!0)}},c.a.createElement($l.a,null,c.a.createElement(cu.a,null)),c.a.createElement(Ql.a,{primary:"Load Song",primaryTypographyProps:k})),c.a.createElement(b.b,{key:Bt.URL(),to:Bt.URL(),style:w,"data-testid":"Menu-DemoButton"},c.a.createElement(Xl.a,{key:"Demo",button:!0},c.a.createElement($l.a,null,c.a.createElement(pu.a,null)),c.a.createElement(Ql.a,{primary:"Demo",primaryTypographyProps:k}))),function(){var e=Vu.map((function(e){return{title:e.title,route:e.route}})).map((function(e){return c.a.createElement(b.b,{key:e.route,to:e.route,style:w},c.a.createElement(Xl.a,{button:!0},c.a.createElement(Ql.a,{inset:!0,primary:e.title})))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(Xl.a,{key:"Learn",button:!0,onClick:E},c.a.createElement($l.a,null,c.a.createElement(ou.a,null)),c.a.createElement(Ql.a,{primary:"Learn",primaryTypographyProps:k}),y?c.a.createElement(ru.a,null):c.a.createElement(Cr.a,null)),c.a.createElement(jr.a,{in:y,timeout:"auto"},c.a.createElement(Zl.a,null,e)))}(),c.a.createElement(b.b,{key:"/about",to:"/about",style:w,"data-testid":"Menu-AboutButton"},c.a.createElement(Xl.a,{key:"About",button:!0},c.a.createElement($l.a,null,c.a.createElement(mu.a,null)),c.a.createElement(Ql.a,{primary:"About",primaryTypographyProps:k})))),c.a.createElement("div",{className:g.root}),c.a.createElement(es,{onUserChanged:e.onUserChanged}));return c.a.createElement(c.a.Fragment,null,C,O,d&&c.a.createElement(yu,{open:!0,onClose:function(){return m(!1)}}))},hs=function(e){var t=Ya(),n=Object(i.useState)({state:"not-started"}),r=Object(s.a)(n,2),a=r[0],o=r[1],l=function(){var t=Object(da.a)(sa.a.mark((function t(){var n,r;return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$a(e.id);case 2:if(n=t.sent,!Object(qa.isLeft)(n)){t.next=6;break}return o({state:"error",error:n.left}),t.abrupt("return");case 6:if(r=ft.fromJSONObject(n.right),!Object(qa.isLeft)(r)){t.next=10;break}return o({state:"error",error:"Failed to deserialize payload to song"}),t.abrupt("return");case 10:o({state:"loaded",item:r.right});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();switch(a.state){case"not-started":return o({state:"loading"}),l(),c.a.createElement(c.a.Fragment,null);case"error":return t(a.error),c.a.createElement(so,null);case"loading":return c.a.createElement(Ut.a,{size:200,thickness:1});case"loaded":return e.children(a.item)}},ms=function(e){var t=Object(v.j)().id;return c.a.createElement(hs,{key:t,id:t},e.children)},fs=Object(f.a)((function(e){return{root:{position:"absolute",top:0,right:0,padding:e.spacing(1),color:Br.a[600]}}}))(Tt.a),ps=function(){var e=null!=="0.7.0.8.gf4e0c29"?"0.7.0.8.gf4e0c29":"dev-build";return c.a.createElement(fs,{variant:"subtitle2"},e)},ys=Object(d.a)({palette:{primary:{main:"#4fc3f7",light:"#8bf6ff",dark:"#0093c4",contrastText:"#000000"},secondary:{main:"#844ffc",light:"#bb7eff",dark:"#4a1fc8",contrastText:"#ffffff"},success:{main:"#00c853",light:"#5efc82",dark:"#009624",contrastText:"#000000"}},typography:{fontFamily:"Merriweather",fontWeightRegular:300}}),vs=Object(f.a)((function(e){return{variantSuccess:{backgroundColor:e.palette.success.main}}}))(p.a),bs=Object(f.a)({root:{backgroundImage:"url(".concat(k.a,")"),minHeight:"100vh"}})(h.a),gs=function(e){return function(t){var n=function(){var e=Object(i.useRef)(!1);return[Object(i.useCallback)((function(t,n){"set-last-saved-at"!==n.type&&(e.current=!0)}),[]),function(t,n){var r=c.a.useContext(mo),a=Ya(),o=Object(p.b)().enqueueSnackbar,l=Object(v.h)(),u=Object(i.useCallback)((function(t){return e.current&&!t.isUnsaved()&&t.isOwner(r)}),[r]);Object(i.useEffect)((function(){var i=function(){var t=Object(da.a)(sa.a.mark((function t(n){return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=4;break}o(n,{variant:"error"}),t.next=6;break;case 4:return t.next=6,a(n);case 6:e.current=!0;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(da.a)(sa.a.mark((function t(r,a){var o,c;return sa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,no(a,r.authToken);case 2:if(o=t.sent,!Object(S.isLeft)(o)){t.next=7;break}return t.next=6,i(o.left);case 6:return t.abrupt("return");case 7:if(e.current=!1,c=ft.fromJSONObject(o.right),!Object(S.isLeft)(c)){t.next=13;break}return t.next=12,i("Song results from backend can't be deserialized");case 12:return t.abrupt("return");case 13:n({type:"set-last-saved-at",lastSavedAt:c.right.lastSavedAt});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var e=Object(da.a)(sa.a.mark((function e(t){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r){e.next=2;break}return e.abrupt("return");case 2:if(u(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,vl()();case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,c(r,t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=setInterval((function(){return l(t)}),1e4);return function(){return clearInterval(s)}}),[t,n,r,o,a,u]),Object(i.useEffect)((function(){var e=function(e){u(t)&&(e.preventDefault(),e.returnValue=!0)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[t,u]);return c.a.createElement(v.a,{message:function(){return!u(t)||!jt.isEditMode(l.location.pathname)||"This page is asking you to confirm that you want to leave - data you have entered may not be saved."}})}]}(),r=Object(s.a)(n,2),a=r[0],o=r[1],l=pl(t.song,a),u=Object(s.a)(l,2),d=u[0],h=u[1],m=o(d,h),f=(t.song,Object(Pi.a)(t,["song"])),y=Object(j.a)(Object(j.a)({},f),{},{song:d,songDispatch:h});return c.a.createElement(c.a.Fragment,null,m,c.a.createElement(e,y))}}(ml),ks=function(){var e,t=Object(i.useState)(null),n=Object(s.a)(t,2),r=n[0],a=n[1],o=function(e){return a(e)},l=Object(v.i)(),u=wt.withID(":id"),d=jt.isPlayMode(l.pathname)||St.isPlayMode(l.pathname)||l.pathname===kt.URL(),m=function(e){return c.a.createElement(c.a.Fragment,null,!d&&c.a.createElement(ds,{onUserChanged:o}),c.a.createElement(bs,{container:!0},c.a.createElement(h.a,{item:!0,container:!0,justify:"center"},e)),c.a.createElement(ps,null))},f=c.a.createElement(v.e,null,c.a.createElement(v.b,{from:yt.URL(),to:Ot.URL(),exact:!0}),c.a.createElement(v.c,{key:Ot.URL(),path:Ot.URL()},m(c.a.createElement(gs,{song:new ft({}),path:Ot}))),c.a.createElement(v.c,{key:u.URL(),path:u.URL()},m(c.a.createElement(ms,null,(function(e){return c.a.createElement(gs,{song:e,path:u.parent().withID(e.id)})})))),c.a.createElement(v.c,{key:Bt.URL(),path:Bt.URL()},m(c.a.createElement(gl,null))),(e=m,Vu.map((function(t){return c.a.createElement(v.c,{key:t.route,exact:!0,path:t.route},e(c.a.createElement(qu,{route:t.route})))}))),c.a.createElement(v.c,{key:bt.URL(),path:bt.URL(),exact:!0},m(c.a.createElement(Dt,null))),c.a.createElement(v.c,{key:kt.URL(),path:kt.URL(),exact:!0},c.a.createElement(ql,null)),c.a.createElement(v.b,{to:yt.URL()}));return c.a.createElement(mo.Provider,{value:r},f)};var Es=function(){return c.a.createElement(y.b,null,c.a.createElement(m.a,{theme:ys},c.a.createElement(y.a,{titleTemplate:"%s - Chord Paper",defaultTitle:"Chord Paper"}),c.a.createElement(vs,null,c.a.createElement(b.a,null,c.a.createElement(Cl,null,c.a.createElement(Xn,null,c.a.createElement(ks,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Es,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[248,1,2]]]);
//# sourceMappingURL=main.eb46800d.chunk.js.map