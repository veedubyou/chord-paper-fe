{"version":3,"sources":["assets/img/symphony.png","components/TextInput.tsx","common/Whitespace.ts","components/ChordSymbol.tsx","components/Block.tsx","common/ChordModel/Collection.ts","common/LyricTokenizer.ts","common/ChordModel/ChordBlock.ts","components/ChordEditLine.tsx","components/Line.tsx","common/ChordModel/ChordLinePatcher.ts","common/ChordModel/ChordLine.ts","components/NewLine.tsx","components/ChordPaperBody.tsx","components/EditableTypography.tsx","components/Header.tsx","common/ChordModel/ChordSong.ts","components/ChordPaperMenu.tsx","components/ChordPaper.tsx","NeverGonnaGiveYouUp.ts","components/ErrorPage.tsx","components/tutorial/Playground.tsx","components/tutorial/Common.tsx","components/tutorial/Start.tsx","components/tutorial/Tutorial.tsx","components/tutorial/EditChord.tsx","components/tutorial/RemoveChord.tsx","components/tutorial/AddChord.tsx","components/tutorial/EditLyrics.tsx","components/tutorial/ChordPositioning.tsx","components/tutorial/AddLine.tsx","components/tutorial/RemoveLine.tsx","components/tutorial/PasteLyrics.tsx","components/tutorial/MergeLine.tsx","components/SideMenu.tsx","components/about/About.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","TextInput","props","useState","children","value","setValue","inputRef","React","createRef","theme","useTheme","finish","newValue","onFinish","TextField","autoFocus","variant","inputProps","undefined","typography","style","padding","fontSize","opacity","background","grey","width","browserInputProps","onBlur","onChange","event","target","onKeyDown","key","specialBackspace","metaKey","ctrlKey","selectionAtBeginning","current","selectionStart","selectionEnd","onSpecialBackspace","onPaste","payload","clipboardData","getData","linesOfText","split","length","onPasteOverflow","preventDefault","pasteContent","beforeSelectionStr","afterSelectionStr","slice","newPasteLines","composeMultilinePaste","fullWidth","data-testid","inflateIfEmpty","test","ChordTypography","withStyles","root","whiteSpace","cursor","fontFamily","Typography","ChordSymbol","display","chord","endsWith","formattedChord","chordOutline","borderStyle","borderColor","palette","primary","main","borderRadius","borderWidth","ChordInsertOutline","color","userSelect","position","left","top","transform","UnstyledTypography","HighlightableBox","dark","Box","Block","editing","setEditing","lyricTokens","chordBlock","chordRow","clickHandler","tokenIndex","onBlockSplit","stopPropagation","lyricBlocks","map","lyricToken","index","lyric","blockHasChord","typographyProps","lyricBlock","hiddenTarget","onClick","newChord","onChordChange","Grid","container","direction","component","item","stringifyIgnoreID","obj","JSON","stringify","Collection","elements","this","id","findIndex","elem","Error","idable","indexOfBefore","indexOf","newElem","splice","tokenize","lineOfLyrics","matches","match","ChordBlockValidator","iots","type","ChordBlock","shortid","generate","splitIndex","tokens","prevBlockLyricTokens","thisBlockLyricTokens","prevBlock","join","other","validatedFields","jsonStr","result","parseJSON","isLeft","jsonObj","right","validationResult","decode","iconColorStyle","red","BackspaceIcon","UnstyledBackspaceIcon","Button","contained","backgroundColor","UnstyledButton","Tooltip","tooltip","margin","UnstyledTooltip","ChordEditLine","chordBlocks","chordLine","chordChangeHandler","setChord","onChangeLine","blockSplitHandler","splitBlock","blocks","placement","title","onRemove","interactive","onEdit","Line","removed","setRemoved","startEdit","finishEdit","newLyrics","replaceLyrics","addHandler","onAddLine","removeHandler","onRemoveLine","setTimeout","pasteOverflowHandler","overflowContent","specialBackspaceHandler","onMergeWithPreviousLine","nonEditableLine","onAdd","lyrics","bottom","editLyricsInput","yeetDirection","Slide","in","timeout","borderBottom","differ","dmp","DiffMatchPatch","diffTimeout","matchThreshold","ChordLineIterator","currBlockIndex","currCharIndex","blockBuffer","prependLyrics","currentBlock","charAt","skipChar","currentChar","nextChar","insertChar","atBlockBoundary","prevBlockIndex","deleteChar","i","normalizeBlocks","replaceChordLineLyrics","diffs","diff_main","diff_cleanupSemanticLossless","iterator","diff","diffOperation","diffChar","DiffOperation","DIFF_EQUAL","skip","DIFF_INSERT","insert","DIFF_DELETE","delete","newBlocks","block","push","removeOrphanedBlocksWithNoChords","lastIndex","addSpacesToOrphanedBlocks","ChordLineValidator","ChordLine","newPrevBlock","clone","reduce","isEqual","otherBlock","contentEquals","fromValidatedFields","HighlightableGrid","Divider","UnstyledDivider","AddCircleOutlineIcon","secondary","light","UnstyledAddCircleOutlineIcon","NewLine","justify","minHeight","spacing","Paper","UnstyledPaper","ChordPaperBody","addLineToTop","newLine","song","addBeginning","notifySongChanged","addLine","addAfter","removeLine","remove","changeLine","pasteOverflowFromLine","newChordLines","newLyricLine","fromLyrics","mergeWithPreviousLine","mergeLineWithPrevious","onSongChanged","elevation","xs","lines","chordLines","flatMap","line","firstNewLine","PlaceholderTypography","EditableTypography","onValueChange","editableLine","placeholder","Header","leftHeader","newHeardFrom","asHeardFrom","midHeader","align","newTitle","rightHeader","newComposer","composedBy","newPerformer","performedBy","paddingTop","paddingLeft","paddingRight","SongMetadataValidator","ChordSongValidator","metadata","ChordSong","prevLine","lastBlockIndex","currLine","lodash","otherLine","newPerformedBy","newComposedBy","newAsHeardFrom","chordLineValidatedFields","lyricLines","lyricLine","SpeedDial","UnstyledSpeedDial","ChordPaperMenu","open","setOpen","enqueueSnackbar","useSnackbar","pickFileHandler","fileList","files","file","fileReader","FileReader","onload","ev","ArrayBuffer","results","deserialize","onLoad","readAsText","loadAction","a","inputElem","document","createElement","addEventListener","click","icon","SpeedDialIcon","onOpen","onClose","ariaLabel","SpeedDialAction","tooltipTitle","blob","Blob","serialize","objectURL","URL","createObjectURL","anchor","download","href","revokeObjectURL","onNewSong","RootPaper","minWidth","ChordPaper","initialSong","setSong","songChangeHandler","updatedSong","loadedSong","chords","NeverGonnaGiveYouUp","assembleLine","arr","tokenSize","subArr","chunk","lyricChunk","Math","floor","random","ErrorPage","CheckCircleIcon","green","UnstyledCheckCircleIcon","Badge","UnstyledBadge","Playground","setFinish","checkExpected","expectedSong","badgeContent","invisible","console","log","LyricsTypography","LineBreak","Preamble","allExercises","route","variantMapping","body1","PlayArrowIcon","UnstyledPlayArrowIcon","marginTop","marginBottom","Fab","UnstyledFab","Tutorial","matchEntry","entry","exerciseEntry","find","exerciseIndex","nextButton","nextExercise","to","TitleName","SideMenu","learnSubmenuOpen","setLearnSubMenuOpen","linkStyle","textDecoration","learnClickHandler","Drawer","List","ListItem","button","ListItemIcon","ListItemText","primaryTypographyProps","exerciseLinks","exerciseRoute","inset","Collapse","tutorialMenu","About","AppLayout","backgroundImage","WoodBackground","App","createMuiTheme","contrastText","fontWeightRegular","routeSwitches","exact","path","ThemeProvider","Boolean","window","location","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.bbab6410.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/symphony.4ca23f9c.png\";","import {\n    Theme,\n    useTheme,\n    InputBaseComponentProps,\n    TypographyVariant,\n    TextField,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { CSSProperties } from \"@material-ui/styles\";\nimport grey from \"@material-ui/core/colors/grey\";\n\ninterface TextInputProps {\n    children: string;\n    onFinish?: (newValue: string) => void;\n    onSpecialBackspace?: () => void;\n    onPasteOverflow?: (overflowContent: string[]) => void;\n    width?: string;\n    variant?: TypographyVariant;\n}\n\nconst TextInput: React.FC<TextInputProps> = (\n    props: TextInputProps\n): JSX.Element => {\n    const [value, setValue] = useState<string>(props.children);\n    const inputRef: React.RefObject<HTMLInputElement> = React.createRef();\n    const theme: Theme = useTheme();\n\n    const updateValue = (\n        event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n    ) => {\n        setValue(event.target.value);\n    };\n\n    const keyDownHandler = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"Enter\") {\n            finish(value);\n            return;\n        }\n\n        const specialBackspace: boolean =\n            event.key === \"Backspace\" && (event.metaKey || event.ctrlKey);\n        const selectionAtBeginning: boolean =\n            inputRef.current?.selectionStart === 0 &&\n            inputRef.current?.selectionEnd === 0;\n\n        if (\n            specialBackspace &&\n            selectionAtBeginning &&\n            props.onSpecialBackspace\n        ) {\n            props.onSpecialBackspace();\n        }\n    };\n\n    const finish = (newValue: string) => {\n        if (props.onFinish) {\n            props.onFinish(newValue);\n        }\n    };\n\n    const blurHandler = () => {\n        finish(value);\n    };\n\n    const composeMultilinePaste = (\n        pasteContent: string[]\n    ): [string, string[]] => {\n        let beforeSelectionStr: string;\n        let afterSelectionStr: string;\n        if (\n            inputRef.current === null ||\n            inputRef.current.selectionStart === null ||\n            inputRef.current.selectionEnd === null\n        ) {\n            beforeSelectionStr = value;\n            afterSelectionStr = \"\";\n        } else {\n            beforeSelectionStr = value.slice(\n                0,\n                inputRef.current.selectionStart\n            );\n            afterSelectionStr = value.slice(inputRef.current.selectionEnd);\n        }\n\n        const newValue = beforeSelectionStr + pasteContent[0];\n\n        const newPasteLines = pasteContent.slice(1);\n        const lastIndex = newPasteLines.length - 1;\n        newPasteLines[lastIndex] += afterSelectionStr;\n\n        return [newValue, newPasteLines];\n    };\n\n    const pasteHandler = (event: React.ClipboardEvent<HTMLDivElement>) => {\n        const payload = event.clipboardData.getData(\"text/plain\");\n\n        if (payload === \"\") {\n            return;\n        }\n\n        const linesOfText: string[] = payload.split(\"\\n\");\n\n        if (linesOfText.length > 1 && props.onPasteOverflow !== undefined) {\n            event.preventDefault();\n\n            const [newValue, newPasteLines] = composeMultilinePaste(\n                linesOfText\n            );\n\n            setValue(newValue);\n            finish(newValue);\n            props.onPasteOverflow(newPasteLines);\n        }\n    };\n\n    const browserInputProps = () => {\n        let variant: CSSProperties | undefined = undefined;\n        if (props.variant !== undefined) {\n            variant = theme?.typography?.[props.variant];\n        }\n\n        const padding: string | number | undefined =\n            variant?.padding !== undefined ? variant.padding : 0;\n        const fontSize: string | number | undefined = variant?.fontSize;\n\n        const inputProps: InputBaseComponentProps = {\n            style: {\n                padding: padding,\n                fontSize: fontSize,\n                opacity: 1,\n                background: grey[100],\n            },\n        };\n\n        if (props.width !== undefined && inputProps.style) {\n            inputProps.style.width = props.width;\n        }\n\n        return inputProps;\n    };\n\n    return (\n        <TextField\n            autoFocus\n            variant=\"filled\"\n            inputProps={{\n                \"data-testid\": \"InnerInput\",\n                ...browserInputProps(),\n            }}\n            inputRef={inputRef}\n            value={value}\n            onBlur={blurHandler}\n            onChange={updateValue}\n            onKeyDown={keyDownHandler}\n            onPaste={pasteHandler}\n            fullWidth\n            data-testid=\"EditableLine\"\n        />\n    );\n};\n\nexport default TextInput;\n","export const isWhitespace = (s: string): boolean => {\n    return /^\\s+$/.test(s);\n};\n\nexport const inflatingWhitespace = (): string => {\n    return \"\\u00A0\";\n};\n\nexport const inflateIfEmpty = (value: string) => {\n    if (isWhitespace(value)) {\n        return inflatingWhitespace();\n    }\n\n    return value;\n};\n","import React from \"react\";\nimport { Typography, Theme } from \"@material-ui/core\";\nimport { inflateIfEmpty } from \"../common/Whitespace\";\nimport { withStyles } from \"@material-ui/styles\";\n\nconst ChordTypography = withStyles((theme: Theme) => ({\n    root: {\n        whiteSpace: \"pre\",\n        cursor: \"pointer\",\n        fontFamily: \"PoriChord\",\n    },\n}))(Typography);\n\ninterface ChordSymbolProps {\n    children: string;\n}\n\nconst ChordSymbol: React.FC<ChordSymbolProps> = (\n    props: ChordSymbolProps\n): JSX.Element => {\n    const formattedChord = (): string => {\n        let chord = props.children;\n        if (chord.endsWith(\" \")) {\n            return chord;\n        }\n\n        chord = chord + \" \";\n\n        return inflateIfEmpty(chord);\n    };\n\n    return (\n        <ChordTypography\n            variant=\"h5\"\n            display=\"inline\"\n            data-testid=\"ChordSymbol\"\n        >\n            {formattedChord()}\n        </ChordTypography>\n    );\n};\n\nexport default ChordSymbol;\n","import {\n    Typography as UnstyledTypography,\n    withStyles,\n    Theme,\n    Grid,\n    Box,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\n\nimport { DataTestID } from \"../common/DataTestID\";\nimport { inflatingWhitespace } from \"../common/Whitespace\";\nimport ChordSymbol from \"./ChordSymbol\";\nimport { IDable } from \"../common/ChordModel/Collection\";\nimport TextInput from \"./TextInput\";\nimport { ChordBlock } from \"../common/ChordModel/ChordBlock\";\n\ninterface BlockProps extends DataTestID {\n    chordBlock: ChordBlock;\n    onChordChange?: (id: IDable<\"ChordBlock\">, newChord: string) => void;\n    onBlockSplit?: (id: IDable<\"ChordBlock\">, splitIndex: number) => void;\n}\n\nconst chordOutline = (theme: Theme) => ({\n    borderStyle: \"solid\",\n    borderColor: theme.palette.primary.main,\n    borderRadius: \"0.3em\",\n    borderWidth: \"0.075em\",\n});\n\nconst ChordInsertOutline = withStyles((theme: Theme) => ({\n    root: {\n        whiteSpace: \"pre\",\n        color: \"transparent\",\n        cursor: \"pointer\",\n        userSelect: \"none\",\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        transform: \"translate(0%, -115%)\",\n        \"&:hover\": chordOutline(theme),\n    },\n}))(UnstyledTypography);\n\nconst Typography = withStyles({\n    root: {\n        whiteSpace: \"pre\",\n    },\n})(UnstyledTypography);\n\nconst HighlightableBox = withStyles((theme: Theme) => ({\n    root: {\n        \"&:hover\": {\n            color: theme.palette.primary.dark,\n        },\n        \"&:hover .MuiTypography-root\": chordOutline(theme),\n    },\n}))(Box);\n\nconst Block: React.FC<BlockProps> = (props: BlockProps): JSX.Element => {\n    const [editing, setEditing] = useState(false);\n\n    let lyricTokens: string[] = props.chordBlock.lyricTokens;\n\n    if (lyricTokens.length === 0) {\n        lyricTokens = [inflatingWhitespace()];\n    }\n\n    const clickHandler: (\n        tokenIndex: number\n    ) => (event: React.MouseEvent<HTMLDivElement>) => void = (\n        tokenIndex: number\n    ) => {\n        return (event: React.MouseEvent<HTMLDivElement>) => {\n            // block splitting happens after the first token\n            // as first token is already aligned with the current chord\n            if (tokenIndex !== 0 && props.onBlockSplit) {\n                props.onBlockSplit(props.chordBlock, tokenIndex);\n            }\n\n            setEditing(true);\n            event.stopPropagation();\n        };\n    };\n\n    const lyricBlock = (\n        lyric: string,\n        index: number,\n        blockHasChord: boolean\n    ): React.ReactElement => {\n        const typographyProps = {\n            variant: \"h5\" as \"h5\",\n            display: \"inline\" as \"inline\",\n        };\n\n        const lyricBlock = (\n            <Typography {...typographyProps} data-testid={`Token-${index}`}>\n                {lyric}\n            </Typography>\n        );\n\n        let hiddenTarget: React.ReactElement | null = null;\n\n        if (!blockHasChord || index !== 0) {\n            hiddenTarget = (\n                <ChordInsertOutline\n                    {...typographyProps}\n                    onClick={clickHandler(index)}\n                    data-testid=\"ChordEditButton\"\n                >\n                    {lyric}\n                </ChordInsertOutline>\n            );\n        }\n\n        return (\n            <Box\n                key={index}\n                position=\"relative\"\n                display=\"inline\"\n                data-testid={`TokenBox-${index}`}\n            >\n                {lyricBlock}\n                {hiddenTarget}\n            </Box>\n        );\n    };\n\n    const lyricBlocks = lyricTokens.map((lyricToken: string, index: number) =>\n        lyricBlock(lyricToken, index, props.chordBlock.chord !== \"\")\n    );\n\n    const endEdit = (newChord: string) => {\n        if (props.onChordChange) {\n            props.onChordChange(props.chordBlock, newChord);\n        }\n\n        setEditing(false);\n    };\n\n    let chordRow: React.ReactElement;\n    if (!editing) {\n        chordRow = (\n            <HighlightableBox onClick={clickHandler(0)}>\n                <ChordSymbol>{props.chordBlock.chord}</ChordSymbol>\n            </HighlightableBox>\n        );\n    } else {\n        chordRow = (\n            <Box data-testid=\"ChordEdit\">\n                <TextInput width=\"5em\" variant=\"h5\" onFinish={endEdit}>\n                    {props.chordBlock.chord}\n                </TextInput>\n            </Box>\n        );\n    }\n\n    return (\n        <Box display=\"inline-block\">\n            <Grid\n                container\n                direction=\"column\"\n                component=\"span\"\n                data-testid={props[\"data-testid\"]}\n            >\n                <Grid item>{chordRow}</Grid>\n                <Grid item data-testid=\"Lyric\">\n                    {lyricBlocks}\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n\nexport default Block;\n","// use the name of the class the ID is describing for T\n// e.g. IDable<\"Person\">\nexport interface IDable<T extends string> {\n    id: string;\n    type: T;\n}\n\nexport const stringifyIgnoreID = (obj: unknown): string => {\n    return JSON.stringify(obj, (key: string, value: string) => {\n        if (key === \"id\") {\n            return undefined;\n        }\n\n        return value;\n    });\n};\n\nexport abstract class Collection<T extends IDable<U>, U extends string> {\n    elements: T[];\n\n    constructor(elements?: T[]) {\n        if (elements !== undefined) {\n            this.elements = elements; //TODO: consider whether this needs to be a shallow copy\n        } else {\n            this.elements = [];\n        }\n    }\n\n    protected indexOf(id: string): number {\n        const index = this.elements.findIndex((elem: T) => elem.id === id);\n\n        if (index < 0) {\n            throw new Error(\"Can't find element inside collection\");\n        }\n\n        return index;\n    }\n\n    abstract clone(): Collection<T, U>;\n\n    // adds a element after the specified id\n    addAfter(idable: IDable<U>, ...newElem: T[]): void {\n        const indexOfBefore = this.indexOf(idable.id);\n        this.elements.splice(indexOfBefore + 1, 0, ...newElem);\n    }\n\n    addBeginning(...newElem: T[]): void {\n        this.elements.splice(0, 0, ...newElem);\n    }\n\n    remove(idable: IDable<U>): T {\n        const index = this.indexOf(idable.id);\n        const removed = this.elements.splice(index, 1);\n        return removed[0];\n    }\n}\n","export const tokenize = (lineOfLyrics: string): string[] => {\n    const matches = lineOfLyrics.match(/((\\w|')+|[^\\w'])/g);\n    if (matches === null) {\n        return [];\n    }\n\n    return matches;\n};\n","import { IDable, stringifyIgnoreID } from \"./Collection\";\nimport shortid from \"shortid\";\nimport { tokenize } from \"../LyricTokenizer\";\nimport * as iots from \"io-ts\";\nimport { Either, right, left, isLeft, parseJSON } from \"fp-ts/lib/Either\";\n\ninterface ChordBlockConstructorParams {\n    chord: string;\n    lyric: string;\n}\n\nexport const ChordBlockValidator = iots.type({\n    chord: iots.string,\n    lyric: iots.string,\n    type: iots.literal(\"ChordBlock\"),\n});\n\nexport type ChordBlockValidatedFields = iots.TypeOf<typeof ChordBlockValidator>;\n\nexport class ChordBlock implements IDable<\"ChordBlock\"> {\n    id: string;\n    chord: string;\n    lyric: string;\n    type: \"ChordBlock\";\n\n    constructor({ chord, lyric }: ChordBlockConstructorParams) {\n        this.id = shortid.generate();\n        this.chord = chord;\n        this.lyric = lyric;\n        this.type = \"ChordBlock\";\n    }\n\n    serialize(): string {\n        return stringifyIgnoreID(this);\n    }\n\n    static fromValidatedFields(\n        validatedFields: ChordBlockValidatedFields\n    ): ChordBlock {\n        return new ChordBlock({\n            chord: validatedFields.chord,\n            lyric: validatedFields.lyric,\n        });\n    }\n\n    static deserialize(jsonStr: string): Either<Error, ChordBlock> {\n        const result: Either<Error, unknown> = parseJSON(\n            jsonStr,\n            () => new Error(\"Failed to parse json string\")\n        );\n\n        if (isLeft(result)) {\n            return result;\n        }\n\n        const jsonObj = result.right;\n        const validationResult = ChordBlockValidator.decode(jsonObj);\n\n        if (isLeft(validationResult)) {\n            return left(new Error(\"Invalid Chord Block object\"));\n        }\n\n        return right(\n            new ChordBlock({\n                chord: validationResult.right.chord,\n                lyric: validationResult.right.lyric,\n            })\n        );\n    }\n\n    get lyricTokens(): string[] {\n        return tokenize(this.lyric);\n    }\n\n    // splits a block, and returns the block before\n    // e.g.\n    // {id:\"A\", chord: \"B7\", lyric:\"my dear we're\"}\n    // splitBlock(4) =>\n    // {id:\"B\", chord: \"B7\", lyric:\"my dear \"}\n    // {id:\"A\", chord: \"\", \"we're\"}\n    split(splitIndex: number): ChordBlock {\n        if (splitIndex === 0) {\n            throw new Error(\"Split index can't be zero\");\n        }\n\n        const tokens = this.lyricTokens;\n        const prevBlockLyricTokens: string[] = tokens.slice(0, splitIndex);\n        const thisBlockLyricTokens: string[] = tokens.slice(splitIndex);\n\n        const prevBlock: ChordBlock = new ChordBlock({\n            chord: this.chord,\n            lyric: prevBlockLyricTokens.join(\"\"),\n        });\n\n        this.chord = \"\";\n        this.lyric = thisBlockLyricTokens.join(\"\");\n\n        return prevBlock;\n    }\n\n    contentEquals(other: ChordBlock): boolean {\n        return this.chord === other.chord && this.lyric === other.lyric;\n    }\n}\n","import {\n    Box,\n    withStyles,\n    Theme,\n    Button as UnstyledButton,\n    Tooltip as UnstyledTooltip,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nimport grey from \"@material-ui/core/colors/grey\";\nimport red from \"@material-ui/core/colors/red\";\n\nimport Block from \"./Block\";\n\nimport UnstyledBackspaceIcon from \"@material-ui/icons/Backspace\";\nimport { IDable } from \"../common/ChordModel/Collection\";\nimport { ChordBlock } from \"../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../common/ChordModel/ChordLine\";\n\nconst iconColorStyle = {\n    root: {\n        color: red[300],\n    },\n};\n\nconst BackspaceIcon = withStyles(iconColorStyle)(UnstyledBackspaceIcon);\n\nconst Button = withStyles((theme: Theme) => ({\n    contained: {\n        backgroundColor: \"transparent\",\n        \"&:hover\": {\n            backgroundColor: theme.palette.primary.dark,\n        },\n    },\n}))(UnstyledButton);\n\nconst Tooltip = withStyles({\n    tooltip: {\n        padding: 0,\n        background: \"transparent\",\n        margin: 0,\n    },\n})(UnstyledTooltip);\n\nconst HighlightableBox = withStyles((theme: Theme) => ({\n    root: {\n        \"&:hover\": {\n            backgroundColor: grey[100],\n        },\n    },\n}))(Box);\n\ninterface ChordEditLineProps {\n    chordLine: ChordLine;\n    onEdit?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    onAdd?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    onRemove?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    onChangeLine?: (id: IDable<\"ChordLine\">) => void;\n}\n\nconst ChordEditLine: React.FC<ChordEditLineProps> = (\n    props: ChordEditLineProps\n): JSX.Element => {\n    let chordBlocks: ChordBlock[] = props.chordLine.chordBlocks;\n    if (chordBlocks.length === 0) {\n        chordBlocks = [\n            new ChordBlock({\n                chord: \"\",\n                lyric: \"\",\n            }),\n        ];\n    }\n\n    const hoverMenu = (): React.ReactElement => {\n        return (\n            <Button onClick={props.onRemove} data-testid={\"RemoveButton\"}>\n                <BackspaceIcon />\n            </Button>\n        );\n    };\n\n    const chordChangeHandler = (id: IDable<\"ChordBlock\">, newChord: string) => {\n        props.chordLine.setChord(id, newChord);\n\n        if (props.onChangeLine) {\n            props.onChangeLine(props.chordLine);\n        }\n    };\n\n    const blockSplitHandler = (\n        id: IDable<\"ChordBlock\">,\n        splitIndex: number\n    ) => {\n        props.chordLine.splitBlock(id, splitIndex);\n\n        if (props.onChangeLine) {\n            props.onChangeLine(props.chordLine);\n        }\n    };\n\n    const blocks: React.ReactElement[] = chordBlocks.map(\n        (chordBlock: ChordBlock, index: number) => (\n            <Block\n                key={chordBlock.id}\n                chordBlock={chordBlock}\n                onChordChange={chordChangeHandler}\n                onBlockSplit={blockSplitHandler}\n                data-testid={`Block-${index}`}\n            ></Block>\n        )\n    );\n\n    return (\n        <Tooltip placement=\"right\" title={hoverMenu()} interactive>\n            <HighlightableBox\n                data-testid={\"NoneditableLine\"}\n                onClick={props.onEdit}\n            >\n                {blocks}\n            </HighlightableBox>\n        </Tooltip>\n    );\n};\n\nexport default ChordEditLine;\n","import { Box, Slide } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport TextInput from \"./TextInput\";\n\nimport { DataTestID } from \"../common/DataTestID\";\nimport { ChordLine } from \"../common/ChordModel/ChordLine\";\nimport { IDable } from \"../common/ChordModel/Collection\";\nimport ChordEditLine from \"./ChordEditLine\";\n\ninterface LineProps extends DataTestID {\n    chordLine: ChordLine;\n    onChangeLine?: (id: IDable<\"ChordLine\">) => void;\n    onAddLine?: (id: IDable<\"ChordLine\">) => void;\n    onRemoveLine?: (id: IDable<\"ChordLine\">) => void;\n    onPasteOverflow?: (\n        id: IDable<\"ChordLine\">,\n        overflowPasteContent: string[]\n    ) => void;\n    onMergeWithPreviousLine?: (id: IDable<\"ChordLine\">) => boolean;\n}\n\nconst Line: React.FC<LineProps> = (props: LineProps): JSX.Element => {\n    const [editing, setEditing] = useState(false);\n    const [removed, setRemoved] = useState(false);\n\n    const startEdit = () => {\n        setEditing(true);\n    };\n\n    const finishEdit = (newLyrics: string) => {\n        setEditing(false);\n\n        props.chordLine.replaceLyrics(newLyrics);\n\n        if (props.onChangeLine) {\n            props.onChangeLine(props.chordLine);\n        }\n    };\n\n    const addHandler = () => {\n        if (props.onAddLine) {\n            props.onAddLine(props.chordLine);\n        }\n    };\n\n    const removalTime = 250;\n\n    const removeHandler = () => {\n        if (removed) {\n            return;\n        }\n\n        setRemoved(true);\n\n        if (props.onRemoveLine) {\n            setTimeout(() => {\n                if (props.onRemoveLine) {\n                    props.onRemoveLine(props.chordLine);\n                }\n            }, removalTime);\n        }\n    };\n\n    const pasteOverflowHandler = (overflowContent: string[]) => {\n        if (props.onPasteOverflow) {\n            props.onPasteOverflow(props.chordLine, overflowContent);\n            setEditing(false);\n        }\n    };\n\n    const specialBackspaceHandler = () => {\n        if (props.onMergeWithPreviousLine) {\n            const handledAndStopEditing = props.onMergeWithPreviousLine(\n                props.chordLine\n            );\n            if (handledAndStopEditing) {\n                setEditing(false);\n            }\n        }\n    };\n\n    const nonEditableLine = (): React.ReactElement => {\n        return (\n            <ChordEditLine\n                chordLine={props.chordLine}\n                onChangeLine={props.onChangeLine}\n                onAdd={addHandler}\n                onRemove={removeHandler}\n                onEdit={startEdit}\n            />\n        );\n    };\n\n    const editLyricsInput = (): React.ReactElement => {\n        const lyrics = props.chordLine.lyrics;\n\n        return (\n            <Box position=\"absolute\" left=\"0\" bottom=\"2px\" width=\"100%\">\n                <TextInput\n                    variant=\"h5\"\n                    onFinish={finishEdit}\n                    onPasteOverflow={pasteOverflowHandler}\n                    onSpecialBackspace={specialBackspaceHandler}\n                >\n                    {lyrics}\n                </TextInput>\n            </Box>\n        );\n    };\n\n    let elem: React.ReactElement;\n    if (editing) {\n        // using a css trick to overlay the lyrics edit input over\n        // the noneditable lyrics line so chords are still showing\n        elem = (\n            <>\n                {nonEditableLine()}\n                {editLyricsInput()}\n            </>\n        );\n    } else {\n        elem = nonEditableLine();\n    }\n\n    const yeetDirection = removed ? \"up\" : \"down\";\n\n    return (\n        <Slide direction={yeetDirection} in={!removed} timeout={removalTime}>\n            <Box\n                borderBottom={1}\n                borderColor=\"grey.50\"\n                width=\"100%\"\n                position=\"relative\"\n                data-testid={props[\"data-testid\"]}\n            >\n                {elem}\n            </Box>\n        </Slide>\n    );\n};\n\nexport default Line;\n","import { ChordLine } from \"./ChordLine\";\nimport { ChordBlock } from \"./ChordBlock\";\nimport { DiffMatchPatch, DiffOperation } from \"diff-match-patch-typescript\";\n\nconst differ: DiffMatchPatch = (() => {\n    const dmp = new DiffMatchPatch();\n    dmp.diffTimeout = 0;\n    dmp.matchThreshold = 0;\n    return dmp;\n})();\n\nclass ChordLineIterator {\n    private chordLine: ChordLine;\n    private currBlockIndex: number;\n    private currCharIndex: number;\n    private blockBuffer: string[];\n    private prependLyrics: string;\n\n    constructor(chordLine: ChordLine) {\n        this.chordLine = chordLine;\n\n        this.currBlockIndex = 0;\n        this.currCharIndex = 0;\n\n        this.blockBuffer = chordLine.elements.map(() => \"\");\n        this.prependLyrics = \"\";\n    }\n\n    private atBlockBoundary(): boolean {\n        return this.currCharIndex === 0;\n    }\n\n    private currentBlock(): ChordBlock {\n        return this.chordLine.elements[this.currBlockIndex];\n    }\n\n    private currentChar(): string {\n        return this.currentBlock().lyric.charAt(this.currCharIndex);\n    }\n\n    private nextChar(): void {\n        this.currCharIndex += 1;\n\n        if (this.currCharIndex >= this.currentBlock().lyric.length) {\n            this.currBlockIndex += 1;\n            this.currCharIndex = 0;\n        }\n    }\n\n    skip(skipChar: string): void {\n        if (this.currentChar() !== skipChar) {\n            throw new Error(\"Mismatched characters when skipping\");\n        }\n\n        this.blockBuffer[this.currBlockIndex] += skipChar;\n\n        this.nextChar();\n    }\n\n    insert(insertChar: string): void {\n        if (!this.atBlockBoundary()) {\n            this.blockBuffer[this.currBlockIndex] += insertChar;\n        } else {\n            // bias towards inserting  at the end of the previous block if between two blocks\n            // since chords are aligned to the beginning of the block, we don't want to shift the lyrics\n            // inside a block unnecessarily\n            const prevBlockIndex = this.currBlockIndex - 1;\n            if (prevBlockIndex >= 0) {\n                this.blockBuffer[prevBlockIndex] += insertChar;\n            } else {\n                this.prependLyrics += insertChar;\n            }\n        }\n    }\n\n    delete(deleteChar: string): void {\n        if (this.currentChar() !== deleteChar) {\n            throw new Error(\"Mismatched characters when deleting\");\n        }\n\n        this.nextChar();\n    }\n\n    finish(): void {\n        for (let i = 0; i < this.chordLine.elements.length; i++) {\n            this.chordLine.elements[i].lyric = this.blockBuffer[i];\n        }\n\n        if (this.prependLyrics !== \"\") {\n            this.chordLine.elements.splice(\n                0,\n                0,\n                new ChordBlock({ chord: \"\", lyric: this.prependLyrics })\n            );\n        }\n\n        this.chordLine.normalizeBlocks();\n    }\n}\n\nconst removeOrphanedBlocksWithNoChords = (chordLine: ChordLine): void => {\n    const newBlocks: ChordBlock[] = [];\n\n    for (const block of chordLine.elements) {\n        if (block.lyric !== \"\" || block.chord !== \"\") {\n            newBlocks.push(block);\n        }\n    }\n\n    chordLine.elements = newBlocks;\n};\n\nconst addSpacesToOrphanedBlocks = (chordLine: ChordLine): void => {\n    const blocks: ChordBlock[] = chordLine.elements;\n    for (let i = 0; i < blocks.length; i++) {\n        const block = blocks[i];\n        if (block.lyric !== \"\") {\n            continue;\n        }\n\n        const prevBlockHasSpaceToSteal =\n            i > 0 &&\n            blocks[i - 1].lyric.length > 1 &&\n            blocks[i - 1].lyric.endsWith(\" \");\n\n        if (prevBlockHasSpaceToSteal) {\n            // \"steal\" a space from the previous block\n            // e.g. if * represents a space\n            // G        A\n            // We're*no*strangers\n            // replaced with\n            // We're*no*\n            // instead of adding two spaces consecutively, like\n            // G        A\n            // We're*no**\n            // we'll just relegate one of the unused spaces for the orphaned block, like\n            // G       A\n            // We're*no*\n\n            // if there's no space to steal, just add one so that it's backed by a character\n            const prevBlock = blocks[i - 1];\n            const lastIndex = prevBlock.lyric.length - 1;\n            prevBlock.lyric = prevBlock.lyric.slice(0, lastIndex);\n        }\n\n        block.lyric = \" \";\n    }\n};\n\nexport const replaceChordLineLyrics = (\n    chordLine: ChordLine,\n    newLyrics: string\n): void => {\n    const diffs = differ.diff_main(chordLine.lyrics, newLyrics);\n    differ.diff_cleanupSemanticLossless(diffs);\n\n    const iterator = new ChordLineIterator(chordLine);\n\n    for (const diff of diffs) {\n        const diffOperation = diff[0];\n        for (const diffChar of diff[1]) {\n            switch (diffOperation) {\n                case DiffOperation.DIFF_EQUAL: {\n                    iterator.skip(diffChar);\n                    break;\n                }\n                case DiffOperation.DIFF_INSERT: {\n                    iterator.insert(diffChar);\n                    break;\n                }\n                case DiffOperation.DIFF_DELETE: {\n                    iterator.delete(diffChar);\n                    break;\n                }\n            }\n        }\n    }\n\n    iterator.finish();\n\n    removeOrphanedBlocksWithNoChords(chordLine);\n    addSpacesToOrphanedBlocks(chordLine);\n};\n","import { Collection, IDable, stringifyIgnoreID } from \"./Collection\";\nimport shortid from \"shortid\";\nimport * as iots from \"io-ts\";\nimport { Either, right, left, isLeft, parseJSON } from \"fp-ts/lib/Either\";\nimport { replaceChordLineLyrics } from \"./ChordLinePatcher\";\nimport {\n    ChordBlockValidator,\n    ChordBlockValidatedFields,\n    ChordBlock,\n} from \"./ChordBlock\";\n\nexport const ChordLineValidator = iots.type({\n    elements: iots.array(ChordBlockValidator),\n    type: iots.literal(\"ChordLine\"),\n});\n\nexport type ChordLineValidatedFields = iots.TypeOf<typeof ChordLineValidator>;\n\nexport class ChordLine extends Collection<ChordBlock, \"ChordBlock\">\n    implements IDable<\"ChordLine\"> {\n    id: string;\n    type: \"ChordLine\";\n\n    constructor(elements?: ChordBlock[]) {\n        if (elements === undefined) {\n            elements = [new ChordBlock({ chord: \"\", lyric: \"\" })];\n        }\n\n        super(elements);\n\n        this.id = shortid.generate();\n        this.type = \"ChordLine\";\n    }\n\n    static fromValidatedFields(\n        validatedFields: ChordLineValidatedFields\n    ): ChordLine {\n        const chordBlockElems: ChordBlock[] = validatedFields.elements.map(\n            (value: ChordBlockValidatedFields) => {\n                return ChordBlock.fromValidatedFields(value);\n            }\n        );\n\n        return new ChordLine(chordBlockElems);\n    }\n\n    serialize(): string {\n        return stringifyIgnoreID(this);\n    }\n\n    static deserialize(jsonStr: string): Either<Error, ChordLine> {\n        const result: Either<Error, unknown> = parseJSON(\n            jsonStr,\n            () => new Error(\"Failed to parse json string\")\n        );\n\n        if (isLeft(result)) {\n            return result;\n        }\n\n        const jsonObj = result.right;\n        const validationResult = ChordLineValidator.decode(jsonObj);\n\n        if (isLeft(validationResult)) {\n            return left(new Error(\"Invalid Chord Line object\"));\n        }\n\n        return right(this.fromValidatedFields(validationResult.right));\n    }\n\n    static fromLyrics(lyrics: string): ChordLine {\n        const block = new ChordBlock({\n            chord: \"\",\n            lyric: lyrics,\n        });\n\n        return new ChordLine([block]);\n    }\n\n    get chordBlocks(): ChordBlock[] {\n        return this.elements;\n    }\n\n    get lyrics(): string {\n        const lyricTokens = this.chordBlocks.map(\n            (chordBlock: ChordBlock) => chordBlock.lyric\n        );\n\n        return lyricTokens.join(\"\");\n    }\n\n    replaceLyrics(newLyrics: string): void {\n        if (newLyrics === this.lyrics) {\n            return;\n        }\n\n        replaceChordLineLyrics(this, newLyrics);\n    }\n\n    setChord(idable: IDable<\"ChordBlock\">, newChord: string): void {\n        const index = this.indexOf(idable.id);\n        this.elements[index].chord = newChord;\n        this.normalizeBlocks();\n    }\n\n    splitBlock(idable: IDable<\"ChordBlock\">, splitIndex: number): void {\n        const index = this.indexOf(idable.id);\n        const block = this.elements[index];\n        const newPrevBlock = block.split(splitIndex);\n        this.elements.splice(index, 0, newPrevBlock);\n    }\n\n    // passes through every block to ensure that blocks without chords exist (except for the first)\n    normalizeBlocks(): void {\n        const newBlocks: ChordBlock[] = [];\n\n        for (let i = 0; i < this.elements.length; i++) {\n            const block = this.elements[i];\n\n            if (block.chord === \"\" && newBlocks.length > 0) {\n                const lastIndex = newBlocks.length - 1;\n                newBlocks[lastIndex].lyric += block.lyric;\n            } else {\n                newBlocks.push(block);\n            }\n        }\n\n        // avoid rejiggering the data if it's a no-op\n        if (newBlocks.length !== this.elements.length) {\n            this.elements = newBlocks;\n        }\n    }\n\n    clone(): ChordLine {\n        const clone = new ChordLine(this.elements);\n        clone.id = this.id;\n        return clone;\n    }\n\n    contentEquals(other: ChordLine): boolean {\n        if (this.chordBlocks.length !== other.chordBlocks.length) {\n            return false;\n        }\n\n        const reducer = (\n            isEqual: boolean,\n            value: ChordBlock,\n            index: number\n        ): boolean => {\n            if (!isEqual) {\n                return false;\n            }\n\n            const otherBlock = other.chordBlocks[index];\n            if (!value.contentEquals(otherBlock)) {\n                return false;\n            }\n\n            return true;\n        };\n\n        return this.chordBlocks.reduce(reducer, true);\n    }\n}\n","import React from \"react\";\nimport {\n    Theme,\n    Grid,\n    Tooltip as UnstyledTooltip,\n    Divider as UnstyledDivider,\n    Button,\n} from \"@material-ui/core\";\nimport { useTheme, withStyles } from \"@material-ui/styles\";\nimport UnstyledAddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\nimport { DataTestID } from \"../common/DataTestID\";\n\nconst HighlightableGrid = withStyles({\n    root: {\n        \"&:hover .MuiDivider-root\": {\n            backgroundColor: \"rgba(0, 0, 0, 0.25)\",\n        },\n    },\n})(Grid);\n\nconst Tooltip = withStyles({\n    tooltip: {\n        padding: 0,\n        background: \"transparent\",\n        margin: 0,\n    },\n})(UnstyledTooltip);\n\nconst Divider = withStyles({\n    root: {\n        width: \"100%\",\n        backgroundColor: \"transparent\",\n    },\n})(UnstyledDivider);\n\nconst AddCircleOutlineIcon = withStyles((theme: Theme) => ({\n    root: {\n        color: theme.palette.secondary.light,\n    },\n}))(UnstyledAddCircleOutlineIcon);\n\ninterface NewLineProps extends DataTestID {\n    onAdd?: () => void;\n}\n\nconst NewLine: React.FC<NewLineProps> = (props: NewLineProps): JSX.Element => {\n    const theme: Theme = useTheme();\n\n    const hoverMenu = (): React.ReactElement => {\n        return (\n            <Button data-testid={\"AddButton\"} onClick={props.onAdd}>\n                <AddCircleOutlineIcon />\n            </Button>\n        );\n    };\n\n    return (\n        <Tooltip title={hoverMenu()} interactive placement=\"right\">\n            <HighlightableGrid\n                container\n                direction=\"column\"\n                justify=\"center\"\n                onClick={props.onAdd}\n                data-testid={props[\"data-testid\"]}\n                style={{\n                    minHeight: theme.spacing(3),\n                }}\n            >\n                <Divider />\n            </HighlightableGrid>\n        </Tooltip>\n    );\n};\n\nexport default NewLine;\n","import React from \"react\";\nimport { Paper as UnstyledPaper, withStyles, Grid } from \"@material-ui/core\";\nimport Line from \"./Line\";\nimport { IDable } from \"../common/ChordModel/Collection\";\nimport { ChordSong } from \"../common/ChordModel/ChordSong\";\nimport { ChordLine } from \"../common/ChordModel/ChordLine\";\nimport NewLine from \"./NewLine\";\n\nconst Paper = withStyles({\n    root: {\n        width: \"auto\",\n    },\n})(UnstyledPaper);\n\ninterface ChordPaperBodyProps {\n    song: ChordSong;\n    onSongChanged?: (updatedSong: ChordSong) => void;\n}\n\nconst ChordPaperBody: React.FC<ChordPaperBodyProps> = (\n    props: ChordPaperBodyProps\n): React.ReactElement => {\n    const addLineToTop = () => {\n        const newLine: ChordLine = new ChordLine();\n        props.song.addBeginning(newLine);\n        notifySongChanged();\n    };\n\n    const addLine = (id: IDable<\"ChordLine\">) => {\n        const newLine: ChordLine = new ChordLine();\n        props.song.addAfter(id, newLine);\n        notifySongChanged();\n    };\n\n    const removeLine = (id: IDable<\"ChordLine\">) => {\n        props.song.remove(id);\n        notifySongChanged();\n    };\n\n    const changeLine = (id: IDable<\"ChordLine\">) => {\n        notifySongChanged();\n    };\n\n    const pasteOverflowFromLine = (\n        id: IDable<\"ChordLine\">,\n        overflowContent: string[]\n    ) => {\n        const newChordLines = overflowContent.map((newLyricLine: string) =>\n            ChordLine.fromLyrics(newLyricLine)\n        );\n        props.song.addAfter(id, ...newChordLines);\n        notifySongChanged();\n    };\n\n    const mergeWithPreviousLine = (id: IDable<\"ChordLine\">): boolean => {\n        const didMerge = props.song.mergeLineWithPrevious(id);\n\n        if (didMerge) {\n            notifySongChanged();\n            return true;\n        }\n\n        return false;\n    };\n\n    const notifySongChanged = () => {\n        if (props.onSongChanged) {\n            props.onSongChanged(props.song);\n        }\n    };\n\n    const lines = () => {\n        const lines = props.song.chordLines.flatMap(\n            (line: ChordLine, index: number) => {\n                const addLineBelow = () => {\n                    addLine(line);\n                };\n\n                return [\n                    <Line\n                        key={line.id}\n                        chordLine={line}\n                        onAddLine={addLine}\n                        onRemoveLine={removeLine}\n                        onChangeLine={changeLine}\n                        onPasteOverflow={pasteOverflowFromLine}\n                        onMergeWithPreviousLine={mergeWithPreviousLine}\n                        data-testid={`Line-${index}`}\n                    />,\n                    <NewLine\n                        key={\"NewLine-\" + line.id}\n                        onAdd={addLineBelow}\n                        data-testid={`NewLine-${index}`}\n                    />,\n                ];\n            }\n        );\n\n        const firstNewLine = (\n            <NewLine\n                key={\"NewLine-Top\"}\n                onAdd={addLineToTop}\n                data-testid={\"NewLine-Top\"}\n            />\n        );\n        lines.splice(0, 0, firstNewLine);\n\n        return lines;\n    };\n\n    return (\n        <Paper elevation={0}>\n            <Grid container>\n                <Grid item xs={1}></Grid>\n                <Grid item xs={10}>\n                    {lines()}\n                </Grid>\n                <Grid item xs={1}></Grid>\n            </Grid>\n        </Paper>\n    );\n};\n\nexport default ChordPaperBody;\n","import { Box, Typography, TypographyProps } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport TextInput from \"./TextInput\";\n\nimport { DataTestID } from \"../common/DataTestID\";\nimport { inflateIfEmpty } from \"../common/Whitespace\";\nimport { withStyles } from \"@material-ui/styles\";\n\nimport grey from \"@material-ui/core/colors/grey\";\n\ninterface EditableTypographyProps extends DataTestID, TypographyProps {\n    children: string;\n    onValueChange?: (newValue: string) => void;\n    placeholder?: string;\n}\n\nconst PlaceholderTypography = withStyles({\n    root: {\n        color: grey[400],\n    },\n})(Typography);\n\nconst EditableTypography: React.FC<EditableTypographyProps> = (\n    props: EditableTypographyProps\n): JSX.Element => {\n    const [editing, setEditing] = useState(false);\n\n    const startEdit = () => {\n        setEditing(true);\n    };\n\n    const finishEdit = (newValue: string) => {\n        setEditing(false);\n        if (props.onValueChange) {\n            props.onValueChange(newValue);\n        }\n    };\n\n    const nonEditableLine = (): React.ReactElement => {\n        const {\n            children,\n            placeholder,\n            onValueChange,\n            ...typographyProps\n        } = props;\n\n        if (props.children === \"\" && props.placeholder !== undefined) {\n            return (\n                <PlaceholderTypography {...typographyProps} onClick={startEdit}>\n                    {props.placeholder}\n                </PlaceholderTypography>\n            );\n        }\n\n        return (\n            <Typography {...typographyProps} onClick={startEdit}>\n                {inflateIfEmpty(props.children)}\n            </Typography>\n        );\n    };\n\n    const editableLine = (): React.ReactElement => {\n        if (props.variant === \"inherit\" || props.variant === \"srOnly\") {\n            throw new Error(\"can't have these variant types\");\n        }\n\n        return (\n            <TextInput\n                variant={props.variant}\n                onFinish={finishEdit}\n                data-testid={\"EditableLine\"}\n            >\n                {props.children}\n            </TextInput>\n        );\n    };\n\n    const elem: React.ReactElement = editing\n        ? editableLine()\n        : nonEditableLine();\n\n    return <Box>{elem}</Box>;\n};\n\nexport default EditableTypography;\n","import React from \"react\";\nimport { Typography, Theme, Grid, Box } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/styles\";\nimport EditableTypography from \"./EditableTypography\";\nimport { ChordSong } from \"../common/ChordModel/ChordSong\";\n\ninterface HeaderProps {\n    song: ChordSong;\n    onSongChanged?: (updatedSong: ChordSong) => void;\n}\n\nconst Header: React.FC<HeaderProps> = (props: HeaderProps): JSX.Element => {\n    const theme: Theme = useTheme();\n\n    const notifySongChanged = (): void => {\n        if (props.onSongChanged) {\n            props.onSongChanged(props.song);\n        }\n    };\n\n    const updateTitleHandler = (newTitle: string) => {\n        props.song.title = newTitle;\n        notifySongChanged();\n    };\n\n    const updateComposeHandler = (newComposer: string) => {\n        props.song.composedBy = newComposer;\n        notifySongChanged();\n    };\n\n    const updatePerformerHandler = (newPerformer: string) => {\n        props.song.performedBy = newPerformer;\n        notifySongChanged();\n    };\n\n    const updateHeardFrom = (newHeardFrom: string) => {\n        props.song.asHeardFrom = newHeardFrom;\n        notifySongChanged();\n    };\n\n    const leftHeader = (\n        <Grid item container xs={3} direction=\"column\">\n            <Grid item>\n                <Typography display=\"inline\" variant=\"caption\">\n                    As heard from:{\" \"}\n                </Typography>\n                <EditableTypography\n                    variant=\"caption\"\n                    placeholder=\"https://www.youtube.com/watch?v=dM9zwZCOmjM\"\n                    onValueChange={updateHeardFrom}\n                    data-testid=\"AsHeardAt\"\n                >\n                    {props.song.asHeardFrom}\n                </EditableTypography>\n            </Grid>\n        </Grid>\n    );\n\n    const midHeader = (\n        <Grid item xs={6}>\n            <EditableTypography\n                variant=\"h4\"\n                align=\"center\"\n                data-testid=\"SongTitle\"\n                placeholder=\"Song Title\"\n                onValueChange={updateTitleHandler}\n            >\n                {props.song.title}\n            </EditableTypography>\n        </Grid>\n    );\n\n    const rightHeader = (\n        <Grid item container xs={3} direction=\"column\">\n            <Grid item>\n                <Typography display=\"inline\" variant=\"subtitle2\">\n                    Composed by:{\" \"}\n                </Typography>\n\n                <EditableTypography\n                    variant=\"subtitle2\"\n                    placeholder=\"Stock Waterman\"\n                    onValueChange={updateComposeHandler}\n                    data-testid=\"ComposedBy\"\n                >\n                    {props.song.composedBy}\n                </EditableTypography>\n            </Grid>\n            <Grid item>\n                <Typography display=\"inline\" variant=\"subtitle2\">\n                    Performed by:{\" \"}\n                </Typography>\n\n                <EditableTypography\n                    variant=\"subtitle2\"\n                    placeholder=\"Rick Astley\"\n                    onValueChange={updatePerformerHandler}\n                    data-testid=\"PerformedBy\"\n                >\n                    {props.song.performedBy}\n                </EditableTypography>\n            </Grid>\n        </Grid>\n    );\n\n    return (\n        <Box\n            paddingTop={theme.spacing(1)}\n            paddingLeft={theme.spacing(0.5)}\n            paddingRight={theme.spacing(0.5)}\n            data-testid=\"Header\"\n        >\n            <Grid container>\n                {leftHeader}\n                {midHeader}\n                {rightHeader}\n            </Grid>\n        </Box>\n    );\n};\n\nexport default Header;\n","import * as iots from \"io-ts\";\nimport { Collection, stringifyIgnoreID, IDable } from \"./Collection\";\nimport { Either, right, left, isLeft, parseJSON } from \"fp-ts/lib/Either\";\nimport {\n    ChordLineValidator,\n    ChordLineValidatedFields,\n    ChordLine,\n} from \"./ChordLine\";\nimport lodash from \"lodash\";\n\nconst SongMetadataValidator = iots.type({\n    title: iots.string,\n    composedBy: iots.string,\n    performedBy: iots.string,\n    asHeardFrom: iots.string,\n});\n\ntype SongMetadata = iots.TypeOf<typeof SongMetadataValidator>;\n\nconst ChordSongValidator = iots.type({\n    elements: iots.array(ChordLineValidator),\n    metadata: SongMetadataValidator,\n});\ntype ChordSongValidatedFields = iots.TypeOf<typeof ChordSongValidator>;\n\nexport class ChordSong extends Collection<ChordLine, \"ChordLine\"> {\n    metadata: SongMetadata;\n\n    constructor(elements?: ChordLine[], metadata?: SongMetadata) {\n        if (elements === undefined) {\n            elements = [new ChordLine()];\n        }\n\n        super(elements);\n\n        if (metadata !== undefined) {\n            this.metadata = metadata;\n        } else {\n            this.metadata = {\n                title: \"\",\n                composedBy: \"\",\n                performedBy: \"\",\n                asHeardFrom: \"\",\n            };\n        }\n    }\n\n    static fromValidatedFields(\n        validatedFields: ChordSongValidatedFields\n    ): ChordSong {\n        const chordLines: ChordLine[] = validatedFields.elements.map(\n            (chordLineValidatedFields: ChordLineValidatedFields) => {\n                return ChordLine.fromValidatedFields(chordLineValidatedFields);\n            }\n        );\n        return new ChordSong(chordLines, validatedFields.metadata);\n    }\n\n    serialize(): string {\n        return stringifyIgnoreID(this);\n    }\n\n    static deserialize(jsonStr: string): Either<Error, ChordSong> {\n        const result: Either<Error, unknown> = parseJSON(\n            jsonStr,\n            () => new Error(\"Failed to parse json string\")\n        );\n\n        if (isLeft(result)) {\n            return result;\n        }\n\n        const jsonObj = result.right;\n        const validationResult = ChordSongValidator.decode(jsonObj);\n\n        if (isLeft(validationResult)) {\n            return left(new Error(\"Invalid Chord Song object\"));\n        }\n\n        return right(this.fromValidatedFields(validationResult.right));\n    }\n\n    static fromLyricsLines(lyricLines: string[]): ChordSong {\n        const chordLines: ChordLine[] = lyricLines.map((lyricLine: string) =>\n            ChordLine.fromLyrics(lyricLine)\n        );\n        return new ChordSong(chordLines);\n    }\n\n    get chordLines(): ChordLine[] {\n        return this.elements;\n    }\n\n    get title(): string {\n        return this.metadata.title;\n    }\n\n    set title(newTitle: string) {\n        this.metadata.title = newTitle;\n    }\n\n    get performedBy(): string {\n        return this.metadata.performedBy;\n    }\n\n    set performedBy(newPerformedBy: string) {\n        this.metadata.performedBy = newPerformedBy;\n    }\n\n    get composedBy(): string {\n        return this.metadata.composedBy;\n    }\n\n    set composedBy(newComposedBy: string) {\n        this.metadata.composedBy = newComposedBy;\n    }\n\n    get asHeardFrom(): string {\n        return this.metadata.asHeardFrom;\n    }\n\n    set asHeardFrom(newAsHeardFrom: string) {\n        this.metadata.asHeardFrom = newAsHeardFrom;\n    }\n\n    clone(): ChordSong {\n        return new ChordSong(this.elements, this.metadata);\n    }\n\n    mergeLineWithPrevious(idable: IDable<\"ChordLine\">): boolean {\n        const index = this.indexOf(idable.id);\n        // no previous line to merge with, just bail\n        if (index === 0) {\n            return false;\n        }\n\n        // the user experience usually would like a space between lines when they're merged\n        // e.g.\n        // Never Gonna\n        // Give You Up\n        // =>\n        // Never GonnaGive You Up is awkward\n        const prevLine = this.chordLines[index - 1];\n        const lastBlockIndex = prevLine.chordBlocks.length - 1;\n        prevLine.chordBlocks[lastBlockIndex].lyric += \" \";\n\n        const currLine = this.chordLines[index];\n        prevLine.chordBlocks.push(...currLine.chordBlocks);\n        prevLine.normalizeBlocks();\n\n        this.chordLines.splice(index, 1);\n\n        return true;\n    }\n\n    contentEquals(other: ChordSong): boolean {\n        if (this.chordLines.length !== other.chordLines.length) {\n            return false;\n        }\n\n        if (!lodash.isEqual(this.metadata, other.metadata)) {\n            return false;\n        }\n\n        const reducer = (\n            isEqual: boolean,\n            value: ChordLine,\n            index: number\n        ): boolean => {\n            if (!isEqual) {\n                return false;\n            }\n\n            const otherLine = other.chordLines[index];\n            if (!value.contentEquals(otherLine)) {\n                return false;\n            }\n\n            return true;\n        };\n\n        return this.chordLines.reduce(reducer, true);\n    }\n}\n","import {\n    SpeedDial as UnstyledSpeedDial,\n    SpeedDialAction,\n    SpeedDialIcon,\n} from \"@material-ui/lab\";\nimport { withStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@material-ui/core\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\";\nimport NoteAddIcon from \"@material-ui/icons/NoteAdd\";\nimport React, { useState } from \"react\";\nimport { ChordSong } from \"../common/ChordModel/ChordSong\";\nimport { isLeft } from \"fp-ts/lib/Either\";\nimport { useSnackbar } from \"notistack\";\n\ninterface ChordPaperMenuProps {\n    song: ChordSong;\n    onLoad?: (loadedSong: ChordSong) => void;\n    onNewSong?: () => void;\n}\n\nconst SpeedDial = withStyles((theme: Theme) => ({\n    root: {\n        position: \"fixed\",\n        bottom: theme.spacing(2),\n        right: theme.spacing(2),\n    },\n}))(UnstyledSpeedDial);\n\nconst ChordPaperMenu: React.FC<ChordPaperMenuProps> = (\n    props: ChordPaperMenuProps\n): JSX.Element => {\n    const [open, setOpen] = useState(false);\n    const { enqueueSnackbar } = useSnackbar();\n\n    const openMenu = () => {\n        setOpen(true);\n    };\n\n    const closeMenu = () => {\n        setOpen(false);\n    };\n\n    const saveAction = () => {\n        const blob = new Blob([props.song.serialize()], {\n            type: \"application/json\",\n        });\n        const objectURL = URL.createObjectURL(blob);\n\n        const anchor = document.createElement(\"a\");\n\n        anchor.download = \"chord_paper_song.json\";\n        if (props.song.title !== \"\") {\n            anchor.download = props.song.title + \".json\";\n        }\n        anchor.href = objectURL;\n        anchor.click();\n\n        URL.revokeObjectURL(objectURL);\n    };\n\n    function pickFileHandler(this: HTMLInputElement) {\n        const fileList = this.files;\n        if (fileList === null) {\n            return;\n        }\n\n        if (fileList.length > 1) {\n            enqueueSnackbar(\"Multiple files selected, only one file expected\", {\n                variant: \"error\",\n            });\n            return;\n        }\n\n        const file = fileList.item(0);\n        if (file === null) {\n            enqueueSnackbar(\"Could not retrieve file from file dialog\", {\n                variant: \"error\",\n            });\n            return;\n        }\n\n        const fileReader = new FileReader();\n        fileReader.onload = (ev: ProgressEvent<FileReader>) => {\n            if (\n                ev.target === null ||\n                ev.target.result === null ||\n                ev.target.result instanceof ArrayBuffer\n            ) {\n                return;\n            }\n\n            const results = ChordSong.deserialize(ev.target.result);\n            if (isLeft(results)) {\n                enqueueSnackbar(\n                    \"Can't load file, Song file failed validation\",\n                    {\n                        variant: \"error\",\n                    }\n                );\n                return;\n            }\n\n            if (props.onLoad) {\n                props.onLoad(results.right);\n            }\n        };\n\n        fileReader.readAsText(file);\n    }\n\n    const loadAction = async () => {\n        const inputElem: HTMLInputElement = document.createElement(\"input\");\n        inputElem.type = \"file\";\n        inputElem.addEventListener(\"change\", pickFileHandler);\n\n        inputElem.click();\n    };\n\n    return (\n        <SpeedDial\n            icon={<SpeedDialIcon />}\n            open={open}\n            onOpen={openMenu}\n            onClose={closeMenu}\n            ariaLabel=\"SpeedDial\"\n        >\n            <SpeedDialAction\n                icon={<SaveIcon />}\n                tooltipTitle=\"Save\"\n                onClick={saveAction}\n            />\n            <SpeedDialAction\n                icon={<FolderOpenIcon />}\n                tooltipTitle=\"Load\"\n                onClick={loadAction}\n            />\n            <SpeedDialAction\n                icon={<NoteAddIcon />}\n                tooltipTitle=\"New Song\"\n                onClick={props.onNewSong}\n            />\n        </SpeedDial>\n    );\n};\n\nexport default ChordPaperMenu;\n","import React, { useState } from \"react\";\nimport { Paper, Theme, withStyles } from \"@material-ui/core\";\nimport ChordPaperBody from \"./ChordPaperBody\";\nimport Header from \"./Header\";\nimport ChordPaperMenu from \"./ChordPaperMenu\";\nimport { ChordSong } from \"../common/ChordModel/ChordSong\";\n\nconst RootPaper = withStyles((theme: Theme) => ({\n    root: {\n        margin: theme.spacing(5),\n        minHeight: theme.spacing(92),\n        minWidth: theme.spacing(92),\n    },\n}))(Paper);\n\ninterface ChordPaperProps {\n    initialSong: ChordSong;\n}\n\nconst ChordPaper: React.FC<ChordPaperProps> = (\n    props: ChordPaperProps\n): JSX.Element => {\n    const [song, setSong] = useState<ChordSong>(props.initialSong);\n\n    const songChangeHandler = (updatedSong: ChordSong) => {\n        setSong(updatedSong.clone());\n    };\n\n    const loadHandler = (loadedSong: ChordSong) => {\n        setSong(loadedSong.clone());\n    };\n\n    const newSongHandler = () => {\n        setSong(new ChordSong());\n    };\n\n    return (\n        <RootPaper elevation={3} data-testid=\"ChordPaper\">\n            <Header\n                data-testid={\"Header\"}\n                song={song}\n                onSongChanged={songChangeHandler}\n            />\n            <ChordPaperBody song={song} onSongChanged={songChangeHandler} />\n            <ChordPaperMenu\n                song={song}\n                onLoad={loadHandler}\n                onNewSong={newSongHandler}\n            />\n        </RootPaper>\n    );\n};\n\nexport default ChordPaper;\n","import { tokenize } from \"./common/LyricTokenizer\";\nimport { ChordSong } from \"./common/ChordModel/ChordSong\";\nimport { ChordLine } from \"./common/ChordModel/ChordLine\";\nimport { ChordBlock } from \"./common/ChordModel/ChordBlock\";\n\nconst lyrics = [\n    \"We're no strangers to love\",\n    \"You know the rules and so do I\",\n    \"A full commitment's what I'm thinking of\",\n    \"You wouldn't get this from any other guy\",\n    \"I just wanna tell you how I'm feeling\",\n    \"Gotta make you understand\",\n    \"Never gonna give you up\",\n    \"Never gonna let you down\",\n    \"Never gonna run around and desert you\",\n    \"Never gonna make you cry\",\n    \"Never gonna say goodbye\",\n    \"Never gonna tell a lie and hurt you\",\n];\n\nconst chords = [\"A\", \"Bb7\", \"Cm\", \"D/C#\", \"Em7\", \"Fmaj7\", \"G^\"];\n\nconst randomChord = (): string => {\n    return chords[Math.floor(Math.random() * chords.length)];\n};\n\nconst chunk = (arr: string, tokenSize: number): string[] => {\n    const tokens = tokenize(arr);\n    const results: string[] = [];\n\n    for (let i = 0; i < tokens.length; i += tokenSize) {\n        const subArr = tokens.slice(i, i + tokenSize);\n        results.push(subArr.join(\"\"));\n    }\n\n    return results;\n};\n\nexport const NeverGonnaGiveYouUp = (): ChordSong => {\n    const chordLines: ChordLine[] = lyrics.map((lyricLine: string) =>\n        assembleLine(lyricLine)\n    );\n\n    return new ChordSong(chordLines);\n};\n\nconst assembleLine = (lyrics: string): ChordLine => {\n    const lyricChunks = chunk(lyrics, 4);\n\n    const chordBlocks: ChordBlock[] = lyricChunks.map((lyricChunk: string) => {\n        return new ChordBlock({\n            chord: randomChord(),\n            lyric: lyricChunk,\n        });\n    });\n\n    return new ChordLine(chordBlocks);\n};\n","import React from \"react\";\nimport { Grid, Typography, Theme, Paper } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/styles\";\n\nconst RootPaper = withStyles((theme: Theme) => ({\n    root: {\n        margin: theme.spacing(5),\n        padding: theme.spacing(5),\n        minHeight: theme.spacing(46),\n        minWidth: theme.spacing(92),\n        position: \"relative\",\n    },\n}))(Paper);\n\nconst ErrorPage: React.FC<{}> = (): JSX.Element => {\n    return (\n        <Grid container data-testid=\"Tutorial\">\n            <Grid item xs={3}></Grid>\n            <Grid item xs={6}>\n                <RootPaper>\n                    <Typography>An Error Occurred Oh No</Typography>\n                </RootPaper>\n            </Grid>\n            <Grid item xs={3}></Grid>\n        </Grid>\n    );\n};\n\nexport default ErrorPage;\n","import { Badge as UnstyledBadge, Paper, withStyles } from \"@material-ui/core\";\nimport green from \"@material-ui/core/colors/green\";\nimport UnstyledCheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport React, { useState } from \"react\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport ChordPaperBody from \"../ChordPaperBody\";\n\nconst CheckCircleIcon = withStyles({\n    root: {\n        color: green[200],\n    },\n})(UnstyledCheckCircleIcon);\n\nconst Badge = withStyles({\n    root: {\n        display: \"inherit\",\n    },\n})(UnstyledBadge);\n\ninterface PlaygroundProps {\n    initialSong: ChordSong;\n    expectedSong?: ChordSong;\n}\n\nconst Playground: React.FC<PlaygroundProps> = (\n    props: PlaygroundProps\n): JSX.Element => {\n    const [song, setSong] = useState<ChordSong>(props.initialSong);\n    const [finish, setFinish] = useState(false);\n\n    const songChangeHandler = (updatedSong: ChordSong) => {\n        console.log(updatedSong);\n        setSong(updatedSong.clone());\n        checkExpected(updatedSong);\n    };\n\n    const checkExpected = (updatedSong: ChordSong) => {\n        // don't undo the green check if it's already been passing\n        if (finish) {\n            return;\n        }\n\n        if (\n            props.expectedSong !== undefined &&\n            props.expectedSong.contentEquals(updatedSong)\n        ) {\n            setFinish(true);\n        }\n    };\n\n    return (\n        <Badge badgeContent={<CheckCircleIcon />} invisible={!finish}>\n            <Paper elevation={1}>\n                <ChordPaperBody song={song} onSongChanged={songChangeHandler} />\n            </Paper>\n        </Badge>\n    );\n};\n\nexport default Playground;\n","import { Theme, Typography } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/styles\";\nimport React from \"react\";\nimport { inflatingWhitespace } from \"../../common/Whitespace\";\nexport const LyricsTypography = withStyles((theme: Theme) => ({\n    root: {\n        color: theme.palette.secondary.light,\n    },\n}))(Typography);\n\nexport const ChordTypography = withStyles((theme: Theme) => ({\n    root: {\n        color: theme.palette.primary.main,\n    },\n}))(Typography);\n\nexport const LineBreak = () => {\n    return <Typography>{inflatingWhitespace()}</Typography>;\n};\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { LineBreak } from \"./Common\";\n\nconst Header = () => {\n    return <Typography variant=\"h5\">Learning Chord Paper</Typography>;\n};\n\nconst Preamble = () => {\n    return (\n        <>\n            <Typography>\n                Chord Paper aims to be as intuitive and handy as possible, but\n                there could still be features that aren't obvious as we work out\n                the kinks. Let's walk through the basics together by making some\n                changes to chords and lyrics!\n            </Typography>\n            <LineBreak />\n            <Typography>\n                Since Chord Paper is still in early stages, some of these could\n                change in the future.\n            </Typography>\n        </>\n    );\n};\n\nconst Starting: React.FC<{}> = (): JSX.Element => {\n    return (\n        <>\n            <Header />\n            <LineBreak />\n            <Preamble />\n        </>\n    );\n};\n\nexport default Starting;\n","import { Fab as UnstyledFab, Paper, Theme } from \"@material-ui/core\";\nimport UnstyledPlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { withStyles } from \"@material-ui/styles\";\nimport React from \"react\";\nimport { Link, Route } from \"react-router-dom\";\nimport ErrorPage from \"../ErrorPage\";\nimport AddChord from \"./AddChord\";\nimport AddLine from \"./AddLine\";\nimport ChordPositioning from \"./ChordPositioning\";\nimport EditChord from \"./EditChord\";\nimport EditLyrics from \"./EditLyrics\";\nimport MergeLine from \"./MergeLine\";\nimport PasteLyrics from \"./PasteLyrics\";\nimport RemoveChord from \"./RemoveChord\";\nimport RemoveLine from \"./RemoveLine\";\nimport Starting from \"./Start\";\n\ntype ExerciseEntry = {\n    title: string;\n    route: string;\n    component: React.FC<{}>;\n};\n\nexport type ExerciseRoute = {\n    title: string;\n    route: string;\n};\n\nconst allExercises: ExerciseEntry[] = [\n    {\n        title: \"Starting\",\n        route: \"/learn/start\",\n        component: Starting,\n    },\n    {\n        title: \"Edit a Chord\",\n        route: \"/learn/edit_chord\",\n        component: EditChord,\n    },\n    {\n        title: \"Remove a Chord\",\n        route: \"/learn/remove_chord\",\n        component: RemoveChord,\n    },\n    {\n        title: \"Add a Chord\",\n        route: \"/learn/add_chord\",\n        component: AddChord,\n    },\n    {\n        title: \"Edit Lyrics\",\n        route: \"/learn/edit_lyrics\",\n        component: EditLyrics,\n    },\n    {\n        title: \"Chord Positioning\",\n        route: \"/learn/chord_positioning\",\n        component: ChordPositioning,\n    },\n    {\n        title: \"Adding New Line\",\n        route: \"/learn/add_line\",\n        component: AddLine,\n    },\n    {\n        title: \"Removing a Line\",\n        route: \"/learn/remove_line\",\n        component: RemoveLine,\n    },\n    {\n        title: \"Pasting Lyrics\",\n        route: \"/learn/paste_lyrics\",\n        component: PasteLyrics,\n    },\n    {\n        title: \"Merging Lines\",\n        route: \"/learn/merge_lines\",\n        component: MergeLine,\n    },\n];\n\nexport const allExerciseRoutes = (): ExerciseRoute[] => {\n    return allExercises.map((entry: ExerciseEntry) => ({\n        title: entry.title,\n        route: entry.route,\n    }));\n};\n\nconst PlayArrowIcon = withStyles({\n    root: {\n        color: \"white\",\n    },\n})(UnstyledPlayArrowIcon);\n\nconst RootPaper = withStyles((theme: Theme) => ({\n    root: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n        padding: theme.spacing(5),\n        minHeight: theme.spacing(46),\n        width: theme.spacing(92),\n        position: \"relative\",\n    },\n}))(Paper);\n\nconst Fab = withStyles((theme: Theme) => ({\n    root: {\n        position: \"absolute\",\n        bottom: theme.spacing(2),\n        right: theme.spacing(2),\n    },\n}))(UnstyledFab);\n\ninterface TutorialProps {\n    route: string;\n}\n\nexport const TutorialSwitches = (): React.ReactElement[] => {\n    return allExercises.map((exerciseEntry: ExerciseEntry) => (\n        <Route exact path={exerciseEntry.route}>\n            <Tutorial route={exerciseEntry.route} />\n        </Route>\n    ));\n};\n\nconst Tutorial: React.FC<TutorialProps> = (\n    props: TutorialProps\n): JSX.Element => {\n    const matchEntry = (entry: ExerciseEntry): boolean => {\n        return entry.route === props.route;\n    };\n\n    const exerciseEntry: ExerciseEntry | undefined = allExercises.find(\n        matchEntry\n    );\n\n    if (exerciseEntry === undefined) {\n        return <ErrorPage />;\n    }\n\n    const exerciseIndex = allExercises.findIndex(matchEntry);\n\n    let nextButton: React.ReactElement | null = null;\n\n    if (exerciseIndex < allExercises.length - 1) {\n        const nextExercise = allExercises[exerciseIndex + 1];\n        nextButton = (\n            <Link to={nextExercise.route}>\n                <Fab color=\"primary\">\n                    <PlayArrowIcon />\n                </Fab>\n            </Link>\n        );\n    }\n\n    return (\n        <RootPaper>\n            <exerciseEntry.component />\n            {nextButton}\n        </RootPaper>\n    );\n};\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { ChordTypography, LineBreak, LyricsTypography } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst EditChord: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly \" }),\n            new ChordBlock({ chord: \"Bm\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly \" }),\n            new ChordBlock({ chord: \"B7\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Editing Chords</Typography>\n            <LineBreak />\n            <Typography>\n                Click on a chord to change it. Let's change the chord above{\" \"}\n                <LyricsTypography display=\"inline\">appear</LyricsTypography>{\" \"}\n                from <ChordTypography display=\"inline\">Bm</ChordTypography> to{\" \"}\n                <ChordTypography display=\"inline\">B7</ChordTypography>.\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default EditChord;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { ChordTypography, LineBreak } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst RemoveChord: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly \" }),\n            new ChordBlock({ chord: \"B7\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why do birds suddenly appear?\",\n            }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Removing Chords</Typography>\n            <LineBreak />\n            <Typography>\n                Simply remove all the chord text when editing to clear the\n                chord. Let's remove the{\" \"}\n                <ChordTypography display=\"inline\">B7</ChordTypography>.\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default RemoveChord;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport Playground from \"./Playground\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { LineBreak, LyricsTypography, ChordTypography } from \"./Common\";\n\nconst AddChord: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why do birds suddenly appear?\",\n            }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why do birds suddenly \",\n            }),\n            new ChordBlock({ chord: \"B7\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Adding Chords</Typography>\n            <LineBreak />\n            <Typography>\n                Add a chord by hovering above a word, and clicking the outlined\n                box. Let's add{\" \"}\n                <ChordTypography display=\"inline\">B7</ChordTypography> back\n                above{\" \"}\n                <LyricsTypography display=\"inline\">appear</LyricsTypography>.\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default AddChord;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { LineBreak, LyricsTypography } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst EditLyrics: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly \" }),\n            new ChordBlock({ chord: \"B7\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why oh why do birds suddenly \",\n            }),\n            new ChordBlock({ chord: \"B7\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Editing Lyrics</Typography>\n            <LineBreak />\n            <Typography>\n                You can edit the lyrics by clicking anywhere along the lyrics.\n                Chord Paper will move chords along with lyrics when you edit\n                them. Let's change the lyrics to:\n            </Typography>\n            <LyricsTypography>\n                Why oh why do birds suddenly appear?\n            </LyricsTypography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default EditLyrics;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport Playground from \"./Playground\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { LineBreak, LyricsTypography, ChordTypography } from \"./Common\";\n\nconst ChordPositioning: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly \" }),\n            new ChordBlock({ chord: \"\", lyric: \"appear?\" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Chord Positioning</Typography>\n            <LineBreak />\n            <Typography>\n                Sometimes you want to emphasize a chord landing on a specific\n                syllable or between words. Without the overhead of standard\n                notation, we can do this by breaking up lyrics and annotating\n                spaces.\n            </Typography>\n            <LineBreak />\n\n            <Typography>Let's change the lyrics to:</Typography>\n            <LyricsTypography>Why do birds suddenly ap-pear?</LyricsTypography>\n            <Typography>\n                And add a space after the{\" \"}\n                <LyricsTypography display=\"inline\">?</LyricsTypography>\n            </Typography>\n            <Typography>\n                Then add{\" \"}\n                <ChordTypography display=\"inline\">B7sus4</ChordTypography> to{\" \"}\n                <LyricsTypography display=\"inline\">pear</LyricsTypography>\n            </Typography>\n            <Typography>\n                And then, also add{\" \"}\n                <ChordTypography display=\"inline\">B7</ChordTypography> to the\n                space after{\" \"}\n                <LyricsTypography display=\"inline\">?</LyricsTypography> (this\n                can be tricky due to the spacing. work in progress)\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default ChordPositioning;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { LineBreak, LyricsTypography } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst AddLine: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n        new ChordLine([\n            new ChordBlock({ chord: \"\", lyric: \"Every time you are near\" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Adding New Lines</Typography>\n            <LineBreak />\n            <Typography>\n                You can add more lines by hovering below (or above) and existing\n                line, and clicking the gray line or the add icon to the right.\n            </Typography>\n            <Typography>Let's add a line, and change the lyrics to:</Typography>\n            <LyricsTypography>Why do birds suddenly appear?</LyricsTypography>\n            <LyricsTypography>Every time you are near</LyricsTypography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default AddLine;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { LineBreak } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst RemoveLine: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n        new ChordLine([\n            new ChordBlock({ chord: \"\", lyric: \"Every time you are near\" }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Removing Lines</Typography>\n            <LineBreak />\n            <Typography>\n                Similarly, you can remove a line by hovering over the line, and\n                clicking the red remove icon to the right. Let's remove the\n                second line of lyrics.\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default RemoveLine;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { LineBreak, LyricsTypography } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst PasteLyrics: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n        new ChordLine(),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({ chord: \"C^\", lyric: \"Why do birds suddenly ap-\" }),\n            new ChordBlock({ chord: \"B7sus4\", lyric: \"pear?\" }),\n            new ChordBlock({ chord: \"B7\", lyric: \" \" }),\n        ]),\n        new ChordLine([\n            new ChordBlock({ chord: \"\", lyric: \"Every time you are near\" }),\n        ]),\n        new ChordLine([\n            new ChordBlock({\n                chord: \"\",\n                lyric: \"Just like me, they long to be\",\n            }),\n        ]),\n        new ChordLine([new ChordBlock({ chord: \"\", lyric: \"Close to you\" })]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Pasting Lyrics</Typography>\n            <LineBreak />\n            <Typography>\n                It would be annoying to have to type out the lyrics. But we can\n                paste it in! Copy these lyrics, click into the second line, and\n                paste:\n            </Typography>\n            <LyricsTypography variantMapping={{ body1: \"div\" }}>\n                Every time you are near\n            </LyricsTypography>\n            <LyricsTypography variantMapping={{ body1: \"div\" }}>\n                Just like me, they long to be\n            </LyricsTypography>\n            <LyricsTypography variantMapping={{ body1: \"div\" }}>\n                Close to you\n            </LyricsTypography>\n\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default PasteLyrics;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { ChordBlock } from \"../../common/ChordModel/ChordBlock\";\nimport { ChordLine } from \"../../common/ChordModel/ChordLine\";\nimport { ChordSong } from \"../../common/ChordModel/ChordSong\";\nimport { LineBreak } from \"./Common\";\nimport Playground from \"./Playground\";\n\nconst MergeLine: React.FC<{}> = (): JSX.Element => {\n    const initialSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why do birds\",\n            }),\n        ]),\n        new ChordLine([\n            new ChordBlock({\n                chord: \"\",\n                lyric: \"suddenly \",\n            }),\n            new ChordBlock({\n                chord: \"B7\",\n                lyric: \"appear?\",\n            }),\n        ]),\n    ]);\n\n    const expectedSong = new ChordSong([\n        new ChordLine([\n            new ChordBlock({\n                chord: \"C^\",\n                lyric: \"Why do birds suddenly \",\n            }),\n            new ChordBlock({\n                chord: \"B7\",\n                lyric: \"appear?\",\n            }),\n        ]),\n    ]);\n\n    return (\n        <>\n            <Typography variant=\"h6\">Merging Lines</Typography>\n            <LineBreak />\n            <Typography>\n                Sometimes the lyrics that we paste in is not the division we\n                want. Let's merge the two lines. Click into the second line,\n                move the cursor to the beginning of the line, and press\n            </Typography>\n            <Typography>\n                (CTRL+Backspace : Windows | CMD+Backspace : Mac)\n            </Typography>\n            <LineBreak />\n            <Typography>Try it!</Typography>\n            <Playground initialSong={initialSong} expectedSong={expectedSong} />\n        </>\n    );\n};\n\nexport default MergeLine;\n","import React, { useState } from \"react\";\nimport {\n    Drawer,\n    Divider,\n    List,\n    ListItem,\n    ListItemText,\n    Typography,\n    Theme,\n    Collapse,\n    ListItemIcon,\n} from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport MusicNoteIcon from \"@material-ui/icons/MusicNote\";\nimport PetsIcon from \"@material-ui/icons/Pets\";\nimport FreeBreakfastIcon from \"@material-ui/icons/FreeBreakfast\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\n\nimport { withStyles } from \"@material-ui/styles\";\nimport grey from \"@material-ui/core/colors/grey\";\nimport { allExerciseRoutes, ExerciseRoute } from \"./tutorial/Tutorial\";\n\nconst TitleName = withStyles((theme: Theme) => ({\n    root: {\n        padding: theme.spacing(3),\n        color: grey[600],\n    },\n}))(Typography);\n\nconst SideMenu: React.FC<{}> = (): JSX.Element => {\n    const [learnSubmenuOpen, setLearnSubMenuOpen] = useState(false);\n\n    const typographyProps = {\n        variant: \"h6\" as \"h6\",\n    };\n\n    const linkStyle = {\n        textDecoration: \"none\",\n        color: \"inherit\",\n    };\n\n    const learnClickHandler = () => {\n        setLearnSubMenuOpen(!learnSubmenuOpen);\n    };\n\n    const tutorialMenu = () => {\n        const exerciseLinks = allExerciseRoutes().map(\n            (exerciseRoute: ExerciseRoute) => {\n                return (\n                    <Link to={exerciseRoute.route} style={linkStyle}>\n                        <ListItem button>\n                            <ListItemText inset primary={exerciseRoute.title} />\n                        </ListItem>\n                    </Link>\n                );\n            }\n        );\n\n        return (\n            <>\n                <ListItem key=\"Learn\" button onClick={learnClickHandler}>\n                    <ListItemIcon>\n                        <FreeBreakfastIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary=\"Learn\"\n                        primaryTypographyProps={typographyProps}\n                    />\n                    {learnSubmenuOpen ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </ListItem>\n                <Collapse in={learnSubmenuOpen} timeout=\"auto\">\n                    <List>{exerciseLinks}</List>\n                </Collapse>\n            </>\n        );\n    };\n\n    return (\n        <Drawer variant=\"permanent\" anchor=\"left\">\n            <Link to=\"/\" style={linkStyle} data-testid=\"Menu-TitleButton\">\n                <TitleName variant=\"h5\">Chord Paper</TitleName>\n            </Link>\n            <Divider />\n            <List>\n                <Link to=\"/\" style={linkStyle} data-testid=\"Menu-HomeButton\">\n                    <ListItem key=\"Music\" button>\n                        <ListItemIcon>\n                            <MusicNoteIcon />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary=\"Music\"\n                            primaryTypographyProps={typographyProps}\n                        />\n                    </ListItem>\n                </Link>\n                {tutorialMenu()}\n                <Link\n                    to=\"/about\"\n                    style={linkStyle}\n                    data-testid=\"Menu-AboutButton\"\n                >\n                    <ListItem key=\"About\" button>\n                        <ListItemIcon>\n                            <PetsIcon />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary=\"About\"\n                            primaryTypographyProps={typographyProps}\n                        />\n                    </ListItem>\n                </Link>\n            </List>\n        </Drawer>\n    );\n};\n\nexport default SideMenu;\n","import React from \"react\";\nimport { Paper, Typography, Theme, Grid } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/styles\";\nimport { inflatingWhitespace } from \"../../common/Whitespace\";\n\nconst RootPaper = withStyles((theme: Theme) => ({\n    root: {\n        margin: theme.spacing(5),\n        padding: theme.spacing(5),\n        minHeight: theme.spacing(46),\n        minWidth: theme.spacing(92),\n    },\n}))(Paper);\n\nconst About: React.FC<{}> = (): JSX.Element => {\n    return (\n        <Grid container data-testid=\"About\">\n            <Grid item xs={3}></Grid>\n            <Grid item xs={6}>\n                <RootPaper>\n                    <Typography variant=\"h6\">About Chord Paper</Typography>\n                    <Typography variant=\"h6\">\n                        {inflatingWhitespace()}\n                    </Typography>\n                    <Typography>\n                        Chord Paper makes writing and reading chord sheets\n                        easier than the traditional monospace font formatting.\n                        It's a passion project born out of frustration at the\n                        clunkiness of writing chords on a computer.\n                    </Typography>\n                    <Typography>{inflatingWhitespace()}</Typography>\n                    <Typography>\n                        Hope you will find that Chord Paper helps you focus more\n                        of your musical time on playing and listening, and less\n                        on formatting.\n                    </Typography>\n                </RootPaper>\n            </Grid>\n            <Grid item xs={3}></Grid>\n        </Grid>\n    );\n};\n\nexport default About;\n","import React from \"react\";\nimport {\n    Theme,\n    ThemeProvider,\n    createMuiTheme,\n    PaletteColorOptions,\n    Grid,\n} from \"@material-ui/core\";\nimport ChordPaper from \"./components/ChordPaper\";\nimport { SnackbarProvider } from \"notistack\";\nimport { NeverGonnaGiveYouUp } from \"./NeverGonnaGiveYouUp\";\nimport { withStyles } from \"@material-ui/styles\";\nimport WoodBackground from \"./assets/img/symphony.png\";\nimport SideMenu from \"./components/SideMenu\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport About from \"./components/about/About\";\nimport { TutorialSwitches } from \"./components/tutorial/Tutorial\";\n\nconst createTheme = (): Theme => {\n    const lightBlue: PaletteColorOptions = {\n        main: \"#4fc3f7\",\n        light: \"#8bf6ff\",\n        dark: \"#0093c4\",\n        contrastText: \"#000000\",\n    };\n\n    const purple: PaletteColorOptions = {\n        main: \"#844ffc\",\n        light: \"#bb7eff\",\n        dark: \"#4a1fc8\",\n        contrastText: \"#ffffff\",\n    };\n\n    return createMuiTheme({\n        palette: {\n            primary: lightBlue,\n            secondary: purple,\n        },\n        typography: {\n            fontFamily: \"Merriweather\",\n            fontWeightRegular: 300,\n        },\n    });\n};\n\nconst AppLayout = withStyles({\n    root: {\n        backgroundImage: `url(${WoodBackground})`,\n        minHeight: \"100vh\",\n    },\n})(Grid);\n\nfunction App() {\n    const theme: Theme = createTheme();\n\n    const routeSwitches = (\n        <Switch>\n            <Route exact path=\"/\">\n                <ChordPaper initialSong={NeverGonnaGiveYouUp()} />\n            </Route>\n            {TutorialSwitches()}\n            <Route exact path=\"/about\">\n                <About />\n            </Route>\n        </Switch>\n    );\n\n    return (\n        <ThemeProvider theme={theme}>\n            <SnackbarProvider>\n                <HashRouter>\n                    <SideMenu />\n                    <AppLayout container justify=\"center\">\n                        <Grid item>{routeSwitches}</Grid>\n                    </AppLayout>\n                </HashRouter>\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}