(this["webpackJsonpchord-paper-fe"]=this["webpackJsonpchord-paper-fe"]||[]).push([[0],{380:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var r,i,a,c=n(11),o=n(42),s=n(201),l=n(476),u=n(26),d=n(18),b=n(126),h=n(5),j=n(6),f=n(7),p=n(2),O=n(3),v=n(21),m=n(22),g=n(51),y=n.n(g),x=n(97),w=n.n(x),k=n(38),C=n(8),S=n(433),L=n(1),T=n.n(L),I=n(0),B="data-lyrictabtype";!function(e){e[e.SmallTab=0]="SmallTab",e[e.MediumTab=1]="MediumTab",e[e.LargeTab=2]="LargeTab"}(a||(a={}));var E=[Object(C.a)({sizedTab:a.SmallTab,serializedStr:"\ue100"},B,"1"),Object(C.a)({sizedTab:a.MediumTab,serializedStr:"\ue200"},B,"2"),Object(C.a)({sizedTab:a.LargeTab,serializedStr:"\ue400"},B,"4")],D=function(e,t){var n=E.find((function(n){return n[e]===t}));if(void 0===n)throw new Error("Unexpectedly can't find tab type by ".concat(e));return n},R=function(e,t){return void 0!==E.find((function(n){return n[e]===t}))},A=function(e){if(e instanceof HTMLElement&&"span"===e.tagName.toLowerCase()){var t=e.dataset.lyrictabtype;if(R(B,t))return D(B,t).sizedTab}return null},P=function(e){return{display:"inline-block",width:"".concat(1.5*e,"em")}},F=function(e){var t=P(e);return Object(f.a)({backgroundColor:S.a[100],"&:before":{content:'"\\a0"'}},t)},N=(r={},Object(C.a)(r,a.SmallTab,Object(o.b)(Object(o.a)(P(1)))),Object(C.a)(r,a.MediumTab,Object(o.b)(Object(o.a)(P(2)))),Object(C.a)(r,a.LargeTab,Object(o.b)(Object(o.a)(P(4)))),r),V=(i={},Object(C.a)(i,a.SmallTab,Object(o.b)(Object(o.a)(F(1)))),Object(C.a)(i,a.MediumTab,Object(o.b)(Object(o.a)(F(2)))),Object(C.a)(i,a.LargeTab,Object(o.b)(Object(o.a)(F(4)))),i),M=function(e){var t=e.edit?V:N,n=D("sizedTab",e.type);return Object(I.jsx)("span",{className:t[e.type],contentEditable:"false","data-lyrictabtype":n["data-lyrictabtype"]})},_=function(e){return/^\s+$/.test(e)},U=function(e){return _(e)?"\xa0":e},z=m.k({serializedLyric:m.i}),K=function(){var e,t="",n=Object(u.a)(E);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+="(".concat(r.serializedStr,")|")}}catch(i){n.e(i)}finally{n.f()}return t="(".concat(t+="(\\w|')+|[^w]",")"),new RegExp(t,"g")}(),W=function(){function e(t){Object(p.a)(this,e),this.serializedLyric=void 0,this.serializedLyric=t}return Object(O.a)(e,[{key:"get",value:function(e){return e(this.serializedLyric)}},{key:"tokenize",value:function(){var t=this.serializedLyric.match(K);if(null===t)return Object(k.a)();var n=t.map((function(t){return new e(t)}));return Object(k.a)(n)}},{key:"append",value:function(t){return new e("string"===typeof t?this.serializedLyric+t:this.serializedLyric+t.serializedLyric)}},{key:"isEmpty",value:function(){return""===this.serializedLyric}},{key:"isEntirelySpaceOrTab",value:function(){return this.isEntirelySpace()||R("serializedStr",this.serializedLyric)}},{key:"isEntirelySpace",value:function(){return _(this.serializedLyric)}},{key:"isEqual",value:function(e){return this.serializedLyric===e.serializedLyric}}],[{key:"join",value:function(t,n){return new e(t.map((function(e){return e.serializedLyric})).join(n))}},{key:"fromValidatedFields",value:function(t){return new e(t.serializedLyric)}}]),e}(),G=m.k({chord:m.i,lyric:z,type:m.e("ChordBlock")}),J={id:"",chord:"",lyric:new W(""),type:"ChordBlock"},q=Object(k.b)(J),H=function(){function e(t){if(Object(p.a)(this,e),this.record=void 0,e.isChordBlockRecord(t))this.record=t;else{var n=t.chord,r=t.lyric;this.record=new q({id:w.a.generate(),chord:n,lyric:r,type:"ChordBlock"})}}return Object(O.a)(e,[{key:"id",get:function(){return this.record.id}},{key:"lyric",get:function(){return this.record.lyric}},{key:"chord",get:function(){return this.record.chord}},{key:"type",get:function(){return this.record.type}},{key:"new",value:function(t){return t===this.record?this:new e(t)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"toJSON",value:function(){var e=this.record.toJS();return y.a.omit(e,"id")}},{key:"lyricTokens",get:function(){return this.lyric.tokenize()}},{key:"splitByTokenIndex",value:function(t){if(0===t)throw new Error("Split index can't be zero");var n=this.lyricTokens,r=n.slice(0,t),i=n.slice(t);return[new e({chord:this.chord,lyric:W.join(r,"")}),this.set("chord","").set("lyric",W.join(i,""))]}},{key:"splitByCharIndex",value:function(t){if(0===t)return[new e({chord:"",lyric:new W("")}),this];var n=this.lyric.get((function(e){return e})),r=new W(n.slice(0,t)),i=new W(n.slice(t));return[new e({chord:this.chord,lyric:r}),this.set("chord","").set("lyric",i)]}},{key:"contentEquals",value:function(e){return this.chord===e.chord&&this.lyric.isEqual(e.lyric)}},{key:"isEmpty",value:function(){return""===this.chord&&this.lyric.isEmpty()}},{key:"lyricLength",value:function(){return this.lyric.get((function(e){return e})).length}}],[{key:"isChordBlockRecord",value:function(e){return k.b.isRecord(e)}},{key:"fromValidatedFields",value:function(t){var n=t.lyric,r=W.fromValidatedFields(n);return new e({chord:t.chord,lyric:r})}},{key:"deserialize",value:function(t){var n=Object(v.parseJSON)(t,(function(){return new Error("Failed to parse json string")}));if(Object(v.isLeft)(n))return n;var r=n.right,i=G.decode(r);if(Object(v.isLeft)(i))return Object(v.left)(new Error("Invalid Chord Block object"));var a=i.right.lyric,c=W.fromValidatedFields(a);return Object(v.right)(new e({chord:i.right.chord,lyric:c}))}}]),e}(),Y=n(142),X=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"getElement",value:function(){var e;return(e=this.elements).get.apply(e,arguments)}},{key:"getElementAtIndex",value:function(){var e;return(e=this.elements).getAtIndex.apply(e,arguments)}},{key:"setElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.set.apply(e,t)}))}},{key:"replaceElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.replace.apply(e,t)}))}},{key:"removeElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.remove.apply(e,t)}))}},{key:"removeMultipleElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.removeMultiple.apply(e,t)}))}},{key:"updateElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.update.apply(e,t)}))}},{key:"updateAllElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.updateAll.apply(e,t)}))}},{key:"addBeginning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.addBeginning.apply(e,t)}))}},{key:"addAfter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.updateCollection((function(e){return e.addAfter.apply(e,t)}))}}]),e}(),Q=function(){function e(t){Object(p.a)(this,e),this.list=void 0,void 0!==t?k.a.isList(t)?this.list=t:this.list=k.a.of.apply(k.a,Object(d.a)(t)):this.list=Object(k.a)()}return Object(O.a)(e,[{key:"toJSON",value:function(){return this.list.toJSON()}},{key:"new",value:function(t){return t===this.list?this:new e(t)}},{key:"length",get:function(){return this.list.size}},{key:"toArray",value:function(){return this.list.toArray()}},{key:"transform",value:function(e){var t=e(this.list);return this.new(t)}},{key:"indexOf",value:function(t){return e.indexOf(this.list,t)}},{key:"multiIndexOf",value:function(e){return e.map(this.indexOf)}},{key:"set",value:function(){var e,t=(e=this.list).set.apply(e,arguments);return this.new(t)}},{key:"update",value:function(e,t){var n=this.list.update(e,(function(e){if(void 0===e)throw new Error("Can't have undefined indices");return t(e)}));return this.new(n)}},{key:"updateAll",value:function(e){var t=this.list.withMutations((function(t){for(var n=function(n){t.update(n,(function(t){return function(t,n){if(void 0===t)throw new Error("Can't have undefined indices");return e(t,n)}(t,n)}))},r=0;r<t.size;r++)n(r)}));return this.new(t)}},{key:"addAfter",value:function(e){for(var t,n=this.indexOf(e.id),r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var c=(t=this.list).splice.apply(t,[n+1,0].concat(i));return this.new(c)}},{key:"addBeginning",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=(e=this.list).splice.apply(e,[0,0].concat(n));return this.new(i)}},{key:"remove",value:function(e){var t=this.indexOf(e.id),n=this.list.splice(t,1);return this.new(n)}},{key:"removeMultiple",value:function(t){var n=this.list;return t.forEach((function(t){var r=e.indexOf(n,t.id);n=n.delete(r)})),this.new(n)}},{key:"splice",value:function(e,t){for(var n,r=this.indexOf(e.id),i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var o=(n=this.list).splice.apply(n,[r,t].concat(a));return this.new(o)}},{key:"replace",value:function(e,t){var n=this.indexOf(e.id),r=this.list.update(n,(function(e){if(void 0===e)throw new Error("Item can't be undefined because index is valid");return t(e)}));return this.new(r)}},{key:"forEach",value:function(){var e;(e=this.list).forEach.apply(e,arguments)}},{key:"get",value:function(e){var t=this.indexOf(e.id),n=this.list.get(t);if(void 0===n)throw new Error("Index found but item not in list");return n}},{key:"getAtIndex",value:function(e){var t=this.list.get(e);if(void 0===t)throw new Error("Item not in list");return t}}],[{key:"indexOf",value:function(e,t){var n=e.findIndex((function(e){return e.id===t}));if(n<0)throw new Error("Can't find element inside collection");return n}}]),e}(),Z=function(){var e=new Y.DiffMatchPatch;return e.diffTimeout=0,e.matchThreshold=0,e}(),$=function(e){return e},ee=function(){function e(t){Object(p.a)(this,e),this.chordLine=void 0,this.currBlockIndex=void 0,this.currCharIndex=void 0,this.blockBuffer=void 0,this.prependLyrics=void 0,this.chordLine=t,this.currBlockIndex=0,this.currCharIndex=0,this.blockBuffer=t.chordBlocks.list.map((function(){return""})).toArray(),this.prependLyrics=""}return Object(O.a)(e,[{key:"atBlockBoundary",value:function(){return 0===this.currCharIndex}},{key:"currentBlock",value:function(){return this.chordLine.getElementAtIndex(this.currBlockIndex)}},{key:"currentRawLyrics",value:function(){return this.currentBlock().lyric.get($)}},{key:"currentChar",value:function(){return this.currentRawLyrics().charAt(this.currCharIndex)}},{key:"nextChar",value:function(){this.currCharIndex+=1,this.currCharIndex>=this.currentRawLyrics().length&&(this.currBlockIndex+=1,this.currCharIndex=0)}},{key:"skip",value:function(e){if(this.currentChar()!==e)throw new Error("Mismatched characters when skipping");this.blockBuffer[this.currBlockIndex]+=e,this.nextChar()}},{key:"insert",value:function(e){if(this.atBlockBoundary()){var t=this.currBlockIndex-1;t>=0?this.blockBuffer[t]+=e:this.prependLyrics+=e}else this.blockBuffer[this.currBlockIndex]+=e}},{key:"delete",value:function(e){if(this.currentChar()!==e)throw new Error("Mismatched characters when deleting");this.nextChar()}},{key:"finish",value:function(){var e=this;return this.chordLine=this.chordLine.updateAllElements((function(t,n){var r=new W(e.blockBuffer[n]);return t.set("lyric",r)})),""!==this.prependLyrics&&(this.chordLine=this.chordLine.addBeginning(new H({chord:"",lyric:new W(this.prependLyrics)}))),this.chordLine.normalizeBlocks()}}]),e}(),te=D("sizedTab",a.SmallTab).serializedStr,ne=function(e,t){var n=e.lyrics.get($),r=t.get($),i=Z.diff_main(n,r);Z.diff_cleanupSemanticLossless(i);var a,c=new ee(e),o=Object(u.a)(i);try{for(o.s();!(a=o.n()).done;){var s,l=a.value,d=l[0],b=Object(u.a)(l[1]);try{for(b.s();!(s=b.n()).done;){var h=s.value;switch(d){case Y.DiffOperation.DIFF_EQUAL:c.skip(h);break;case Y.DiffOperation.DIFF_INSERT:c.insert(h);break;case Y.DiffOperation.DIFF_DELETE:c.delete(h)}}}catch(j){b.e(j)}finally{b.f()}}}catch(j){o.e(j)}finally{o.f()}return e=function(e){return e.updateAllElements((function(e){return e.lyric.isEmpty()?e.set("lyric",new W(te)):e}))}(e=function(e){var t,n=[],r=Object(u.a)(e.chordBlocks.toArray());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.lyric.isEmpty()&&""===i.chord||n.push(i)}}catch(j){r.e(j)}finally{r.f()}return e.updateCollection((function(){return new Q(n)}))}(e=c.finish()))},re=m.k({elements:m.b(G),type:m.e("ChordLine")}),ie=m.k({type:m.e("label"),name:m.i}),ae=m.k({type:m.e("time"),name:m.i,time:m.g}),ce=m.l([ie,ae]),oe=m.h({label:m.i,section:ce}),se=m.d([re,oe]),le={id:"",section:void 0,elements:new Q,type:"ChordLine"},ue=Object(k.b)(le),de=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r,i;return Object(p.a)(this,n),(r=t.call(this)).record=void 0,n.isChordLineRecord(e)?(r.record=e,Object(b.a)(r)):(i=void 0===e.blocks?new Q([new H({chord:"",lyric:new W("")})]):e.blocks instanceof Q?e.blocks:new Q(e.blocks),r.record=ue({id:w.a.generate(),type:"ChordLine",section:e.section,elements:i}),r)}return Object(O.a)(n,[{key:"toJSON",value:function(){var e=this.record.toJSON();return y.a.omit(e,"id")}},{key:"forCopying",value:function(){return this.set("section",void 0)}},{key:"new",value:function(e){return e===this.record?this:new n(e)}},{key:"id",get:function(){return this.record.id}},{key:"type",get:function(){return this.record.type}},{key:"section",get:function(){return this.record.section}},{key:"elements",get:function(){return this.record.elements}},{key:"updateCollection",value:function(e){return this.update("elements",e)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"chordBlocks",get:function(){return this.elements}},{key:"lyrics",get:function(){var e=this.chordBlocks.list.map((function(e){return e.lyric}));return W.join(e,"")}},{key:"replaceLyrics",value:function(e){return this.lyrics.isEqual(e)?this:ne(this,e)}},{key:"setChord",value:function(e,t){return this.replaceElement(e,(function(e){return e.set("chord",t)})).normalizeBlocks()}},{key:"removeSectionName",value:function(){return void 0===this.section?[this,!1]:[this.set("section",void 0),!0]}},{key:"setSectionName",value:function(e){return""===e?this.removeSectionName():void 0===this.section?[this.set("section",{type:"label",name:e}),!0]:[this.update("section",(function(t){if(void 0===t)throw new Error("Impossible");return Object(f.a)(Object(f.a)({},t),{},{name:e})})),!0]}},{key:"removeSectionTime",value:function(){return void 0===this.section?[this,!1]:[this.set("section",{type:"label",name:this.section.name}),!0]}},{key:"setSectionTime",value:function(e){if(null===e)return this.removeSectionTime();var t=void 0!==this.section?this.section.name:"";return[this.set("section",{type:"time",name:t,time:e}),!0]}},{key:"splitBlock",value:function(e,t){var n=this.elements.get(e).splitByTokenIndex(t),r=Object(c.a)(n,2),i=r[0],a=r[1];return this.updateCollection((function(t){return t.splice(e,1,i,a)}))}},{key:"splitByCharIndex",value:function(e){var t=this;if(0===e){var r=new n({blocks:this.chordBlocks});return[this.updateCollection((function(){return new Q([new H({chord:"",lyric:new W("")})])})),r]}var i=this.lyrics.get((function(e){return e})).length;if(e>=i)return[this,new n({})];var a=function(){for(var n=e,r=0;r<t.elements.length;r++){var i=t.elements.getAtIndex(r).lyricLength();if(!(n-i>=0))return[n,r];n-=i}throw new Error("Unexpected: shouldn't have walked this many characters")}(),o=Object(c.a)(a,2),s=o[0],l=o[1],u=this.elements.transform((function(e){return e.slice(0,l)})),b=new Q;if(s>0){var h=this.elements.getAtIndex(l).splitByCharIndex(s),j=Object(c.a)(h,2),f=j[0],p=j[1];u=u.transform((function(e){return e.push(f)})),b=b.transform((function(e){return e.push(p)}));var O=this.elements.transform((function(e){return e.slice(l+1)}));b=b.transform((function(e){return e.push.apply(e,Object(d.a)(O.toArray()))}))}else b=this.elements.transform((function(e){return e.slice(l)}));return[this.set("elements",u),new n({blocks:b})]}},{key:"normalizeBlocks",value:function(){var e=[];return this.elements.forEach((function(t){var n=e.length>0;if(""===t.chord&&n){var r=e.length-1;e[r]=e[r].update("lyric",(function(e){return e.append(t.lyric)}))}else e.push(t)})),e.length===this.elements.length?this:this.set("elements",new Q(e))}},{key:"contentEquals",value:function(e){if(this.chordBlocks.length!==e.chordBlocks.length)return!1;if(!y.a.isEqual(this.section,e.section))return!1;var t=!0;return this.chordBlocks.forEach((function(n,r){var i=e.chordBlocks.getAtIndex(r);if(!n.contentEquals(i))return t=!1,!1})),t}},{key:"isEmpty",value:function(){return!(this.chordBlocks.length>1)&&(0===this.chordBlocks.length||this.chordBlocks.getAtIndex(0).isEmpty())}},{key:"isSectionHead",value:function(){return void 0!==this.section}}],[{key:"isChordLineRecord",value:function(e){return k.b.isRecord(e)}},{key:"sectionFromLabel",value:function(e){if(void 0!==e)return{type:"label",name:e}}},{key:"fromValidatedFields",value:function(e){var t=e.elements.map((function(e){return H.fromValidatedFields(e)})),r=e.section;return void 0===r&&(r=this.sectionFromLabel(e.label)),new n({blocks:new Q(t),section:r})}},{key:"deserialize",value:function(e){var t=Object(v.parseJSON)(e,(function(){return new Error("Failed to parse json string")}));if(Object(v.isLeft)(t))return t;var n=t.right,r=se.decode(n);return Object(v.isLeft)(r)?Object(v.left)(new Error("Invalid Chord Line object")):Object(v.right)(this.fromValidatedFields(r.right))}},{key:"fromLyrics",value:function(e){var t=new H({chord:"",lyric:e});return new n({blocks:new Q([t])})}}]),n}(X);function be(e,t){return he(e,(function(e,n){return t(n)}))}function he(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=t(i,r)}return n}var je=function(e){if(-1===e)throw new Error("Thing that should be found is not found")},fe=function(e){if(e%1!==0)throw new Error("input isn't a whole number!")},pe=function(e,t){return(e%t+t)%t},Oe=function(e){return fe(e),pe(e,12)},ve={C:void 0,Cb:void 0,"C#":void 0,D:void 0,Db:void 0,"D#":void 0,E:void 0,Eb:void 0,"E#":void 0,F:void 0,Fb:void 0,"F#":void 0,G:void 0,Gb:void 0,"G#":void 0,A:void 0,Ab:void 0,"A#":void 0,B:void 0,Bb:void 0,"B#":void 0},me=["C","D","E","F","G","A","B"],ge=[["C","B#"],["Db","C#"],["D"],["Eb","D#"],["E","Fb"],["F","E#"],["Gb","F#"],["G"],["Ab","G#"],["A"],["Bb","A#"],["B","Cb"]],ye=function(e){var t=e.charAt(0);if(!me.includes(t))throw new Error("Note letter reduction function failed");return t},xe=function(){function e(t){var n=this;Object(p.a)(this,e),this.note=void 0,this.chromaticNoteIndex=void 0,this.noteLetter=void 0,this.noteLetterIndex=void 0,this.note=t;var r=ge.findIndex((function(e){return e.includes(n.note)}));je(r),this.chromaticNoteIndex=r,this.noteLetter=ye(t);var i=me.findIndex((function(e){return e===n.noteLetter}));je(i),this.noteLetterIndex=i}return Object(O.a)(e,[{key:"semitonesUp",value:function(e){var t=(this.chromaticNoteIndex+e)%ge.length;return ge[t]}},{key:"semitonesBetween",value:function(e){var t=ge.findIndex((function(t){return t.includes(e)}));return je(t),Oe(t-this.chromaticNoteIndex)}},{key:"isEnharmonicTo",value:function(e){return 0===this.semitonesBetween(e)}},{key:"noteNameFrom",value:function(e){var t=(this.noteLetterIndex+e)%me.length;return me[t]}},{key:"degreesBetween",value:function(e){var t,n=ye(e),r=me.findIndex((function(e){return e===n}));return je(r),t=r-this.noteLetterIndex,fe(t),pe(t,7)}}]),e}(),we=be(ve,(function(e){return new xe(e)})),ke=function(){function e(t){Object(p.a)(this,e),this.interval=void 0,this.interval=t}return Object(O.a)(e,[{key:"semitones",get:function(){var e=Fe(this.interval),t=Ce[e];return Ve.minor(this.interval)?t-=1:Ve.augmented(this.interval)?t+=1:Ve.doubleAugmented(this.interval)?t+=2:Ve.tripleAugmented(this.interval)?t+=3:Ve.diminished(this.interval)?t-=2:Ve.doubleDiminished(this.interval)&&(t-=3),Oe(t)}},{key:"degree",get:function(){var e=Fe(this.interval);return Le[e]}}]),e}(),Ce={1:0,2:2,3:4,4:5,5:7,6:9,7:11},Se=function(e){var t;for(t in Le)if(Le[t]===e)return t;throw new Error("Invalid number distance passed in")},Le={1:0,2:1,3:2,4:3,5:4,6:5,7:6},Te={1:void 0,2:void 0,3:void 0,4:void 0,5:void 0,6:void 0,7:void 0},Ie={b1:void 0,b2:void 0,b3:void 0,b4:void 0,b5:void 0,b6:void 0,b7:void 0},Be={"#1":void 0,"#2":void 0,"#3":void 0,"#4":void 0,"#5":void 0,"#6":void 0,"#7":void 0},Ee={"##1":void 0,"##2":void 0,"##3":void 0,"##4":void 0,"##5":void 0,"##6":void 0,"##7":void 0},De={"###4":void 0},Re={bb1:void 0,bb2:void 0,bb3:void 0,bb4:void 0,bb5:void 0,bb6:void 0,bb7:void 0},Ae={bbb2:void 0,bbb3:void 0,bbb5:void 0,bbb6:void 0,bbb7:void 0},Pe=Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)({},Te),Ie),Be),Re),Ee),Ae),De),Fe=(be(Pe,(function(e){return new ke(e)})),function(e){return e.charAt(e.length-1)}),Ne=function(e,t){for(var n in t)if(n===e)return!0;return!1},Ve={minor:function(e){return Ne(e,Ie)},augmented:function(e){return Ne(e,Be)},diminished:function(e){return Ne(e,Re)},doubleAugmented:function(e){return Ne(e,Ee)},doubleDiminished:function(e){return Ne(e,Ae)},tripleAugmented:function(e){return Ne(e,De)}},Me=function(e,t){var n,r=new ke(t),i=r.semitones,a=r.degree,c=we[e],o=c.semitonesUp(i),s=c.noteNameFrom(a),l=Object(u.a)(o);try{for(l.s();!(n=l.n()).done;){var d=n.value;if(ye(d)===s)return d}}catch(b){l.e(b)}finally{l.f()}return o[0]},_e=function(e,t){var n=we[e];return function(e,t){var n=Se(t),r=Ce[n],i=Oe(e-r);if(i===Oe(0))return n;if(i===Oe(1))return"#".concat(n);if(i===Oe(2))return"##".concat(n);if("4"===n&&i===Oe(3))return"###".concat(n);if(i===Oe(-1))return"b".concat(n);if(i===Oe(-2))return"bb".concat(n);if(("2"===n||"3"===n||"5"===n||"6"===n||"7"===n)&&i===Oe(-3))return"bbb".concat(n);throw new Error("No matching interval for semitone and number distance")}(n.semitonesBetween(t),n.degreesBetween(t))},Ue=be(ve,(function(e){return function(e){return be(Pe,(function(t){return Me(e,t)}))}(e)})),ze=be(ve,(function(e){return function(e){return be(ve,(function(t){return _e(e,t)}))}(e)})),Ke=function(e,t,n){var r,i=[];for(r in ve)e.startsWith(r)&&i.push(r);if(0===i.length)return e;for(var a=i[0],c=0,o=i;c<o.length;c++){var s=o[c];s.length>a.length&&(a=s)}var l=function(e,t,n){var r=ze[t][e];return Ue[n][r]}(a,t,n);return e.replace(a,l)},We=function(e,t,n){var r=function(e){return""===e.chord?e:e.update("chord",(function(e){return function(e,t,n){var r=null,i=e;if(e.includes("/")){var a=e.split("/");i=a[0],r=a.slice(1).join("/")}return i=Ke(i,t,n),null===r?i:i+"/"+(r=Ke(r,t,n))}(e,t,n)}))};return e.updateAllElements((function(e){return e.updateAllElements((function(e){return r(e)}))}))},Ge=n(227),Je=n(434),qe=m.k({title:m.i,composedBy:m.i,performedBy:m.i}),He=m.l([m.e("C"),m.e("C#"),m.e("Cb"),m.e("D"),m.e("D#"),m.e("Db"),m.e("E"),m.e("E#"),m.e("Eb"),m.e("F"),m.e("F#"),m.e("Fb"),m.e("G"),m.e("G#"),m.e("Gb"),m.e("A"),m.e("A#"),m.e("Ab"),m.e("B"),m.e("B#"),m.e("Bb")]),Ye=m.h({originalKey:He,currentKey:He}),Xe=m.d([qe,Ye]),Qe={id:m.i,owner:m.i,lastSavedAt:m.l([Je.a,m.f]),metadata:Xe},Ze=m.k(Qe),$e=m.b(Ze),et=function(){function e(t){if(Object(p.a)(this,e),this.id=void 0,this.owner=void 0,this.lastSavedAt=void 0,this.metadata=void 0,void 0===t)return this.id="",this.owner="",this.metadata={title:"",composedBy:"",performedBy:"",originalKey:void 0,currentKey:void 0},void(this.lastSavedAt=null);this.id=t.id,this.owner=t.owner,this.metadata=t.metadata,this.lastSavedAt=t.lastSavedAt}return Object(O.a)(e,null,[{key:"fromJSONObject",value:function(t){var n=Ze.decode(t);return Object(v.isLeft)(n)?Object(v.left)(new Error("Invalid Song Summary object")):Object(v.right)(new e(Object(f.a)({},n.right)))}},{key:"fromJSONList",value:function(t){var n=$e.decode(t);if(Object(v.isLeft)(n))return Object(v.left)(new Error("Invalid Song Summary list"));var r=n.right.map((function(t){return new e(Object(f.a)({},t))}));return Object(v.right)(r)}}]),e}(),tt=m.k(Object(f.a)(Object(f.a)({},Qe),{},{elements:m.b(se)})),nt={id:"",owner:"",lastSavedAt:null,metadata:{title:"",composedBy:"",performedBy:"",originalKey:void 0,currentKey:void 0},elements:new Q},rt=Object(k.b)(nt),it=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var r;if(Object(p.a)(this,n),(r=t.call(this)).record=void 0,n.isChordSongRecord(e))return r.record=e,Object(b.a)(r);var i=Object(f.a)(Object(f.a)({},nt),{},{metadata:Object(f.a)({},nt.metadata)});return void 0===e.lines?i.elements=new Q([new de({})]):e.lines instanceof Q?i.elements=e.lines:i.elements=new Q(e.lines),void 0!==e.fields&&(i.id=e.fields.id,i.owner=e.fields.owner,i.metadata=e.fields.metadata,i.lastSavedAt=e.fields.lastSavedAt),r.record=rt(i),r}return Object(O.a)(n,[{key:"toJSON",value:function(){return this.record.toJSON()}},{key:"new",value:function(e){return e===this.record?this:new n(e)}},{key:"id",get:function(){return this.record.id}},{key:"owner",get:function(){return this.record.owner}},{key:"metadata",get:function(){return this.record.metadata}},{key:"lastSavedAt",get:function(){return this.record.lastSavedAt}},{key:"originalKey",get:function(){var e;return null!==(e=this.record.metadata.originalKey)&&void 0!==e?e:null}},{key:"currentKey",get:function(){var e;return null!==(e=this.record.metadata.currentKey)&&void 0!==e?e:null}},{key:"elements",get:function(){return this.record.elements}},{key:"updateCollection",value:function(e){return this.update("elements",e)}},{key:"set",value:function(e,t){var n=this.record.set(e,t);return this.new(n)}},{key:"update",value:function(e,t){var n=this.record.update(e,t);return this.new(n)}},{key:"chordLines",get:function(){return this.elements}},{key:"timeSectionedChordLines",get:function(){var e=Object(k.a)(),t=[];return this.chordLines.forEach((function(n){var r;"time"===(null===(r=n.section)||void 0===r?void 0:r.type)&&(t.length>0&&(e=e.push(Object(k.a)(t))),t=[]);t.push(n)})),t.length>0&&(e=e.push(Object(k.a)(t))),e}},{key:"timestampedSections",get:function(){var e=[];return this.chordLines.forEach((function(t){var n;"time"===(null===(n=t.section)||void 0===n?void 0:n.type)&&e.push(Object(f.a)(Object(f.a)({},t.section),{},{lineID:t.id}))})),Object(k.a)(e)}},{key:"title",get:function(){return this.metadata.title},set:function(e){this.metadata.title=e}},{key:"performedBy",get:function(){return this.metadata.performedBy},set:function(e){this.metadata.performedBy=e}},{key:"composedBy",get:function(){return this.metadata.composedBy},set:function(e){this.metadata.composedBy=e}},{key:"get",value:function(e){return this.chordLines.get(e)}},{key:"fork",value:function(){return this.set("id","").set("owner","").set("lastSavedAt",null)}},{key:"isUnsaved",value:function(){return""===this.id}},{key:"isOwner",value:function(e){return""!==this.owner&&(null!==e&&this.owner===e.userID)}},{key:"mergeLineWithPrevious",value:function(e){var t=this.chordLines.indexOf(e.id);if(!(t>0))return[this,!1];var n=function(e,t){return e=function(e,t){return e.updateCollection((function(e){return e.transform((function(e){return e.push.apply(e,Object(d.a)(t.chordBlocks.toArray()))}))}))}(e=function(e){var t=e.chordBlocks.length-1;return e.updateElement(t,(function(e){return e.update("lyric",(function(e){return e.append(" ")}))}))}(e),t),e=e.normalizeBlocks()};return[this.updateCollection((function(e){var r=e.getAtIndex(t);return e=(e=e.update(t-1,(function(e){return n(e,r)}))).remove(r)})),!0]}},{key:"splitLine",value:function(e,t){var n=this.chordLines.get(e),r=n.splitByCharIndex(t),i=Object(c.a)(r,2),a=i[0],o=i[1];return[this.updateCollection((function(e){return e.splice(n,1,a,o)})),!0]}},{key:"contentEquals",value:function(e){if(this.chordLines.length!==e.chordLines.length)return!1;if(!y.a.isEqual(this.metadata,e.metadata))return!1;var t=!0;return this.chordLines.forEach((function(n,r){var i=e.chordLines.getAtIndex(r);if(!n.contentEquals(i))return t=!1,!1})),t}},{key:"findLineWithBlock",value:function(e){var t=this.chordLines.list.find((function(t){return void 0!==t.chordBlocks.list.find((function(t){return t.id===e.id}))}));if(void 0===t)throw new Error("BlockID can't be found in the entire song");return t}},{key:"transpose",value:function(e,t){var n,r=this.originalKey,i=null===r,a=this.currentKey!==e;i||a?n=We(this,e,t):(n=We(this,e,r),n=We(n,r,t));var c=null!==r&&void 0!==r?r:e;return n=n.update("metadata",(function(e){return Object(f.a)(Object(f.a)({},e),{},{originalKey:c,currentKey:t})}))}},{key:"validateTimestampedSections",value:function(){var e,t=this.timestampedSections,n="the beginning of the song",r=0,i=Object(u.a)(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a.time<r)return new Error("Section ".concat(a.name," has an earlier timestamp than ").concat(n));n=a.name,r=a.time}}catch(c){i.e(c)}finally{i.f()}return null}}],[{key:"isChordSongRecord",value:function(e){return k.b.isRecord(e)}},{key:"fromValidatedFields",value:function(e){var t=e.elements.map((function(e){return de.fromValidatedFields(e)}));return new n({lines:new Q(t),fields:e})}},{key:"deserialize",value:function(e){var t=Object(Ge.a)(e);if(Object(v.isLeft)(t))return Object(v.left)(new Error(JSON.stringify(t.left)));var r=t.right;return n.fromJSONObject(r)}},{key:"fromJSONObject",value:function(e){var t=tt.decode(e);return Object(v.isLeft)(t)?Object(v.left)(new Error("Invalid Chord Song object")):Object(v.right)(this.fromValidatedFields(t.right))}},{key:"fromLyricsLines",value:function(e){var t=e.map((function(e){return de.fromLyrics(e)}));return new n({lines:new Q(t)})}}]),n}(X),at=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"URL",value:function(){return"/"}}],[{key:"rootURL",value:function(){return this.root.URL()}}]),e}();at.root=new at;var ct=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"URL",value:function(){return"/about"}}],[{key:"rootURL",value:function(){return this.root.URL()}}]),e}();ct.root=new ct;var ot=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"URL",value:function(){return"/guitar-demo"}}],[{key:"rootURL",value:function(){return this.root.URL()}}]),e}();ot.root=new ot;var st=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"URL",value:function(){return"/song"}},{key:"withID",value:function(e){return new lt(e)}},{key:"withNew",value:function(){return new lt("new")}}],[{key:"rootURL",value:function(){return this.root.URL()}},{key:"newURL",value:function(){return this.root.withNew().URL()}}]),e}();st.root=new st;var lt=function(){function e(t){Object(p.a)(this,e),this.id=void 0,this.id=t}return Object(O.a)(e,[{key:"URL",value:function(){return"/song/".concat(this.id)}},{key:"isNew",value:function(){return"new"===this.id}},{key:"withEditMode",value:function(){return new ut(this.id)}},{key:"withPlayMode",value:function(){return new dt(this.id,"root")}},{key:"parent",value:function(){return st.root}}]),e}(),ut=function(){function e(t){Object(p.a)(this,e),this.id=void 0,this.id=t}return Object(O.a)(e,[{key:"URL",value:function(){return"/song/".concat(this.id,"/edit")}},{key:"parent",value:function(){return new lt(this.id)}}],[{key:"isEditMode",value:function(e){return null!==e.match(/\/song\/.+\/edit/i)}}]),e}(),dt=function(){function e(t,n){Object(p.a)(this,e),this.id=void 0,this.mode=void 0,this.id=t,this.mode=n}return Object(O.a)(e,[{key:"URL",value:function(){var e="/song/".concat(this.id,"/play");return"root"===this.mode?e:"".concat(e,"/").concat(this.mode)}},{key:"withPageView",value:function(){return new e(this.id,"page")}},{key:"withScrollView",value:function(){return new e(this.id,"scroll")}},{key:"parent",value:function(){return new lt(this.id)}}],[{key:"isPlayMode",value:function(e){return null!==e.match(/\/song\/.+\/play/i)}}]),e}(),bt=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"URL",value:function(){return new lt("c531c0fe-6e8d-4cfe-9c5f-120e3402ccd9").URL()}}],[{key:"rootURL",value:function(){return this.root.URL()}}]),e}();bt.root=new bt;var ht=function(){function e(t){Object(p.a)(this,e),this.lesson=void 0,this.lesson=t}return Object(O.a)(e,[{key:"URL",value:function(){return"root"===this.lesson?"/learn":"/learn/".concat(this.lesson)}}],[{key:"rootURL",value:function(){return this.root.URL()}}]),e}();ht.root=new ht("root");var jt,ft=n(14),pt=n(485),Ot=n(477),vt=n(147),mt=n.p+"static/media/symphony.d46887dc.png",gt=n(165),yt=n.n(gt),xt=n(245),wt=n.n(xt),kt=n(169),Ct=n.n(kt),St=n(244),Lt=n.n(St),Tt=n(247),It=n.n(Tt),Bt=n(242),Et=n.n(Bt),Dt=n(246),Rt=n.n(Dt),At=n(249),Pt=n.n(At),Ft=n(248),Nt=n.n(Ft),Vt=n(501),Mt=n(471),_t=n(442),Ut=n(454),zt=n(481),Kt=n(488),Wt=n(437),Gt=n(443),Jt=n(229),qt=n(49),Ht=n(24),Yt=n(12),Xt=n.n(Yt),Qt=n(483),Zt=n(441),$t=n(486),en=n(489),tn=n(70),nn=n(47),rn=m.k({msg:m.i,code:m.i,error_details:m.i}),an=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t){var n,r,i,a;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof tn.a.HTTPError)){e.next=11;break}return n=t.response.clone(),e.next=4,n.json();case 4:if(r=e.sent,i=rn.decode(r),!Object(v.isLeft)(i)){e.next=9;break}return a=i.left.toString(),e.abrupt("return",Object(v.left)("Failed to decode the backend error type: ".concat(a)));case 9:return console.error(i.right.error_details),e.abrupt("return",i);case 11:if(!(t instanceof tn.a.TimeoutError)){e.next=13;break}return e.abrupt("return",Object(v.right)({code:"timeout",msg:"A backend request timed out",error_details:""}));case 13:if("string"!==typeof t){e.next=15;break}return e.abrupt("return",Object(v.left)(t));case 15:if("object"!==typeof t||null===t){e.next=18;break}if("function"!==typeof t.toString){e.next=18;break}return e.abrupt("return",Object(v.left)(t.toString()));case 18:return e.abrupt("return",Object(v.left)("An unparsable error has occurred"));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cn=function(e){return e.msg},on=function(){var e=Object(nn.b)().enqueueSnackbar,t=function(t){e(t,{variant:"error"})};return function(){var e=Object(Ht.a)(Xt.a.mark((function e(n){var r,i;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(v.isLeft)(n)){e.next=4;break}return console.error(n.left),t("An unknown error has occurred - please check the console for more details"),e.abrupt("return");case 4:r=n.right,console.error(r.msg),i=cn(r),t(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},sn=function(){var e="https://chord-be.philipwong.pw";return e}(),ln=function(e){return{headers:{Authorization:"Bearer "+e}}},un=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t){var n,r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.a.post("".concat(sn,"/login"),ln(t)).json();case 3:n=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,an(e.t0);case 10:return r=e.sent,e.abrupt("return",Object(v.left)(r));case 12:return e.abrupt("return",Object(v.right)(n));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),dn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t){var n,r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.a.get("".concat(sn,"/songs/").concat(t)).json();case 3:n=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,an(e.t0);case 10:return r=e.sent,e.abrupt("return",Object(v.left)(r));case 12:return e.abrupt("return",Object(v.right)(n));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),bn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t){var n,r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.a.get("".concat(sn,"/songs/").concat(t,"/tracklist"),{timeout:!1}).json();case 3:n=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,an(e.t0);case 10:return r=e.sent,e.abrupt("return",Object(v.left)(r));case 12:return e.abrupt("return",Object(v.right)(n));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),hn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r,i;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.a.get("".concat(sn,"/users/").concat(t,"/songs"),ln(n)).json();case 3:r=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,an(e.t0);case 10:return i=e.sent,e.abrupt("return",Object(v.left)(i));case 12:return e.abrupt("return",Object(v.right)(r));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),jn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r,i;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.a.post("".concat(sn,"/songs"),Object(f.a)({json:t},ln(n))).json();case 3:r=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,an(e.t0);case 10:return i=e.sent,e.abrupt("return",Object(v.left)(i));case 12:return e.abrupt("return",Object(v.right)(r));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),fn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r,i;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUnsaved()){e.next=2;break}return e.abrupt("return",Object(v.left)(Object(v.left)("A song that hasn't been created can't be updated")));case 2:return e.prev=2,e.next=5,tn.a.put("".concat(sn,"/songs/").concat(t.id),Object(f.a)({json:t},ln(n))).json();case 5:r=e.sent,e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,an(e.t0);case 12:return i=e.sent,e.abrupt("return",Object(v.left)(i));case 14:return e.abrupt("return",Object(v.right)(r));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),pn=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUnsaved()){e.next=2;break}return e.abrupt("return",Object(v.left)(Object(v.left)("A song that hasn't been created can't be deleted")));case 2:return e.prev=2,e.next=5,tn.a.delete("".concat(sn,"/songs/").concat(t.id),ln(n));case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,an(e.t0);case 11:return r=e.sent,e.abrupt("return",Object(v.left)(r));case 13:return e.abrupt("return",Object(v.right)(!0));case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),On=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r,i;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.song_id){e.next=2;break}return e.abrupt("return",Object(v.left)(Object(v.left)("No song ID on the tracklist")));case 2:return e.prev=2,e.next=5,tn.a.put("".concat(sn,"/songs/").concat(t.song_id,"/tracklist"),Object(f.a)({json:t},ln(n))).json();case 5:r=e.sent,e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,an(e.t0);case 12:return i=e.sent,e.abrupt("return",Object(v.left)(i));case 14:return e.abrupt("return",Object(v.right)(r));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),vn=n(482),mn=n(487),gn=n(73),yn=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),xn=function(e){var t=Object(L.useState)(!0),n=Object(c.a)(t,2),r=n[0],i=n[1];Object(L.useEffect)((function(){Object(gn.isRight)(e.error)&&console.error(e.error.right.msg)}),[e.error]);var a=Object(v.isLeft)(e.error)?e.error.left:cn(e.error.right),o=Object(I.jsx)(vn.a,{href:"https://docs.google.com/forms/d/e/1FAIpQLScL05fGWOVX-l5kqIoKBz4jreVmCJeIVhFu5TT2txVGNrV5rw/viewform?usp=sf_link",target:"_blank",rel:"noopener",children:"contact form"});return Object(I.jsxs)(Qt.a,{open:r,onClose:function(){var t;i(!1),null===(t=e.onClose)||void 0===t||t.call(e)},children:[Object(I.jsx)(Zt.a,{children:"Error"}),Object(I.jsxs)($t.a,{children:[Object(I.jsx)(yn,{children:Object(I.jsx)(mn.a,{children:"A component failed to render due to an error: ".concat(e.componentDescription)})}),Object(I.jsx)(yn,{children:Object(I.jsx)(mn.a,{children:a})}),Object(I.jsx)(yn,{children:Object(I.jsxs)(mn.a,{children:["Try refreshing and the problem may go away. If it sticks around feel free to leave a comment in the ",o]})})]})]})},wn=function(){},kn=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.currentGoogleUser=void 0,this.name=void 0,this.userID=void 0,this.authToken=void 0,this.currentGoogleUser=t,this.userID=n;var i=t.get();this.authToken=i.getAuthResponse().id_token,this.name=i.getBasicProfile().getName(),this.currentGoogleUser.listen((function(){r.refreshAuthToken.call(r)}))}return Object(O.a)(e,[{key:"refreshAuthToken",value:function(){this.authToken=this.getNewAuthToken()}},{key:"getNewAuthToken",value:function(){return this.currentGoogleUser.get().getAuthResponse().id_token}}]),e}(),Cn=T.a.createContext(null),Sn=T.a.createContext(wn),Ln=function(e){return"object"===typeof e&&(null!==e&&void 0!==e&&("id"in e&&"name"in e))},Tn=n(46),In=function(e){var t=Object(L.useState)({state:"not-started"}),n=Object(c.a)(t,2),r=n[0],i=n[1],a=T.a.useContext(Cn),o=Object(Tn.h)(),s=function(t){return Object(I.jsxs)(Qt.a,{open:e.open,onClose:e.onClose,fullWidth:!0,children:[Object(I.jsx)(Zt.a,{children:"Load Songs"}),Object(I.jsx)($t.a,{children:t})]})};if(null===a)return s(Object(I.jsx)(vt.a,{children:"You must be logged in to load a song graahhhhh *foams at mouth*"}));var l,u=function(e,t){return e.lastSavedAt===t.lastSavedAt?0:null===e.lastSavedAt?1:null===t.lastSavedAt?-1:e.lastSavedAt<t.lastSavedAt?1:-1},d=function(){var e=Object(Ht.a)(Xt.a.mark((function e(){var t,n,r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn(a.userID,a.authToken);case 2:if(t=e.sent,!Object(v.isLeft)(t)){e.next=6;break}return i({state:"error",error:t.left}),e.abrupt("return");case 6:if(n=et.fromJSONList(t.right),!Object(v.isLeft)(n)){e.next=10;break}return i({state:"error",error:Object(v.left)(n.left.message)}),e.abrupt("return");case 10:(r=n.right).sort(u),i({state:"loaded",item:r});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(t){var n=st.root.withID(t.id),r=function(e,n){return""===e||void 0===e?null:Object(I.jsx)(vt.a,{display:"block",variant:"caption",children:"".concat(n,": ").concat(e)},"".concat(t.id,"-").concat(n))},i=Object(I.jsxs)(I.Fragment,{children:[r(t.metadata.currentKey,"In the key of"),r(t.metadata.performedBy,"Performed by"),r(t.metadata.composedBy,"Composed by"),null!==t.lastSavedAt&&Object(I.jsx)(vt.a,{display:"block",variant:"caption",children:"Last Saved At: ".concat(t.lastSavedAt.toLocaleString())},"".concat(t.id,"-lastSavedAt"))]}),a=""!==t.metadata.title?t.metadata.title:"(Untitled)";return Object(I.jsxs)(T.a.Fragment,{children:[Object(I.jsx)(Mt.a,{button:!0,onClick:function(){var t;o.push(n.URL()),null===(t=e.onClose)||void 0===t||t.call(e)},children:Object(I.jsx)(_t.a,{primary:a,primaryTypographyProps:{key:"".concat(t.id,"-primary")},secondary:i,secondaryTypographyProps:{key:"".concat(t.id,"-seccondary")}})},t.id),Object(I.jsx)(Gt.a,{},"".concat(t.id,"-divider"))]},t.id)};switch(r.state){case"not-started":return i({state:"loading"}),d(),Object(I.jsx)(I.Fragment,{});case"error":return Object(I.jsx)(xn,{componentDescription:"Load Song Dialog",error:r.error,onClose:function(){return i({state:"not-started"})}});case"loading":return s(Object(I.jsx)(en.a,{}));case"loaded":return s(0===(l=r.item).length?Object(I.jsx)(vt.a,{children:"You don't have any songs saved. GET TO IT"}):Object(I.jsx)(Kt.a,{children:l.map(b)}))}},Bn=n(100),En=n.n(Bn),Dn=n(499),Rn=Object(ft.a)(pt.a)((function(e){var t=e.theme;return{margin:t.spacing(5),padding:t.spacing(5),minHeight:t.spacing(46),minWidth:t.spacing(92),position:"relative"}})),An=function(){return Object(I.jsxs)(Ot.a,{container:!0,"data-testid":"Tutorial",children:[Object(I.jsx)(Ot.a,{item:!0,xs:3}),Object(I.jsx)(Ot.a,{item:!0,xs:6,children:Object(I.jsx)(Rn,{children:Object(I.jsx)(vt.a,{children:"An Error Occurred Oh No"})})}),Object(I.jsx)(Ot.a,{item:!0,xs:3})]})},Pn=Object(ft.a)(vt.a)((function(e){return{color:e.theme.palette.secondary.light}})),Fn=Object(ft.a)(vt.a)((function(e){return{color:e.theme.palette.primary.main}})),Nn=function(){return Object(I.jsx)(vt.a,{children:"\xa0"})},Vn=n(235),Mn=n.n(Vn),_n=n(466),Un=n(203),zn={current:function(){return null}},Kn=T.a.createContext(zn),Wn=function(e){var t=Object(L.useRef)((function(){return null}));return Object(I.jsx)(Kn.Provider,{value:t,children:e.children})},Gn=T.a.createContext(null),Jn=function(e){var t=Object(L.useContext)(Kn),n=Object(L.useRef)(e.song.timestampedSections),r=Object(L.useState)(null),i=Object(c.a)(r,2),a=i[0],o=i[1],s=Object(L.useCallback)((function(){var e=(0,t.current)();if(null===e||0===e)null!==a&&o(null);else{var r=function(e,t){if(0===e.size)return null;var n=null;return e.forEach((function(e,r){t<e.time||null!==n&&e.time<=n.timestampedSection.time||(n={index:r,timestampedSection:e})})),n}(n.current,e);(null===a||void 0===a?void 0:a.timestampedSection.lineID)!==(null===r||void 0===r?void 0:r.timestampedSection.lineID)&&o(r)}}),[a,o,t]);return n.current!==e.song.timestampedSections&&(n.current=e.song.timestampedSections,s()),Object(L.useEffect)((function(){var e=setInterval(s,250);return function(){return clearInterval(e)}}),[s]),Object(I.jsx)(Gn.Provider,{value:a,children:e.children})},qn=Object(ft.a)(Wt.a)({transition:"background-color ".concat("cubic-bezier(.19,1,.22,1)"," 0.5s")}),Hn=function(e){var t=Object(L.useContext)(Gn);if(null===t||t.timestampedSection.lineID!==e.sectionID)return Object(I.jsx)(qn,{children:e.children});return Object(I.jsx)(qn,{sx:function(t){var n=function(e){return{backgroundColor:Object(Un.a)(e.palette.primary.dark,.1)}}(t);return!0===e.top&&(n=Object(f.a)(Object(f.a)({},n),function(e){return{borderTopLeftRadius:e.spacing(1),borderTopRightRadius:e.spacing(1)}}(t))),!0===e.bottom&&(n=Object(f.a)(Object(f.a)({},n),function(e){return{borderBottomLeftRadius:e.spacing(1),borderBottomRightRadius:e.spacing(1)}}(t))),n},children:e.children})},Yn=function(e){var t=Xn(e.sectionLines,e.lineElementFn);return Object(I.jsx)(I.Fragment,{children:t})},Xn=function(e,t){var n,r=null===(n=e.get(0))||void 0===n?void 0:n.id;if(void 0===r)throw new Error("Sections are expected to have at least one line");return e.map((function(n,i){var a=0===i,c=i===e.size-1;return Object(I.jsx)(Hn,{sectionID:r,top:a,bottom:c,children:t(n)},n.id)}))},Qn=T.a.memo(Yn);!function(e){e[e.START=0]="START",e[e.END=1]="END",e[e.MIDDLE=2]="MIDDLE"}(jt||(jt={}));var Zn=function e(t,n){var r=$n(t,n);if(r===jt.MIDDLE)return[t,n];var i=er(t);return r===jt.END&&(i+=1),e(function(e){if(null===e.parentNode)throw new Error("Node doesn't have parent");return e.parentNode}(t),i)},$n=function(e,t){switch(e.nodeType){case Node.TEXT_NODE:return function(e,t){if(0===t)return jt.START;var n=e.nodeValue;if(null===n)throw new Error("Text node has no value?");return t===n.length?jt.END:jt.MIDDLE}(e,t);case Node.ELEMENT_NODE:return function(e,t){var n=e.childNodes;return 0===t?jt.START:t===n.length?jt.END:jt.MIDDLE}(e,t);default:throw new Error("Crash for now "+e.nodeType)}},er=function(e){if(null===e.parentNode)throw new Error("wtf");for(var t=e.parentNode.childNodes,n=0;n<t.length;n++)if(t.item(n)===e)return n;throw new Error("Child node doesn't exist in parent???")},tr=function(){var e=window.getSelection();if(null===e||0===e.rangeCount)return[];var t=function(e){var t=document.createRange(),n=e.getRangeAt(0);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset);for(var r=1;r<e.rangeCount;r++){var i=e.getRangeAt(r);-1===i.compareBoundaryPoints(Range.START_TO_START,t)&&t.setStart(i.startContainer,i.startOffset),1===i.compareBoundaryPoints(Range.END_TO_END,t)&&t.setEnd(i.endContainer,i.endOffset)}return t}(e);!function(e){var t=Zn(e.startContainer,e.startOffset),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Zn(e.endContainer,e.endOffset),o=Object(c.a)(a,2),s=o[0],l=o[1];e.setStart(r,i),e.setEnd(s,l)}(t);for(var n=document.querySelectorAll("[data-lineid]"),r=[],i=0;i<n.length;i++){var a=n.item(i);if(t.intersectsNode(a)){var o=a.getAttribute("data-lineid");if(null===o)throw new Error("Unexpected - line element should have line ID because that's how it was selected");r.push(o)}}return r},nr=function(e,t){if("Backspace"!==e.key)return!1;var n=tr();return 0!==n.length&&(t({type:"batch-remove-lines",lineIDs:n.map((function(e){return{type:"ChordLine",id:e}}))}),!0)},rr=m.k({copiedChordLines:m.b(se)}),ir=function(e){var t=Object(nn.b)().enqueueSnackbar;return function(n){var r=tr(),i=e.chordLines.list.filter((function(e){return r.includes(e.id)}));if(0===i.size)return!1;var a,c=function(e){var t={copiedChordLines:e.map((function(e){return e.forCopying()})).toArray()};return JSON.stringify(t)}(i);return n.clipboardData.setData("application/json",c),n.preventDefault(),a=1===i.size?"1 line copied to your clipboard":"".concat(i.size," lines copied to your clipboard"),t(a,{variant:"info"}),!0}},ar={startInteraction:wn,endInteraction:wn},cr=T.a.createContext(ar),or=function(){var e=Object(L.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(L.useContext)(cr),a=i.startInteraction,o=i.endInteraction;return{editing:n,startEdit:function(){r(!0),a()},finishEdit:function(){r(!1),o()}}},sr=n(163),lr=n.n(sr),ur=n(233),dr=n.n(ur),br=n(435),hr=n(114),jr=n(75),fr=n(45),pr="LyricTokenSpace",Or="LyricTokenWord",vr="FirstLyricToken",mr="ChordTarget",gr="ChordSymbol",yr=function(e){return{backgroundColor:e.palette.primary.main,borderRadius:"0.3em"}},xr=function(e){return{color:e.palette.primary.main}},wr=function(e){return{borderStyle:"solid",borderColor:e.palette.primary.main,borderRadius:"0.3em",borderWidth:"0.075em"}},kr=function(e){var t=Lr(e),n=Tr(e);return function(){var e=Object(fr.a)(),r=t(e),i=n(e);return{dragOver:Object(o.b)(Object(o.a)(r)),hoverable:Object(o.b)(Object(o.a)(i))}}},Cr=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customLyricClassSelector)?e:"".concat(e,".").concat(t.customLyricClassSelector)},Sr=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customChordSymbolClassSelector)?e:"".concat(e,".").concat(t.customChordSymbolClassSelector)},Lr=function(e){return function(t){var n,r=yr(t),i=xr(t),a=void 0!==(null===e||void 0===e?void 0:e.dragOverOutline)?e.dragOverOutline(t):void 0,c=Object(f.a)(Object(f.a)({},wr(t)),a),o=Cr(".".concat(pr),e),s=Cr(".".concat(Or),e),l=Sr(".".concat(gr),e);return n={},Object(C.a)(n,"& ".concat(o),r),Object(C.a)(n,"& ".concat(s),i),Object(C.a)(n,"& ".concat(l),c),n}},Tr=function(e){return function(t){var n,r=yr(t),i=xr(t),a=void 0!==(null===e||void 0===e?void 0:e.hoverOutline)?e.hoverOutline(t):void 0,c=Object(f.a)(Object(f.a)({},wr(t)),a),o=Cr(".".concat(pr),e),s=Cr(".".concat(Or),e),l=function(e,t){return void 0===(null===t||void 0===t?void 0:t.customChordTargetClassSelector)?e:"".concat(e,".").concat(t.customChordTargetClassSelector)}(".".concat(mr),e),u=Sr(".".concat(gr),e);return n={},Object(C.a)(n,"& ".concat(l,":hover ~ ").concat(o),r),Object(C.a)(n,"& ".concat(l,":hover ~ * ").concat(o),r),Object(C.a)(n,"& ".concat(l,":hover ~ ").concat(s),i),Object(C.a)(n,"& ".concat(l,":hover ~ * ").concat(s),i),Object(C.a)(n,"& ".concat(l).concat(u,":hover"),c),Object(C.a)(n,"& ".concat(l,":hover ").concat(u),c),n}},Ir=function(e,t){for(var n=[],r=e.tokenize(),i=function(e){var i=r.get(e);if(void 0===i)throw new Error("Token index not found");var a=i.get((function(n){return function(e,t,n){if(R("serializedStr",e)){var r=D("serializedStr",e);return Object(I.jsx)(M,{type:r.sizedTab,edit:n},t)}return e}(n,e,t)}));"string"===typeof a&&n.length>0&&"string"===typeof n[n.length-1]?n[n.length-1]+=a:n.push(a)},a=0;a<r.size;a++)i(a);return n},Br=function(e){var t="";return e.forEach((function(e){var n=A(e);if(null!==n){var r=D("sizedTab",n);t+=r.serializedStr}else t+=e.textContent})),new W(t)},Er="h6",Dr={variant:Er,display:"inline"},Rr={whiteSpace:"pre",wordSpacing:".15em",display:"inline-block"},Ar=Object(ft.a)(vt.a)(Object(f.a)({},Rr)),Pr=function(e){var t,n,r=null!==(t=e.className)&&void 0!==t?t:"",i=Object(o.b)((n={},Object(C.a)(n,pr,e.children.isEntirelySpaceOrTab()),Object(C.a)(n,Or,!e.children.isEntirelySpaceOrTab()),Object(C.a)(n,r,void 0!==e.className),n));return Object(I.jsx)(Ar,Object(f.a)(Object(f.a)({},Dr),{},{className:i,"data-testid":e["data-testid"],children:Ir(e.children,!1)}))},Fr=Object(ft.a)(vt.a)({whiteSpace:"pre",cursor:"pointer",fontFamily:"PoriChord",userSelect:"all"}),Nr=T.a.forwardRef((function(e,t){return Object(I.jsx)(Fr,{variant:Er,display:"inline","data-testid":"ChordSymbol",className:e.className,ref:t,children:function(){var t=e.children;return t.endsWith(" ")?t:U(t+=" ")}()})})),Vr=Nr,Mr="chord",_r=n(474),Ur=function(e,t){var n=Object(_r.a)({accept:Mr,drop:function(){return{type:"dropped-chord-result",blockID:e,tokenIndex:t}},collect:function(e){return{isOver:e.isOver({shallow:!0})}}}),r=Object(c.a)(n,2),i=r[0].isOver;return[r[1],i]},zr=function(e){var t=Ur(e.blockID,e.tokenIndex),n=Object(c.a)(t,2),r=n[0],i=n[1]?e.dragOverClassName:e.hoverableClassName,a=e.children(r);return T.a.cloneElement(a,{className:i})},Kr=function(e){var t=Ur(e.blockID,0),n=Object(c.a)(t,2),r=n[0],i=n[1],a=e.onDragOver;return Object(L.useEffect)((function(){a(i)}),[a,i]),e.children(r)},Wr=n(475),Gr=T.a.forwardRef((function(e,t){var n,r,i=Object(Wr.a)({item:(n=e.chordBlockID,r=e.children,{type:Mr,sourceBlockID:n,chord:r}),end:function(t,n){if(void 0!==t){var r,i=n.getDropResult();if(null!==(r=i)&&void 0!==r&&"object"===typeof r&&"dropped-chord-result"===r.type)e.onDrop({chord:t.chord,sourceBlockID:t.sourceBlockID,destinationBlockID:i.blockID,splitIndex:i.tokenIndex,dropType:i.dropEffect})}}}),a=Object(c.a)(i,2)[1],o=Object(L.useCallback)((function(e){a(e),null!==t&&("function"===typeof t?t(e):t.current=e)}),[a,t]);return Object(I.jsx)(Vr,{className:e.className,ref:o,children:e.children})})),Jr=Gr,qr=function(e,t){return e.set(t.index,t.isDraggingOver)},Hr=n(473),Yr=function(e){var t=Object(fr.a)(),n=function(t){var n;null===(n=e.onFinish)||void 0===n||n.call(e,t)},r=function(){var n,r,i=void 0;void 0!==e.typographyVariant&&(i=null===t||void 0===t||null===(r=t.typography)||void 0===r?void 0:r[e.typographyVariant]);var a={style:{padding:void 0===e.paddingSpacing?"0px":t.spacing(e.paddingSpacing),fontSize:null===(n=i)||void 0===n?void 0:n.fontSize,opacity:1}};return void 0!==e.width&&a.style&&(a.style.width=e.width),a}();return Object(I.jsx)(Hr.a,{autoFocus:!0,className:e.className,variant:e.variant,label:e.label,inputProps:Object(f.a)({"data-testid":"InnerInput",spellCheck:!1},r),InputProps:e.InputProps,inputRef:e.inputRef,value:e.value,onBlur:function(){n(e.value)},onChange:function(t){e.onValueChange(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&n(e.value)},placeholder:e.placeholder,error:e.error,fullWidth:!0,"data-testid":"TextInput"})},Xr=function(e){var t=Object(L.useState)(e.value),n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(I.jsx)(Yr,{className:e.className,value:r,onValueChange:i,variant:e.variant,typographyVariant:e.typographyVariant,width:e.width,onFinish:e.onFinish})},Qr=Object(ft.a)(Ar)({color:"transparent",cursor:"pointer",userSelect:"none",position:"absolute",left:0,top:0,transform:"translate(0%, -110%)"}),Zr=function(e){return Object(I.jsx)(Qr,Object(f.a)(Object(f.a)({},Dr),{},{onClick:e.onClick,className:e.className,"data-testid":"ChordEditButton",children:e.children}))},$r=T.a.forwardRef((function(e,t){var n=0===e.index?vr:void 0,r=Object(I.jsx)(Pr,{className:n,"data-testid":"Token-".concat(e.index),children:e.children});return Object(I.jsxs)(Wt.a,{className:e.className,position:"relative",display:"inline","data-testid":"TokenBox-".concat(e.index),ref:t,children:[function(){if(void 0===e.invisibleTarget)return null;var t=Ir(e.children,!1);return Object(I.jsx)(Zr,{className:Object(o.b)(mr,gr),onClick:e.invisibleTarget.onClick,children:t})}(),r]},e.index)})),ei=$r,ti="BlockChordSymbol",ni="BlockChordTarget",ri="2em",ii=Object(ft.a)(Xr)(Object(C.a)({width:"4em",height:ri},"& .".concat(jr.a.input),{fontFamily:"PoriChord"})),ai=kr({dragOverOutline:function(e){return{borderColor:hr.a[300],color:hr.a[300]}},hoverOutline:function(e){return{color:e.palette.primary.dark}},customLyricClassSelector:vr,customChordSymbolClassSelector:ti,customChordTargetClassSelector:ni}),ci=kr(),oi=function(e){var t=ai(),n=ci(),r=or(),i=r.editing,a=r.startEdit,s=r.finishEdit,l=function(e,t){var n=Object(L.useReducer)(qr,Object(k.a)([!1,!1])),r=Object(c.a)(n,2),i=r[0],a=r[1],o=function(e){var t=i.get(e);if(void 0===t)throw new Error("Out of index error");return t},s=[Object(L.useCallback)((function(e){return a({index:0,isDraggingOver:e})}),[a]),Object(L.useCallback)((function(e){return a({index:1,isDraggingOver:e})}),[a])];return[o(0)||o(1)?t:e,s[0],s[1]]}(t.hoverable,t.dragOver),u=Object(c.a)(l,3),d=u[0],b=u[1],h=u[2],j=e.chordBlock.lyricTokens;if(0===j.size){var f=new W("\xa0");j=Object(k.a)([f])}var p=function(t){return function(n){0!==t&&e.onBlockSplit(e.chordBlock,t),a(),n.stopPropagation()}},O=function(t){e.songDispatch({type:"drag-and-drop-chord",sourceBlockID:t.sourceBlockID,newChord:t.chord,dropType:t.dropType,destinationBlockID:t.destinationBlockID,splitIndex:t.splitIndex})},v=function(t){var n;null===(n=e.onChordChange)||void 0===n||n.call(e,e.chordBlock,t),s()},m=function(t,r){var i={onClick:p(r)};return Object(I.jsx)(zr,{blockID:e.chordBlock,tokenIndex:r,hoverableClassName:n.hoverable,dragOverClassName:n.dragOver,children:function(e){return Object(I.jsx)(ei,{index:r,invisibleTarget:i,ref:e,children:t})}},r)},g=j.get(0);if(void 0===g)throw new Error("Lyric tokens list guaranteed at least one token");var y,x=j.slice(1),w=(y=g,""!==e.chordBlock.chord?Object(I.jsx)(Kr,{blockID:e.chordBlock,onDragOver:h,children:function(e){return Object(I.jsx)(ei,{index:0,ref:e,children:y})}},0):m(y,0)),C=x.map((function(e,t){return m(e,t+1)})).unshift(w);return Object(I.jsx)(Wt.a,{display:"inline-block",sx:{verticalAlign:"bottom"},children:Object(I.jsxs)(Ot.a,{container:!0,direction:"column","data-testid":e["data-testid"],className:d,children:[Object(I.jsx)(Ot.a,{className:Object(o.b)(mr,ni),onClick:p(0),height:ri,item:!0,children:Object(I.jsx)(Kr,{blockID:e.chordBlock,onDragOver:b,children:function(t){return i?Object(I.jsx)(Wt.a,{"data-testid":"ChordEdit",children:Object(I.jsx)(ii,{value:e.chordBlock.chord,variant:"filled",typographyVariant:Er,onFinish:v})}):""===e.chordBlock.chord?Object(I.jsx)(Vr,{ref:t,children:e.chordBlock.chord}):Object(I.jsx)(Jr,{chordBlockID:e.chordBlock,onDrop:O,className:Object(o.b)("ChordSymbol",ti),ref:t,children:e.chordBlock.chord})}})}),Object(I.jsx)(Ot.a,{item:!0,height:ri,"data-testid":"Lyric",children:C})]})})},si=n(493),li=n(494),ui=n(64),di=n(448),bi=n(91),hi=["className"],ji=function(e){return Object(ft.a)((function(e){var t=e.className,n=Object(ui.a)(e,hi);return Object(I.jsx)(di.a,Object(f.a)(Object(f.a)({},n),{},{classes:{popper:t}}))}))((function(t){var n=t.theme,r=e(n);return Object(C.a)({zIndex:0},"& .".concat(bi.a.tooltip),r)}))},fi=Object(ft.a)(si.a)({backgroundColor:"transparent","&:hover":{backgroundColor:Jt.a[200]}}),pi=ji((function(){return{padding:"0px",margin:"0px !important",backgroundColor:"transparent"}})),Oi=function(e){var t=e.menuItems.map((function(e,t){return Object(I.jsx)(fi,{onClick:e.onClick,"data-testid":e["data-testid"],children:e.icon},t)})),n=Object(I.jsx)(li.a,{orientation:"vertical",variant:"text",children:t});return Object(I.jsx)(pi,{placement:"right",title:n,children:e.children})},vi=function(e){if(null===e.current)throw new Error("unexpected for ref to be null");return e.current},mi=function(e){var t=vi(e),n=window.getSelection();if(null===n||0===n.rangeCount)return null;var r=n.getRangeAt(0);return null!==r&&t.contains(r.startContainer)&&t.contains(r.endContainer)?r:null},gi=function(e,t){var n=vi(e),r=mi(e);return null!==r&&(r.deleteContents(),r.insertNode(t),r.collapse(!1),n.normalize(),!0)},yi=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if(t===n.item(r))return r;return null},xi=function(e){var t,n=vi(e),r=mi(e);if(null===r)return null;if(r.startContainer===n){if(0===r.startOffset)return null;t=r.startOffset-1}else{if(0!==r.startOffset)return null;var i=yi(n,r.startContainer);if(null===i||0===i)return null;t=i-1}return n.childNodes.item(t)},wi=function(e,t){return function(n){return!("Backspace"!==n.key||!n.metaKey&&!n.ctrlKey)&&(!!function(e){var t=mi(e);if(null===t)return!1;if(!t.collapsed)return!1;var n=vi(e);return t.startContainer===n&&0===t.startOffset||null!==n.firstChild&&t.startContainer===n.firstChild&&0===t.startOffset}(e)&&(t(),!0))}},ki=function(e,t){return function(n){if(!("Enter"===n.key&&(n.metaKey||n.ctrlKey)))return!1;var r=function(e){if(null===e.current)return null;var t=mi(e);if(null===t)return null;if(t.startContainer===e.current)return t.startOffset;var n,r=0,i=Object(u.a)(e.current.childNodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t.startContainer===a)return r+t.startOffset;r+=1}}catch(c){i.e(c)}finally{i.f()}throw new Error("Unexpected - a child node should match range's start container")}(e);return null!==r&&(t(r),!0)}},Ci=function(e,t){return function(n){var r;if("Tab"!==n.key||n.shiftKey)if("Tab"===n.key&&n.shiftKey)r=a.LargeTab;else{if(" "!==n.key||!n.shiftKey)return!1;r=a.SmallTab}else r=a.MediumTab;var i=t(r);return gi(e,i)}},Si=function(e){return function(t){var n,r=vi(e),i=window.getSelection();if(null===i)return!1;if(t.shiftKey||t.metaKey||t.ctrlKey)return!1;if("ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return!1;if("ArrowLeft"===t.key){var a=xi(e);if(null===a||null===A(a))return!1;var c=yi(r,a);if(null===c)return console.error("Unexpected - node cannot be found inside contenteditable element"),!1;n=c}else{var o=function(e){var t=vi(e),n=mi(e);if(null===n)return null;var r,i=t.childNodes.length;if(n.endContainer===t){if(n.endOffset===i)return null;r=n.endOffset}else{if(n.endContainer.nodeType===n.endContainer.TEXT_NODE){var a=n.endContainer;if(n.endOffset!==a.length)return null}var c=yi(t,n.endContainer);if(null===c||c===i)return null;r=c+1}return t.childNodes.item(r)}(e);if(null===o||null===A(o))return!1;var s=yi(r,o);if(null===s)return console.error("Unexpected - node cannot be found inside contenteditable element"),!1;n=s+1}return i.setBaseAndExtent(r,n,r,n),!0}},Li=function(e){var t,n,r=function(e){var t=document.createElement("span");t.className=V[e],t.contentEditable="false";var n=D("sizedTab",e);return t.dataset.lyrictabtype=n["data-lyrictabtype"],t},i=[ki(e.contentEditableRef,e.specialEnterCallback),wi(e.contentEditableRef,e.specialBackspaceCallback),Ci(e.contentEditableRef,r),(n=e.enterCallback,function(e){return"Enter"===e.key&&(n(),!0)}),(t=e.contentEditableRef,function(e){if("Backspace"!==e.key)return!1;var n=xi(t);if(null===n||null===A(n))return!1;var r=n.parentElement;return null!==r&&(r.removeChild(n),!0)}),Si(e.contentEditableRef),function(e){return!(!e.metaKey&&!e.ctrlKey)&&("b"===e.key||"B"===e.key||"u"===e.key||"U"===e.key||"i"===e.key||"I"===e.key)}];return function(e){var t,n=Object(u.a)(i);try{for(n.s();!(t=n.n()).done;){if((0,t.value)(e))return void e.preventDefault()}}catch(r){n.e(r)}finally{n.f()}}},Ti=function(e){var t=e.cloneContents();return Br(t.childNodes)},Ii=function(e,t){var n=function(e){var t=mi(e),n=vi(e),r=document.createRange(),i=document.createRange();return null!==t?(r.setStart(n,0),r.setEnd(t.startContainer,t.startOffset),i.setStart(t.endContainer,t.endOffset),i.setEnd(n,n.childNodes.length)):(r.selectNodeContents(n),i.setStart(r.endContainer,r.endOffset),i.setEnd(r.endContainer,r.endOffset)),[r,i]}(e),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Ti(i);o=o.append(t[0]);var s=t.slice(1).map((function(e){return new W(e)})),l=s.length-1,u=s[l].append(Ti(a));return s[l]=u,[o,s]},Bi=function(e,t){return function(n){var r=n.clipboardData.getData("text/plain");if(""===r)return!1;var i=r.split("\r\n");if(0===(i=i.flatMap((function(e){return e.split("\n")}))).length)return!1;if(1===i.length)return gi(e,document.createTextNode(i[0]));var a=Ii(e,i),o=Object(c.a)(a,2),s=o[0],l=o[1];return t(s,l),!0}},Ei=[function(e){if(!e.isCollapsed)return!1;var t=e.getRangeAt(0);return null!==A(t.endContainer)&&(t.setStartAfter(t.endContainer),t.setEndAfter(t.endContainer),t.collapse(!0),!0)}],Di=function(e){var t=document.getSelection();if(null!==t&&1===t.rangeCount){var n,r=Object(u.a)(Ei);try{for(r.s();!(n=r.n()).done;){if((0,n.value)(t))return void e.preventDefault()}}catch(i){r.e(i)}finally{r.f()}}},Ri=Object(ft.a)(vt.a)({width:"100%",backgroundColor:Jt.a[200],whiteSpace:"pre",display:"inline-block"}),Ai={display:"inline-block",width:"100%",pointerEvents:"auto",userSelect:"text",outline:"none",wordSpacing:".15em","&:empty:before":{content:'"\\a0"'}},Pi=function(e){var t,n=T.a.createRef(),r=function(){var e=vi(n);return null===e.textContent?new W(""):Br(e.childNodes)},i=function(t){e.onFinish(t)},a=Li({contentEditableRef:n,enterCallback:function(){i(r())},specialBackspaceCallback:function(){e.onSpecialBackspace()},specialEnterCallback:function(t){i(r()),e.onSpecialEnter(t)}}),o=function(e){var t,n=[(t=e.pasteJSONCallback,function(e){var n=e.clipboardData.getData("application/json");return""!==n&&t(n)}),Bi(e.contentEditableRef,e.pastePlainTextCallback)];return function(e){var t,r=Object(u.a)(n);try{for(r.s();!(t=r.n()).done;)if((0,t.value)(e))return void e.preventDefault()}catch(i){r.e(i)}finally{r.f()}}}({contentEditableRef:n,pasteJSONCallback:function(t){var n=e.onJSONPaste(t),a=Object(c.a)(n,2),o=a[0],s=a[1];return o&&(i(r()),null===s||void 0===s||s()),o},pastePlainTextCallback:function(t,n){i(t),e.onLyricOverflow(n)}}),s=Ir(e.children,!0);return t=n,Object(L.useEffect)((function(){var e=vi(t);e.focus();var n=window.getSelection();if(null!==n){var r=document.createRange();r.selectNodeContents(e),r.collapse(!1),n.removeAllRanges(),n.addRange(r)}})),Object(L.useEffect)((function(){return document.addEventListener("selectionchange",Di),function(){return document.removeEventListener("selectionchange",Di)}})),Object(I.jsx)(Ri,{sx:e.sx,variant:e.variant,display:"inline","data-testid":"LyricInput",children:Object(I.jsx)("span",{contentEditable:!0,spellCheck:!1,style:Ai,ref:n,"data-testid":"InnerInput",onBlur:function(){i(r())},onKeyDown:a,onPaste:o,suppressContentEditableWarning:!0,children:s})})},Fi=Object(ft.a)(Pi)((function(e){var t=e.theme;return Object(f.a)(Object(f.a)({},Rr),{},{borderBottom:"solid",borderBottomColor:t.palette.secondary.main,borderBottomWidth:"2px"})})),Ni=function(e){var t=or(),n=t.editing,r=t.startEdit,i=t.finishEdit,a=e.songDispatch,c=e.chordLine,o=Object(nn.b)().enqueueSnackbar,s=Object(L.useMemo)((function(){return{lyricEdit:function(e){i(),a({type:"replace-line-lyrics",line:c,lineID:c,newLyric:e})},lyricPasteOverflow:function(e){a({type:"insert-overflow-lyrics",insertionLineID:c,overflowLyrics:e}),i()},jsonPaste:function(e){var t=function(e){var t=Object(v.parseJSON)(e,(function(){return new Error("Failed to parse json string")}));if(Object(v.isLeft)(t))return t;var n=t.right;if(void 0===n.copiedChordLines)return null;var r=rr.decode(n);if(Object(v.isLeft)(r))return Object(v.left)(new Error("Invalid Chord Lines payload"));var i=r.right.copiedChordLines.map((function(e){return de.fromValidatedFields(e)}));return Object(v.right)(i)}(e);if(null===t)return[!1,null];if(Object(v.isLeft)(t)){var n="Failed to paste copied lines: "+t.left.message;return o(n,{variant:"error"}),[!0,null]}return[!0,function(){return a({type:"batch-insert-lines",insertLineID:c,copiedLines:t.right})}]},specialBackspace:function(){a({type:"merge-lines",latterLineID:c}),i()},specialEnter:function(e){a({type:"split-line",lineID:c,splitIndex:e}),i()}}}),[c,a,i,o]),l=e.children(r);return n?Object(I.jsxs)(I.Fragment,{children:[l,Object(I.jsx)(Wt.a,{position:"absolute",left:"0",bottom:"0px",width:"100%",children:Object(I.jsx)(Fi,{variant:Er,onFinish:s.lyricEdit,onJSONPaste:s.jsonPaste,onLyricOverflow:s.lyricPasteOverflow,onSpecialBackspace:s.specialBackspace,onSpecialEnter:s.specialEnter,children:e.chordLine.lyrics})})]}):l},Vi={borderColor:S.a[500],borderStyle:"solid",borderRadius:"0.3em",borderWidth:"0.075em",color:S.a[500],display:"inline-block"},Mi="body2",_i=["value","placeholder","onValueChange","editControl"],Ui=Object(ft.a)(vt.a)({color:Jt.a[400]}),zi=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],a=void 0!==e.editControl?e.editControl.editing:r,o=function(){void 0!==e.editControl?e.editControl.onStartEdit():i(!0)},s=function(t){void 0!==e.editControl?e.editControl.onEndEdit():i(!1),e.onValueChange&&e.onValueChange(t)},l=a?function(){if("inherit"===e.variant)throw new Error("can't have these variant types");return Object(I.jsx)(Xr,{value:e.value,variant:"filled",typographyVariant:e.variant,onFinish:s,"data-testid":"EditableLine"})}():function(){e.value,e.placeholder,e.onValueChange,e.editControl;var t=Object(ui.a)(e,_i);return""===e.value&&void 0!==e.placeholder?Object(I.jsx)(Ui,Object(f.a)(Object(f.a)({},t),{},{onClick:o,children:e.placeholder})):Object(I.jsx)(vt.a,Object(f.a)(Object(f.a)({},t),{},{onClick:o,children:U(e.value)}))}();return Object(I.jsx)(Wt.a,{children:l})},Ki=n(232),Wi=n.n(Ki),Gi=n(495),Ji=n(496),qi=n(491),Hi=function(e){return{borderTopLeftRadius:e.spacing(1.5),borderTopRightRadius:e.spacing(1.5)}},Yi=function(e){return{borderRadius:e.spacing(1.5)}},Xi={backgroundColor:S.a[50],display:"flex",alignItems:"center"},Qi=function(e,t,n){var r=e.typography[t],i=function(){if(void 0!==r.fontFamily&&void 0!==r.fontSize)return"".concat(r.fontSize," ").concat(r.fontFamily)}();if(void 0!==i){var a=document.createElement("canvas").getContext("2d");if(null!==a){a.font=i;var c=a.measureText(n);return"".concat(c.width,"px")}}},Zi=Jt.a[700],$i=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return Object(f.a)({position:"fixed",bottom:0,right:t.spacing(2),zIndex:1},Hi(t))})),ea=function(e){return Object(I.jsx)($i,{boxShadow:4,children:e})},ta=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return Object(f.a)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},Hi(t))})),na=n(140),ra=Object(ft.a)(Yr)((function(e){var t=e.theme;return Object(C.a)({},"& .".concat(jr.a.input),{textAlign:"right",width:Qi(t,"body1","00:00")})})),ia=function(e){var t=function(e){return null===e?"":na.Duration.fromMillis(1e3*e).toFormat("mss")},n=t(e.seconds),r=Object(L.useState)(n),i=Object(c.a)(r,2),a=i[0],o=i[1],s=Object(L.useRef)(null),l=Object(L.useContext)(Kn),u=function(e){var t=Number(e),n=t%100;return[Math.floor(t/100),n]},d=function(e){if(""===e)return!0;var t=u(e),n=Object(c.a)(t,2),r=n[0],i=n[1];return!isNaN(r)&&!isNaN(i)&&!(i>59||i<0)},b=function(t){var n,r;if(""!==t){if(d(t)){var i=u(t),a=Object(c.a)(i,2),o=a[0],s=a[1];null===(n=e.onFinish)||void 0===n||n.call(e,60*o+s)}}else null===(r=e.onFinish)||void 0===r||r.call(e,null)},h=Object(I.jsx)(Gi.a,{position:"end",children:Object(I.jsx)(Ji.a,{edge:"end",onMouseDown:function(){var e=(0,l.current)();if(null!==e){var n=t(e);null!==s.current&&void 0!==s.current.focus&&null!==s.current.focus&&s.current.focus(),o(n),b(n)}},size:"large",sx:{padding:.5},children:Object(I.jsx)(Wi.a,{})})}),j=function(e){if(""===e)return"";if(1===e.length)return"0:0"+e;if(2===e.length)return"0:"+e;var t=e.length-2;return e.substring(0,t)+":"+e.substring(t)}(a),f=!d(a);return Object(I.jsx)(qi.a,{variant:"filled",sx:{margin:1},children:Object(I.jsx)(ra,{label:e.label,className:e.className,placeholder:"0:00",value:j,onValueChange:function(e){o(function(e){var t=e.replaceAll(/\D/g,"");return"0"===t?"000":"00"===t?"":t=t.replace(/^0+/,"")}(e))},variant:"outlined",typographyVariant:"body1",onFinish:function(){return b(a)},paddingSpacing:.5,error:f,InputProps:{endAdornment:h,disableUnderline:!f},inputRef:s})})},aa=Object(ft.a)(zi)(Object(f.a)({},Vi)),ca=ji((function(e){return{background:"white",boxShadow:e.shadows[2]}})),oa=function(e){var t,n=or(),r=n.editing,i=n.startEdit,a={editing:r,onStartEdit:i,onEndEdit:n.finishEdit},c=e.chordLine,o=e.songDispatch,s=Object(L.useCallback)((function(e){o({type:"set-section",lineID:c,label:e})}),[c,o]),l=Object(L.useCallback)((function(e){o({type:"set-section",lineID:c,time:e})}),[c,o]),u=e.children(i),d=e.chordLine.section;if(!r&&void 0===d)return u;var b=null!==(t=null===d||void 0===d?void 0:d.name)&&void 0!==t?t:"",h=function(){var e="time"===(null===d||void 0===d?void 0:d.type)?d.time:null;return Object(I.jsx)(ia,{seconds:e,onFinish:l,label:"timestamp"})}(),j=r;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Wt.a,{children:Object(I.jsx)(ca,{arrow:!0,placement:"left",title:h,disableFocusListener:j,children:Object(I.jsx)("span",{children:Object(I.jsx)(aa,{value:b,variant:Mi,"data-testid":"EditLabel",editControl:a,onValueChange:s})})})}),u]})},sa=Object(ft.a)(Wt.a)({userSelect:"all"}),la=Object(ft.a)(lr.a)({color:hr.a[300]}),ua=Object(ft.a)(Wt.a)({"&:hover":{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.05) 0 0)"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),da=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],a=e.chordLine,o=e.songDispatch,s=Object(L.useMemo)((function(){return{chordChange:function(e,t){o({type:"set-chord",lineID:a,blockID:e,newChord:t})},blockSplit:function(e,t){o({type:"split-block",lineID:a,blockID:e,splitIndex:t})},startRemove:function(){i(!0)},remove:function(){o({type:"remove-line",lineID:a})}}}),[a,o]),l=e.chordLine.chordBlocks;0===l.length&&(l=new Q([new H({chord:"",lyric:new W("")})]));var u=l.list.map((function(e){return Object(I.jsx)(oi,{chordBlock:e,songDispatch:o,onChordChange:s.chordChange,onBlockSplit:s.blockSplit,"data-testid":"Block"},e.id)})),d=function(e){return Object(I.jsx)(ua,{"data-testid":"NoneditableLine",onClick:e,children:u})},b=function(e){return Object(I.jsx)(Ni,{chordLine:a,songDispatch:o,children:function(t){return function(e,t){return Object(I.jsx)(Oi,{menuItems:t,children:d(e)})}(t,e)}})},h=Object(I.jsx)(oa,{chordLine:a,songDispatch:o,children:function(e){var t=[{onClick:e,icon:Object(I.jsx)(dr.a,{}),"data-testid":"EditLabel"},{onClick:s.startRemove,icon:Object(I.jsx)(la,{}),"data-testid":"RemoveButton"}];return b(t)}}),j=r?"up":"down";return Object(I.jsx)(br.a,{direction:j,in:!r,timeout:250,onExited:s.remove,children:Object(I.jsx)(sa,{children:Object(I.jsx)(Wt.a,{borderBottom:1,width:"100%",position:"relative","data-lineid":e["data-lineid"],"data-testid":e["data-testid"],children:h})})})},ba=T.a.memo(da),ha=n(234),ja=n.n(ha),fa=Object(ft.a)(Ot.a)((function(e){return{minHeight:e.theme.spacing(3),"&:hover .MuiDivider-root":{borderColor:"rgba(0, 0, 0, 0.25)"}}})),pa=Object(ft.a)(Gt.a)({width:"100%",borderColor:"transparent"}),Oa=Object(ft.a)(ja.a)((function(e){return{color:e.theme.palette.secondary.light}})),va=function(e){var t=function(){e.songDispatch({type:"add-line",lineID:e.lineID})},n={onClick:t,"data-testid":"AddButton",icon:Object(I.jsx)(Oa,{})};return Object(I.jsx)(Oi,{menuItems:[n],children:Object(I.jsx)(fa,{container:!0,direction:"column",justifyContent:"center",onClick:t,"data-testid":e["data-testid"],children:Object(I.jsx)(pa,{})})})},ma=T.a.memo(va),ga=function(e,t){var n=e.metaKey||e.ctrlKey;return!("z"!==e.key||!n)&&(e.shiftKey?t({type:"redo"}):t({type:"undo"}),!0)},ya=T.a.createContext([wn,wn,wn]),xa=function(){var e=Object(L.useContext)(ya),t=Object(c.a)(e,3);return[t[0],t[2]]},wa=function(){var e=Object(L.useContext)(ya),t=Object(c.a)(e,3);return[t[1],t[2]]},ka=function(e){var t=Object(L.useRef)([]),n=function(e){return function(t){t.target instanceof HTMLElement&&("INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName||t.target.isContentEditable)||(e(t),t.defaultPrevented&&t.stopImmediatePropagation())}};return Object(I.jsx)(ya.Provider,{value:[function(e){var r=n(e);t.current.push({original:e,wrapped:r}),window.addEventListener("keydown",r,!0)},function(e){var r=n(e);!function(){var e,n=Object(u.a)(t.current);try{for(n.s();!(e=n.n()).done;){var r=e.value;window.removeEventListener("keydown",r.wrapped,!0)}}catch(i){n.e(i)}finally{n.f()}}(),t.current.unshift({original:e,wrapped:r}),function(){var e,n=Object(u.a)(t.current);try{for(n.s();!(e=n.n()).done;){var r=e.value;window.addEventListener("keydown",r.wrapped,!0)}}catch(i){n.e(i)}finally{n.f()}}()},function(e){var n=t.current.findIndex((function(t){return t.original===e}));if(-1!==n){var r=t.current[n];window.removeEventListener("keydown",r.wrapped,!0),t.current.splice(n,1)}}],children:e.children})},Ca={pointerEvents:"none"},Sa=Object(ft.a)(pt.a)({width:"auto"}),La=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],a=ir(e.song),o=xa(),s=Object(c.a)(o,2),l=s[0],u=s[1],d=e.songDispatch,b=Object(L.useMemo)((function(){return{startInteraction:function(){setTimeout((function(){i(!0)}))},endInteraction:function(){setTimeout((function(){i(!1)}))}}}),[]),h=!r;Object(L.useEffect)((function(){var e=function(e){if(h)for(var t=0,n=[nr,ga];t<n.length;t++){if((0,n[t])(e,d))return void e.preventDefault()}};return l(e),function(){return u(e)}}),[h,l,u,d]);var j=function(e){return[Object(I.jsx)(ba,{chordLine:e,songDispatch:d,"data-lineid":e.id,"data-testid":"Line"},e.id),Object(I.jsx)(ma,{lineID:e,songDispatch:d,"data-testid":"NewLine"},"NewLine-".concat(e.id))]},f=function(){var t=e.song.timeSectionedChordLines.flatMap((function(e){return Xn(e,j)})),n=Object(I.jsx)(ma,{lineID:"beginning",songDispatch:d,"data-testid":"NewLine-Top"},"NewLine-Top");return t=t.splice(0,0,n)}(),p=h?void 0:Ca;return Object(I.jsx)(cr.Provider,{value:b,children:Object(I.jsx)(Sa,{onCopy:h?a:void 0,sx:p,elevation:0,tabIndex:0,children:Object(I.jsx)(Ot.a,{container:!0,justifyContent:"center",children:Object(I.jsx)(Ot.a,{item:!0,xs:10,children:f})})})})},Ta=n(497),Ia=function(){var e=Object(nn.b)().enqueueSnackbar,t=on(),n=Object(Tn.h)(),r=Object(L.useCallback)(function(){var r=Object(Ht.a)(Xt.a.mark((function r(i,a){var c,o,s,l,u,d;return Xt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=i.set("owner",a.userID),r.next=3,jn(c,a.authToken);case 3:if(o=r.sent,!Object(gn.isLeft)(o)){r.next=8;break}return r.next=7,t(o.left);case 7:return r.abrupt("return");case 8:if(s=it.fromJSONObject(o.right),!Object(gn.isLeft)(s)){r.next=14;break}return console.error("Backend response does not match song format"),console.log(o.right),e("A failure happened. Check console for more error details",{variant:"error"}),r.abrupt("return");case 14:l=s.right,u=st.root.withID(l.id),d=u.withEditMode(),n.push(d.URL());case 18:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[e,t,n]),i=Object(L.useCallback)(function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUnsaved()){e.next=3;break}return e.next=3,r(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r]);return i},Ba=Object(k.b)({undoStack:Object(k.a)(),currentSongIndex:-1,lastSavedAt:null}),Ea=function(e){var t=e.undoStack.get(e.currentSongIndex);if(void 0===t)throw new Error("Invalid state: no valid entry found in undo stack for current state");return t.set("lastSavedAt",e.lastSavedAt)},Da=function(e,t,n){switch(t.type){case"undo":return 0===e.currentSongIndex?e:e=e.update("currentSongIndex",(function(e){return e-1}));case"redo":var r=e.undoStack.size-1;return e.currentSongIndex===r?e:e=e.update("currentSongIndex",(function(e){return e+1}));case"set-last-saved-at":return e.set("lastSavedAt",t.lastSavedAt);default:var i=Ea(e),a=Ra(i,t,n);if(!1===a)return e;var c=e.currentSongIndex;return e=(e=e.update("undoStack",(function(e){return e=(e=function(e){return e.slice(0,c+1)}(e)).push(a)}))).update("currentSongIndex",(function(e){return e+1}))}},Ra=function(e,t,n){switch(t.type){case"replace-song":return t.newSong;case"set-header":if(void 0!==t.title){var r=t.title;e=e.update("metadata",(function(e){return Object(f.a)(Object(f.a)({},e),{},{title:r})}))}if(void 0!==t.composedBy){var i=t.composedBy;e=e.update("metadata",(function(e){return Object(f.a)(Object(f.a)({},e),{},{composedBy:i})}))}if(void 0!==t.performedBy){var a=t.performedBy;e=e.update("metadata",(function(e){return Object(f.a)(Object(f.a)({},e),{},{performedBy:a})}))}return e;case"add-line":return"beginning"===t.lineID?e.addBeginning(new de({})):e.addAfter(t.lineID,new de({}));case"remove-line":return e.removeElement(t.lineID);case"split-line":var o=e.splitLine(t.lineID,t.splitIndex),s=Object(c.a)(o,2),l=s[0];return!!s[1]&&l;case"merge-lines":var u=e.mergeLineWithPrevious(t.latterLineID),b=Object(c.a)(u,2),h=b[0];return!!b[1]&&h;case"batch-insert-lines":var j,p=e.get(t.insertLineID);return e=(j=e).addAfter.apply(j,[t.insertLineID].concat(Object(d.a)(t.copiedLines))),p.isEmpty()&&(e=e.removeElement(t.insertLineID)),e;case"batch-remove-lines":return e.removeMultipleElements(t.lineIDs);case"replace-line-lyrics":return e.replaceElement(t.lineID,(function(e){return e.replaceLyrics(t.newLyric)}));case"insert-overflow-lyrics":var O,v=t.overflowLyrics.filter((function(e){return!e.isEntirelySpace()&&!e.isEmpty()})).map((function(e){return de.fromLyrics(e)}));return(O=e).addAfter.apply(O,[t.insertionLineID].concat(Object(d.a)(v)));case"set-chord":return e.replaceElement(t.lineID,(function(e){return e.setChord(t.blockID,t.newChord)}));case"split-block":return e.replaceElement(t.lineID,(function(e){return e.splitBlock(t.blockID,t.splitIndex)}));case"drag-and-drop-chord":var m=e.findLineWithBlock(t.sourceBlockID),g=e.findLineWithBlock(t.destinationBlockID),y=m===g,x=function(e){y&&(m=e,g=e)};return"move"===t.dropType&&x(m=m.replaceElement(t.sourceBlockID,(function(e){return e.set("chord","")}))),0!==t.splitIndex&&x(g=g.splitBlock(t.destinationBlockID,t.splitIndex)),x(g=g.replaceElement(t.destinationBlockID,(function(e){return e.set("chord",t.newChord)}))),y?x(m=m.normalizeBlocks()):(m=m.normalizeBlocks(),g=g.normalizeBlocks()),e=(e=e.replaceElement(m,(function(){return m}))).replaceElement(g,(function(){return g}));case"set-section":var w=(e=e.updateCollection((function(e){return e.replace(t.lineID,(function(e){return e=function(e){if(void 0!==t.time){var n=e.setSectionTime(t.time);e=Object(c.a)(n,1)[0]}return e}(e=function(e){if(void 0!==t.label){var n=e.setSectionName(t.label);e=Object(c.a)(n,1)[0]}return e}(e))}))}))).validateTimestampedSections();return null!==w?(n.enqueueSnackbar(w.message,{variant:"warning"}),!1):e;case"transpose":switch(t.modifyMode){case"in-place":return e.transpose(t.originalKey,t.transposeKey);case"new-song":if(null===n.user)return n.enqueueSnackbar("Cannot create a new song without a logged in user",{variant:"error"}),!1;var k=e.fork();return k=k.transpose(t.originalKey,t.transposeKey),n.cloudSaveAction(k,n.user),n.enqueueSnackbar("Saving into a new song, please wait...",{variant:"info"}),!1}}},Aa=function(e,t){var n=Object(nn.b)().enqueueSnackbar,r=Ia(),i=Object(L.useContext)(Cn),a=Object(L.useMemo)((function(){return{user:i,enqueueSnackbar:n,cloudSaveAction:r}}),[i,n,r]),o=Object(L.useCallback)((function(e,n){var r=Da(e,n,a);if(e===r)return e;var i=Ea(e);return null===t||void 0===t||t(i,n),r}),[t,a]),s=Ba({undoStack:Object(k.a)([e]),currentSongIndex:0,lastSavedAt:e.lastSavedAt}),l=Object(L.useReducer)(o,s),u=Object(c.a)(l,2),d=u[0],b=u[1];return[Ea(d),b]},Pa=Object(ft.a)(Mn.a)((function(e){return{color:e.theme.palette.success.main}})),Fa=Object(ft.a)(_n.a)({display:"inherit"}),Na=function(e){var t=Aa(e.initialSong),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useState)(!1),o=Object(c.a)(a,2),s=o[0],l=o[1],u=e.expectedSong;return Object(L.useEffect)((function(){s||void 0!==u&&u.contentEquals(r)&&l(!0)}),[r,u,s,l]),Object(I.jsx)(Fa,{badgeContent:Object(I.jsx)(Pa,{}),invisible:!s,children:Object(I.jsx)(pt.a,{elevation:1,children:Object(I.jsx)(La,{song:r,songDispatch:i})})})},Va=function(e,t){var n=e;return n.title=t,n},Ma="Add Chords",_a=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ma}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Add a chord by hovering above a word, and clicking the outlined box. Let's add"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7"})," back above"," ",Object(I.jsx)(Pn,{display:"inline",children:"appear"}),"."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Ma),Ua="Add New Lines",za=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ua}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"You can add more lines by hovering below (or above) and existing line, and clicking the gray line or the add icon to the right."}),Object(I.jsx)(vt.a,{children:"Let's add a line, and change the lyrics to:"}),Object(I.jsx)(Pn,{children:"Why do birds suddenly ap-pear?"}),Object(I.jsx)(Pn,{children:"Every time you are near"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Ua),Ka="Chord Positioning",Wa=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"",lyric:new W("appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly")}),new H({chord:"F#7",lyric:new W(" ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]})]}),n=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly")}),new H({chord:"F#7",lyric:new W(" ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ka}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Sometimes you want to emphasize a chord landing on a specific syllable or between words. Without the overhead of standard notation, we can do this by breaking up lyrics and annotating spaces."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Let's change the lyrics to:"}),Object(I.jsx)(Pn,{children:"Why do birds suddenly ap-pear?"}),Object(I.jsxs)(vt.a,{children:["And add a tab after the"," ",Object(I.jsx)(Pn,{display:"inline",children:"?"})]}),Object(I.jsxs)(vt.a,{children:["Then add the chord"," ",Object(I.jsx)(Fn,{display:"inline",children:"F#7"})," to the space before"," ",Object(I.jsx)(Pn,{display:"inline",children:"ap-"})]}),Object(I.jsxs)(vt.a,{children:["Add the chord"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7sus4"})," to"," ",Object(I.jsx)(Pn,{display:"inline",children:"pear"})]}),Object(I.jsxs)(vt.a,{children:["Add the chord"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7"})," to the tabbed space after"," "]}),Object(I.jsx)(vt.a,{children:"It should look like this:"}),Object(I.jsx)(Na,{initialSong:t}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:n})]})}),Ka),Ga="Copy and Paste Lines",Ja=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"",lyric:new W("But I'm a ")}),new H({chord:"G",lyric:new W("creep, I'm a ")}),new H({chord:"B7",lyric:new W("weirdo")})]}),new de({blocks:[new H({chord:"",lyric:new W("What the hell am doing ")}),new H({chord:"C",lyric:new W("here? I don't be-")}),new H({chord:"Cm",lyric:new W("long here")})]}),new de({blocks:[new H({chord:"",lyric:new W("I don't care if it ")}),new H({chord:"G",lyric:new W("hurts, I wanna have con-")}),new H({chord:"B7",lyric:new W("trol")})]}),new de({blocks:[new H({chord:"",lyric:new W("I want a perfect ")}),new H({chord:"C",lyric:new W("body, I want a perfect ")}),new H({chord:"Cm",lyric:new W("soul")})]}),new de({blocks:[new H({chord:"",lyric:new W("I want you to ")}),new H({chord:"G",lyric:new W("notice when I'm not a-")}),new H({chord:"B7",lyric:new W("round")})]}),new de({blocks:[new H({chord:"",lyric:new W("You're so fucking ")}),new H({chord:"C",lyric:new W("special, I wish I was ")}),new H({chord:"Cm",lyric:new W("special")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"",lyric:new W("But I'm a ")}),new H({chord:"G",lyric:new W("creep, I'm a ")}),new H({chord:"B7",lyric:new W("weirdo")})]}),new de({blocks:[new H({chord:"",lyric:new W("What the hell am doing ")}),new H({chord:"C",lyric:new W("here? I don't be-")}),new H({chord:"Cm",lyric:new W("long here")})]}),new de({blocks:[new H({chord:"",lyric:new W("I don't care if it ")}),new H({chord:"G",lyric:new W("hurts, I wanna have con-")}),new H({chord:"B7",lyric:new W("trol")})]}),new de({blocks:[new H({chord:"",lyric:new W("I want a perfect ")}),new H({chord:"C",lyric:new W("body, I want a perfect ")}),new H({chord:"Cm",lyric:new W("soul")})]}),new de({blocks:[new H({chord:"",lyric:new W("I want you to ")}),new H({chord:"G",lyric:new W("notice when I'm not a-")}),new H({chord:"B7",lyric:new W("round")})]}),new de({blocks:[new H({chord:"",lyric:new W("You're so fucking ")}),new H({chord:"C",lyric:new W("special, I wish I was ")}),new H({chord:"Cm",lyric:new W("special")})]}),new de({blocks:[new H({chord:"",lyric:new W("But I'm a ")}),new H({chord:"G",lyric:new W("creep, I'm a ")}),new H({chord:"B7",lyric:new W("weirdo")})]}),new de({blocks:[new H({chord:"",lyric:new W("What the hell am doing ")}),new H({chord:"C",lyric:new W("here? I don't be-")}),new H({chord:"Cm",lyric:new W("long here")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ga}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Sometimes you want to just repeat what's on the page without entering it all over again - choruses with the same lyrics, repeating instrumental sections. You can do this by copying and pasting entire lines that you've already written out."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["The easiest way to copy is to drag down from some empty space on the left of the line you wish to start copying from, then pressing (CTRL or CMD) + C, or right click ","->"," copy."]}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["To paste, click to edit a lyric line, and press (CTRL or CMD) + V, or right click ","->"," paste."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Note that there's no partial copy - if any part of the line is selected during the copy, the whole line is copied."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"If you have trouble selecting a line, try dragging your cursor starting further left and above the line."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Let's try copying and pasting the repeated chorus:"}),Object(I.jsx)(Pn,{variantMapping:{body1:"div"},children:"But I'm a creep, I'm a weirdo"}),Object(I.jsx)(Pn,{variantMapping:{body1:"div"},children:"What the hell am I doing here? I don't belong here."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Copy those two lines, add a new line at the bottom, and paste it there."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Ga),qa="Drag and Drop Chords",Ha=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds ")}),new H({chord:"B7",lyric:new W("suddenly appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:qa}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"It's also possible to drag and drop chords onto different parts of the line when its initial placement wasn't quite correct. Just drag a chord and drop it to the space above or on another lyric."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"If you hold CTRL/CMD/ALT/Option while dragging and dropping, the chord will be copied instead of moved over."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Let's move the"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7"})," above"," ",Object(I.jsx)(Pn,{display:"inline",children:"suddenly"})," ","to above"," ",Object(I.jsx)(Pn,{display:"inline",children:"appear"}),"."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),qa),Ya="Edit Chords",Xa=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"Bm",lyric:new W("appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ya}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Click on a chord to change it, then press enter to commit your changes. Let's change the chord above"," ",Object(I.jsx)(Pn,{display:"inline",children:"appear"})," ","from ",Object(I.jsx)(Fn,{display:"inline",children:"Bm"})," to"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7"}),"."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Ya),Qa="Edit Lyrics",Za=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why oh why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Qa}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"You can edit the lyrics by clicking anywhere along the lyrics. Finish editing lyrics by pressing enter or clicking outside the text edit box. Chord Paper will move chords along with lyrics when you edit them. Let's change the lyrics to:"}),Object(I.jsx)(Pn,{children:"Why oh why do birds suddenly appear?"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Qa),$a="Instrumental Sections",ec=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"Bm",lyric:new W("\ue200")}),new H({chord:"A",lyric:new W("\ue200")}),new H({chord:"E",lyric:new W("\ue400")})]})]}),t=new it({}),n=new it({lines:[new de({blocks:[new H({chord:"Bm",lyric:new W("\ue200")}),new H({chord:"A",lyric:new W("\ue200")}),new H({chord:"E",lyric:new W("\ue400")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:$a}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"In addition to putting chords over lyrics, you can also put them in the spaces between lyrics. When there are no lyrics around the harmony, you can use tabs to create spacing in the lyrics for placing chords."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["You can do this by hitting"," ",Object(I.jsx)(Pn,{display:"inline",children:"tab"})," when editting lyrics, for a normal sized tab, or"," ",Object(I.jsx)(Pn,{display:"inline",children:"SHIFT + space"})," ","for a small sized tab, or"," ",Object(I.jsx)(Pn,{display:"inline",children:"SHIFT + tab"})," ","for a large sized tab."]}),Object(I.jsx)(Na,{initialSong:e}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Let's replicate the example from above using"," ",Object(I.jsx)(Pn,{display:"inline",children:"tab"}),"s. Start by editing the lyrics. Insert two normal sized tabs with the ",Object(I.jsx)(Pn,{display:"inline",children:"tab"})," ","key, and a large sized tab using"," ",Object(I.jsx)(Pn,{display:"inline",children:"SHIFT + tab"})," ","key. Then add"," ",Object(I.jsx)(Fn,{display:"inline",children:"Bm"}),","," ",Object(I.jsx)(Fn,{display:"inline",children:"A"}),","," ",Object(I.jsx)(Fn,{display:"inline",children:"E"}),","," ","respectively to each tab."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:t,expectedSong:n})]})}),$a),tc=n(236),nc=n.n(tc),rc="Labels",ic=Object(ft.a)(vt.a)(Object(f.a)({},Vi)),ac=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})],section:{type:"label",name:"Verse"}}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:rc}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:'It\'s common to label sections to navigate easily within the song. For example, some common labels are "Verse", "Chorus", "Bridge", or more simplified markers like "A", "B", etc.'}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Add a label to a line by hovering over the line, and then clicking the ",Object(I.jsx)(nc.a,{})," icon to insert a label for that line. Let's add"," ",Object(I.jsx)(ic,{display:"inline",children:"Verse"})," to the first line."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),rc),cc=n(167),oc=n.n(cc),sc=n(166),lc=n.n(sc),uc=n(240),dc=n.n(uc),bc=n(241),hc=n.n(bc),jc=n(164),fc=n.n(jc),pc=n(237),Oc=n.n(pc),vc=n(239),mc=n.n(vc),gc=n(238),yc=n.n(gc),xc=n(281),wc=function(e){return Object(I.jsxs)(xc.a,Object(f.a)(Object(f.a)({},e),{},{children:[Object(I.jsx)("path",{d:"m 20.059576,18.25 c 0.6875,0 1.25,0.5625 1.25,1.25 v 1.25 c 0,0.6875 -0.5625,1.25 -1.25,1.25 h -5 v -7.5 h 5 c 0.6875,0 1.25,0.5625 1.25,1.25 V 17 c 0,0.6875 -0.5625,1.25 -1.25,1.25 z m -3.125,-1.875 v 0.9375 h 2.5 V 16.375 Z m 2.5,2.8125 h -2.5 v 0.9375 h 2.5 z"}),Object(I.jsx)("path",{d:"M 9.4345756,3.25 V 9.5 h -1.875 V 7.625 h -2.5 V 9.5 h -1.875 V 3.25 c 0,-0.6875 0.5625,-1.25 1.25,-1.25 h 3.75 c 0.6875,0 1.25,0.5625 1.25,1.25 z m -1.875,0.625 h -2.5 V 5.75 h 2.5 z"}),Object(I.jsx)("path",{d:"m 4.1789444,14.8468 -0.9943688,-0.994369 2.9831063,-2.983107 2.983107,2.983107 -0.9943695,0.994369 -1.2877078,-1.287707 -0.00497,4.966872 6.9655554,0.005 2.84e-4,1.407033 H 6.8736869 c -0.7756078,0 -1.4070319,-0.631424 -1.4070319,-1.407033 v -4.971844 z"}),Object(I.jsx)("path",{d:"M 19.056771,10.878876 V 5.9070325 C 19.056771,5.1314237 18.425346,4.5 17.649738,4.5 h -6.955162 l -4.48e-4,1.4070325 6.965554,0.005 -0.005,4.9668725 -1.287708,-1.2877075 -0.994368,0.9943685 2.983106,2.983108 2.983107,-2.983108 -0.994368,-0.9943685 z"})]}))},kc=function(e){return Sc(e,"Roboto","1.25rem","middle")},Cc=function(e,t){return Sc(e,"PressStart",t,"mathematical")},Sc=function(e,t,n,r){return function(i){return Object(I.jsx)(xc.a,Object(f.a)(Object(f.a)({},i),{},{children:Object(I.jsx)("g",{children:Object(I.jsx)("text",{style:{fontFamily:t,fontSize:n},x:"50%",y:"50%","dominant-baseline":r,"text-anchor":"middle",children:e})})}))}},Lc=Cc("A","1rem"),Tc=function(e){return Object(I.jsx)(xc.a,Object(f.a)(Object(f.a)({},e),{},{children:Object(I.jsx)("path",{d:"M6 6h2v12h-2z m1.5 6l8 6V6z m7 0 l8 6V6z"})}))},Ic=Cc("B","1rem"),Bc=kc("\u266d"),Ec=kc("\u266d\u266f"),Dc=function(e){return Object(I.jsx)(xc.a,Object(f.a)(Object(f.a)({},e),{},{children:Object(I.jsx)("path",{d:"M18,13c0,3.31-2.69,6-6,6s-6-2.69-6-6s2.69-6,6-6v4l5-5l-5-5v4c-4.42,0-8,3.58-8,8c0,4.42,3.58,8,8,8c4.42,0,8-3.58,8-8 H18z"})}))},Rc=function(e){return Object(I.jsx)(xc.a,Object(f.a)(Object(f.a)({},e),{},{children:Object(I.jsxs)("g",{transform:"matrix(0.6,0,0,0.6,2.0242947,2.4014213)",children:[Object(I.jsx)("path",{d:"m 16,21 c 0.3,0 0.6,-0.1 0.8,-0.4 l 13,-17 C 30.1,3.2 30.1,2.5 29.6,2.2 29.2,1.9 28.5,1.9 28.2,2.4 l -5.7,7.5 -1,-4.8 C 21.1,3.3 19.5,2 17.7,2 H 14.3 C 12.5,2 10.9,3.2 10.5,5 L 5.8,25.5 c -0.3,1.1 0,2.2 0.7,3.1 0.7,0.9 1.7,1.4 2.8,1.4 h 13.3 c 1.1,0 2.2,-0.5 2.9,-1.4 0.7,-0.9 0.9,-2 0.7,-3.1 L 23.7,15.8 C 23.6,15.3 23,14.9 22.5,15.1 22,15.2 21.6,15.8 21.8,16.3 l 1.5,5.8 H 8.6 L 12.4,5.6 c 0.2,-0.9 1,-1.5 1.8,-1.5 h 3.4 c 0.9,0 1.7,0.6 1.8,1.5 l 1.4,6.5 -5.6,7.4 c -0.3,0.4 -0.3,1.1 0.2,1.4 0.2,0 0.4,0.1 0.6,0.1 z"}),Object(I.jsx)("path",{d:"m 15,8 h 2 C 17.6,8 18,7.6 18,7 18,6.4 17.6,6 17,6 h -2 c -0.6,0 -1,0.4 -1,1 0,0.6 0.4,1 1,1 z"}),Object(I.jsx)("path",{d:"m 15,11 h 2 c 0.6,0 1,-0.4 1,-1 0,-0.6 -0.4,-1 -1,-1 h -2 c -0.6,0 -1,0.4 -1,1 0,0.6 0.4,1 1,1 z"}),Object(I.jsx)("path",{d:"m 15,14 h 2 c 0.6,0 1,-0.4 1,-1 0,-0.6 -0.4,-1 -1,-1 h -2 c -0.6,0 -1,0.4 -1,1 0,0.6 0.4,1 1,1 z"})]})}))},Ac=Cc("+5","0.85rem"),Pc=kc("\u266f"),Fc=Object(ft.a)(si.a)((function(e){var t=e.theme;return Object(f.a)({minWidth:0},Yi(t))})),Nc=function(e,t,n,r){var i=function(e){e.preventDefault()};return function(a){return Object(I.jsx)(di.a,{title:n,children:Object(I.jsx)("span",{children:Object(I.jsx)(Fc,Object(f.a)(Object(f.a)({onKeyUp:i,size:"large",sx:{color:r}},a),{},{children:e}))})},t)}},Vc={Play:Nc(Object(I.jsx)(En.a,{}),"play-button","Play the damn song","primary.main"),Pause:Nc(Object(I.jsx)(fc.a,{}),"pause-button","Pause","secondary.main"),JumpBack:Nc(Object(I.jsx)(Oc.a,{}),"jump-back-buttonn","Jump Back","primary.main"),JumpForward:Nc(Object(I.jsx)(Dc,{}),"jump-forward-button","Jump Forward","primary.main"),SkipBack:Nc(Object(I.jsx)(yc.a,{}),"skip-back-button","Go back a section","primary.main"),SkipForward:Nc(Object(I.jsx)(mc.a,{}),"skip-back-button","Go forward a section","primary.main"),Beginning:Nc(Object(I.jsx)(Tc,{}),"beginning-button","Go to Beginning","primary.main"),DecreaseTempo:Nc(Object(I.jsx)(dc.a,{}),"decrease-tempo-button","Play slower","primary.main"),IncreaseTempo:Nc(Object(I.jsx)(hc.a,{}),"increase-tempo-button","Play faster","primary.main"),TempoMenu:Nc(Object(I.jsx)(Rc,{}),"tempo-menu","Change tempo","primary.main"),ABLoopMenu:Nc(Object(I.jsx)(wc,{}),"ab-loop-menu","Set A/B Loop","primary.main"),TransposeMenu:Nc(Object(I.jsx)(Ec,{}),"transpose-menu","Change pitch","primary.main"),TransposeDown:Nc(Object(I.jsx)(Bc,{}),"transpose-down-button","Down half step","primary.main"),TransposeUp:Nc(Object(I.jsx)(Pc,{}),"transpose-up-button","Up half step","primary.main"),CloseMenu:Nc(Object(I.jsx)(yt.a,{}),"close-menu","Close Menu","secondary.main"),SetPointA:Nc(Object(I.jsx)(Lc,{}),"set-point-a","Set Point A","action.active"),ClearPointA:Nc(Object(I.jsx)(Lc,{}),"clear-point-a","Clear Point A","primary.main"),SetPointB:Nc(Object(I.jsx)(Ic,{}),"set-point-b","Set Point B","action.active"),ClearPointB:Nc(Object(I.jsx)(Ic,{}),"clear-point-b","Clear Point B","primary.main"),EnableDefaultLoop:Nc(Object(I.jsx)(Ac,{}),"enable-default-loop","Loop 5 seconds from A","action.active"),DisableDefaultLoop:Nc(Object(I.jsx)(Ac,{}),"disable-plus-5","Disable default looping","primary.main")},Mc=Object(ft.a)(Wt.a)({display:"flex",alignContent:"center",flexShrink:0,flexGrow:0,height:"100%"}),_c=Object(ft.a)(Gt.a)((function(e){var t=e.theme;return{marginLeft:0,marginRight:0,marginTop:t.spacing(1.5),marginBottom:t.spacing(1.5)}})),Uc=function(e){var t=e.children.filter((function(e){return null!==e&&void 0!==e})),n=t.map((function(n,r){var i="left"===e.dividers&&0===r||"right"===e.dividers&&r===t.length-1;if(!0!==e.edgeDivider&&i)return Object(I.jsx)(T.a.Fragment,{children:n},r);var a=Object(I.jsx)(_c,{orientation:"vertical",flexItem:!0},"divider-".concat(r)),c="right"===e.dividers?[n,a]:[a,n];return Object(I.jsx)(T.a.Fragment,{children:c},r)}));return Object(I.jsx)(Mc,{sx:e.sx,children:n})},zc=Object(ft.a)(Mc)({justifyContent:"space-between"}),Kc=Object(ft.a)(vt.a)((function(e){var t=e.theme;return{color:Zi,minWidth:Qi(t,"h6","200%"),display:"flex",justifyContent:"center",alignItems:"center"}})),Wc=function(e){var t=Math.round(e.tempoPercentage),n="".concat(t,"%"),r=t-5<50,i=t+5>100;return Object(I.jsxs)(zc,{children:[Object(I.jsx)(Vc.DecreaseTempo,{onClick:function(){return e.onTempoChange(t-5)},disabled:r}),Object(I.jsx)(di.a,{title:"Playback speed",children:Object(I.jsx)(Kc,{variant:"h6",children:Object(I.jsx)(Wt.a,{children:n})})}),Object(I.jsx)(Vc.IncreaseTempo,{onClick:function(){return e.onTempoChange(t+5)},disabled:i})]})},Gc=T.a.memo(Wc),Jc=Object(ft.a)(Mc)({justifyContent:"space-between"}),qc=Object(ft.a)(vt.a)((function(e){var t=e.theme;return{color:Zi,minWidth:Qi(t,"h6","\u266f12"),display:"flex",justifyContent:"center",alignItems:"center"}})),Hc=function(e){var t=Math.round(e.transposeLevel),n=t-1<-12,r=t+1>12,i=e.transposeLevel>0?"\u266f".concat(e.transposeLevel):e.transposeLevel<0?"\u266d".concat(-e.transposeLevel):"\u266e0";return Object(I.jsxs)(Jc,{children:[Object(I.jsx)(Vc.TransposeDown,{onClick:function(){return e.onTransposeChange(t-1)},disabled:n}),Object(I.jsx)(di.a,{title:"Transposition",children:Object(I.jsx)(qc,{variant:"h6",children:Object(I.jsx)(Wt.a,{children:i})})}),Object(I.jsx)(Vc.TransposeUp,{onClick:function(){return e.onTransposeChange(t+1)},disabled:r})]})},Yc=T.a.memo(Hc),Xc=n(449),Qc=n(450),Zc=n(498),$c=n(478),eo=Object(ft.a)(Zc.a)((function(e){return{border:"none",borderRadius:e.theme.spacing(1)}})),to=function(e){var t=Object(L.useContext)(Kn),n=Object(nn.b)().enqueueSnackbar,r=e.abLoop,i=null!==r.timeA,a=!r.isDefaultLoop()&&null!==r.timeB,c=r.isDefaultLoop(),o=!c,s=function(){return t.current()},l=function(t){var n=function(e){if(!e.isSet())return e.mode;if("disabled"===e.mode)return"rewind";return e.mode}(t);e.onABLoopChange(t.setMode(n))},u=function(e){Object(v.isLeft)(e)?n(e.left.message,{variant:"warning"}):l(e.right)},d=function(){l(r.clearB())},b=d,h=Object(I.jsx)(Vc.SetPointA,{onClick:function(){u(r.setA(s()))}}),j=i?Object(I.jsx)(Vc.ClearPointA,{onClick:function(){l(r.clearA())}}):h,f=Object(I.jsx)(Vc.SetPointB,{onClick:function(){u(r.setB(s()))}}),p=a?Object(I.jsx)(Vc.ClearPointB,{onClick:d}):f,O=Object(I.jsx)(Vc.EnableDefaultLoop,{onClick:function(){l(r.setDefaultLoop())}}),m=c?Object(I.jsx)(Vc.DisableDefaultLoop,{onClick:b}):O;return Object(I.jsxs)(Uc,{dividers:"left",children:[Object(I.jsxs)(Mc,{children:[j,Object(I.jsx)(zt.a,{in:o,orientation:"horizontal",children:p})]}),m,Object(I.jsxs)($c.a,{size:"small",color:"primary",value:r.mode,onChange:function(t,n){var i=null!==n&&void 0!==n?n:"disabled";e.onABLoopChange(r.setMode(i))},exclusive:!0,children:[Object(I.jsx)(eo,{value:"rewind",children:Object(I.jsx)(Xc.a,{})}),Object(I.jsx)(eo,{value:"loop",children:Object(I.jsx)(Qc.a,{})})]})]})},no=T.a.memo(to),ro=["tempo","transpose","abLoop"],io=function(e){var t,n=Object(L.useState)(null),r=Object(c.a)(n,2),i=r[0],a=r[1],o=void 0===e.transpose?null:{icon:Object(I.jsx)(Vc.TransposeMenu,{onClick:function(){return a("transpose")}}),controls:Object(I.jsx)(Yc,{transposeLevel:e.transpose.level,onTransposeChange:e.transpose.onChange})},s={icon:Object(I.jsx)(Vc.TempoMenu,{onClick:function(){return a("tempo")}}),controls:Object(I.jsx)(Gc,{tempoPercentage:e.tempo.percentage,onTempoChange:e.tempo.onChange})},l={icon:Object(I.jsx)(Vc.ABLoopMenu,{onClick:function(){return a("abLoop")}}),controls:Object(I.jsx)(no,{abLoop:e.abLoop.abLoop,onABLoopChange:e.abLoop.onChange})},d=null!==i,b=Object(I.jsx)(zt.a,{in:d,orientation:"horizontal",children:Object(I.jsx)(Vc.CloseMenu,{onClick:function(){return a(null)}})},"menu-close-button"),h={tempo:s,transpose:o,abLoop:l},j=function(e){var t=h[e];if(null===t)return[];var n=i===e,r=Object(I.jsx)(zt.a,{in:n,orientation:"horizontal",children:Object(I.jsxs)(Mc,{children:[t.controls,Object(I.jsx)(_c,{orientation:"vertical",flexItem:!0})]})},"".concat(e,"-control")),a=i===e||null===i;return[r,Object(I.jsx)(zt.a,{in:a,orientation:"horizontal",children:t.icon},"".concat(e,"-open-button"))]},f=[],p=Object(u.a)(ro);try{for(p.s();!(t=p.n()).done;){var O=j(t.value);f=f.concat(O)}}catch(v){p.e(v)}finally{p.f()}return f.push(b),Object(I.jsx)(I.Fragment,{children:f})},ao=T.a.memo(io),co=function(e){var t=wa(),n=Object(c.a)(t,2),r=n[0],i=n[1];Object(L.useEffect)((function(){if(e.show){var t=function(t){switch(t.code){case"Space":e.transport.togglePlay(),t.preventDefault();break;case"ArrowLeft":t.ctrlKey||t.metaKey?e.transport.skipBack.action():e.transport.jumpBack(),t.preventDefault();break;case"ArrowRight":return t.ctrlKey||t.metaKey?e.transport.skipForward.action():e.transport.jumpForward(),void t.preventDefault()}};return r(t),function(){i(t)}}}),[e,r,i]);var a=e.playing?Object(I.jsx)(Vc.Pause,{onClick:e.transport.togglePlay}):Object(I.jsx)(Vc.Play,{onClick:e.transport.togglePlay});return Object(I.jsxs)(Uc,{dividers:"right",children:[Object(I.jsx)(Vc.Beginning,{onClick:e.transport.goToBeginning}),Object(I.jsx)(Vc.SkipBack,{disabled:!e.transport.skipBack.enabled,onClick:e.transport.skipBack.action}),Object(I.jsx)(Vc.JumpBack,{onClick:e.transport.jumpBack}),a,Object(I.jsx)(Vc.JumpForward,{onClick:e.transport.jumpForward}),Object(I.jsx)(Vc.SkipForward,{disabled:!e.transport.skipForward.enabled,onClick:e.transport.skipForward.action})]})},oo=T.a.memo(co),so=Object(ft.a)(Mc)({marginLeft:"auto"}),lo=Object(ft.a)(Wt.a)((function(e){var t=e.theme.spacing(5);return Object(f.a)(Object(f.a)({},Xi),{},{justifyContent:"space-between",flexWrap:"wrap",overflow:"hidden",maxHeight:t})})),uo=function(e){return Object(I.jsxs)(lo,{children:[Object(I.jsx)(oo,{show:e.show,playing:e.playing,transport:e.transport}),Object(I.jsx)(so,{children:Object(I.jsx)(ao,{tempo:e.tempo,abLoop:e.abLoop,transpose:e.transpose})})]})},bo=n(467),ho=n(451),jo=n(452),fo=n(113),po=n(115),Oo=n(453),vo=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{width:"100%",paddingLeft:t.spacing(1.5),paddingRight:t.spacing(1.5)}})),mo=Object(ft.a)(bo.a)({color:S.a[400]}),go=function(e){return Object(ft.a)(si.a)((function(t){var n=t.theme;return{backgroundColor:e,width:"100%",height:"100%",color:Jt.a[700],padding:n.spacing(.5),textTransform:"none","&:hover":{opacity:.6,backgroundColor:e}}}))},yo=go(Jt.a[300]),xo={white:go("white"),pink:go(ho.a[200]),yellow:go(jo.a[200]),purple:go(fo.a[100]),lightBlue:go(po.a[200]),lightGreen:go(Oo.a[100])},wo=function(e){var t=e.stemControls.map((function(e){var t=e.enabled?xo[e.buttonColour]:yo;return Object(I.jsx)(Ot.a,{item:!0,xs:!0,children:Object(I.jsx)(t,{variant:"contained",onClick:function(){e.onEnabledChanged(!e.enabled)},children:Object(I.jsxs)(vo,{children:[Object(I.jsx)(vt.a,{variant:"body1",children:e.label}),Object(I.jsx)(Wt.a,{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:Object(I.jsx)(mo,{value:e.volume,onChange:function(t,n){"number"===typeof n&&e.onVolumeChanged(n)},min:0,max:200,step:10,size:"small",valueLabelDisplay:"auto"})})]})})},e.label)}));return Object(I.jsx)(Ot.a,{container:!0,children:t})},ko=T.a.memo(wo),Co="Track Player",So=Object(ft.a)(lo)({width:"min-content"}),Lo=Va((function(){var e=function(e,t){return{label:e,buttonColour:t,enabled:!0,onEnabledChanged:wn,volume:100,onVolumeChanged:wn}},t=[e("vocals","lightBlue"),e("other","purple"),e("bass","pink"),e("drums","yellow")];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Co}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["The track player is an integrated audio player which helps with your transcription, or aids with your jam. The track player is available once a song is saved. Once the song is saved, click the ",Object(I.jsx)(lc.a,{})," on the bottom right to bring up the player. This is available in both edit or play mode."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Adding a track"}),Object(I.jsx)(vt.a,{children:"The track player requires at least one track to play. If you add a new track, several options of track types will be presented."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"A single track is the most basic track type. The URL can be a Youtube URL, or a link to an mp3, or another media reference, etc."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"2/4/5 stem tracks allow independent control of each stem (e.g. drums, vocals). The URLs are expected to point to an audio file. One way to create these stem files is to use Spleeter."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:'The "Split into 2/4/5 stem" tracks will take an audio track and turn them into stems. This is the easiest way to get stem tracks. For the URL, a Youtube URL or mp3 would work well.'}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Transport"}),Object(I.jsx)(vt.a,{children:"In addition to the native player controls, there are also some transport buttons here the bottom:"}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.Play,{}),": Plays the song"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.Pause,{}),": Pauses the song"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.JumpBack,{}),": Jumps back 5 seconds"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.JumpForward,{}),": Jumps forward 5 seconds"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.SkipBack,{}),": Jumps back to the previous section (as marked by the section label times)"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.SkipForward,{}),": Jumps forward to the next section (as marked by the section label times)"]}),Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(Vc.Beginning,{}),": Jumps back to the beginning of the song"]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Speed"}),Object(I.jsx)(vt.a,{children:"On the right, you will see a control like this:"}),Object(I.jsx)(So,{children:Object(I.jsx)(Gc,{tempoPercentage:100,onTempoChange:wn})}),Object(I.jsx)(vt.a,{children:"Here, you can slow down the tempo of a track to listen more carefully. This will work with Youtube or mp3 tracks, and may or may not work with tracks from other sources."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Transpose"}),Object(I.jsx)(vt.a,{children:"If you have a stem track, you will also see a control on the right like this:"}),Object(I.jsx)(So,{children:Object(I.jsx)(Yc,{transposeLevel:0,onTransposeChange:wn})}),Object(I.jsx)(vt.a,{children:"This allows you to transpose the song up or down a desired amount of semitones."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Stems"}),Object(I.jsx)(vt.a,{children:"A stem is a part in the track, such as vocals, guitar, or drums. Once you end up with stem tracks, you will see controls like this:"}),Object(I.jsx)(ko,{stemControls:t}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"The exact stems will vary, but each stem can be muted by clicking on the respective button, or its volume adjusted via the slider."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{variant:"h6",children:"Keyboard shortcuts"}),Object(I.jsx)(vt.a,{children:"There are keyboard shortcuts for the transport controls, but they vary depending on the player is shown or minimized."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"There are keyboard shortcuts for the transport controls, but they vary depending on the player is shown or minimized."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"When the player is shown:"}),Object(I.jsx)(vt.a,{children:"/: minimize the player"}),Object(I.jsx)(vt.a,{children:"Space: play/pause"}),Object(I.jsx)(vt.a,{children:"Left arrow: jump back 5 seconds"}),Object(I.jsx)(vt.a,{children:"Right arrow: jump forward 5 seconds"}),Object(I.jsx)(vt.a,{children:"CMD/Control + left arrow: jump back one section"}),Object(I.jsx)(vt.a,{children:"CMD/Control + right arrow: jump forward one section"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"When the player is minimized:"}),Object(I.jsx)(vt.a,{children:"/: shows the player"}),Object(I.jsx)(vt.a,{children:"CMD/Control + Enter: play/pause"}),Object(I.jsx)(vt.a,{children:"CMD/Control + left arrow: jump back 5 seconds"}),Object(I.jsx)(vt.a,{children:"CMD/Control + right arrow: jump forward 5 seconds"})]})}),Co),To="Logging In",Io=Va((function(){var e=ns(Lo);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:To}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["You can save and load your songs if you have logged in. When you want to save your song to the cloud, hover to the bottom right menu and click ",Object(I.jsx)(oc.a,{})," to commit the song. After the song is saved once, it will continue to save any changes automatically."]}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Having an account also means you can add music tracks to the"," ",Object(I.jsx)(qt.b,{to:e,children:"Track Player"}),"."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Accounts are provided on an invite basis right now. Requests for invites coming soon."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["If you don't want to sign in or save your songs to the cloud, I get it. You can also reveal (offline) Save and Load menu icons in the bottom right menu by entering the"," ",Object(I.jsx)("a",{href:"https://en.wikipedia.org/wiki/Konami_Code",children:"Konami Code"})," ","to save and load the files striaght to your computer."]})]})}),To),Bo="Merge Lines",Eo=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds")})]}),new de({blocks:[new H({chord:"",lyric:new W("suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Bo}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Sometimes the lyrics that we paste in is not the division we want. Let's merge the two lines. Click into the second line, move the cursor to the beginning of the line, and press"}),Object(I.jsx)(vt.a,{children:"(CTRL+Backspace : Windows | CMD+Backspace : Mac)"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Bo),Do="Paste Lyrics",Ro=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]}),new de({blocks:[new H({chord:"",lyric:new W("Just like me, they long to be")})]}),new de({blocks:[new H({chord:"",lyric:new W("Close to you")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Do}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"It would be annoying to have to type out the lyrics. But we can paste it in! Copy these lyrics, click into the second line, and paste:"}),Object(I.jsx)(Pn,{variantMapping:{body1:"div"},children:"Every time you are near"}),Object(I.jsx)(Pn,{variantMapping:{body1:"div"},children:"Just like me, they long to be"}),Object(I.jsx)(Pn,{variantMapping:{body1:"div"},children:"Close to you"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Do),Ao="Play Mode",Po=Va((function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ao}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Play mode is where you focus on playing the song rather than writing or transcribing it. The chords and lyrics are laid out for ease of reading while playing through."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"To go forward a page, left click anywhere on the page, or tap any button except the buttons that go back a page."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"To go back a page, right click anywhere on the page, or tap left, up, or backspace."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Try this by going into your own song or the demo song, hovering over the menu icon on the bottom right, and clicking the"," ",Object(I.jsx)(En.a,{})," icon."]})]})}),Ao),Fo="Remove Chords",No=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ")}),new H({chord:"B7",lyric:new W("appear?")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly appear?")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Fo}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Simply remove all the chord text when editing to clear the chord. Let's remove the"," ",Object(I.jsx)(Fn,{display:"inline",children:"B7"}),"."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Fo),Vo="Remove Lines",Mo=Object(ft.a)(lr.a)({color:hr.a[300]}),_o=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Vo}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Similarly, you can remove a line by hovering over the line, and clicking the ",Object(I.jsx)(Mo,{})," icon to the right. Let's remove the second line of lyrics."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Vo),Uo="Remove Multiple Lines",zo=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every ")}),new H({chord:"Bm7",lyric:new W("time you are ")}),new H({chord:"Em7",lyric:new W("near")})]}),new de({blocks:[new H({chord:"Am7",lyric:new W("Just like me, ")}),new H({chord:"D7",lyric:new W("they long to be")})]}),new de({blocks:[new H({chord:"G^",lyric:new W("Close to you")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Uo}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"You can remove multiple lines at once by dragging and selecting over multiple lines, and then pressing Backspace/Delete."}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Let's remove the last three lines."}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Uo),Ko="Split Lines",Wo=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear? Every ")}),new H({chord:"B7",lyric:new W("time you are near")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear? ")})]}),new de({blocks:[new H({chord:"",lyric:new W("Every ")}),new H({chord:"B7",lyric:new W("time you are near")})]})]});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Ko}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Similarly, we can split lines that may be too long for our chart into two lines. Move the cursor to where you want the line to split, and press"}),Object(I.jsx)(vt.a,{children:"(CTRL+Enter : Windows | CMD+Enter : Mac)"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Let's break the one long line of lyrics up, so that it looks like:"}),Object(I.jsx)(Pn,{children:"Why do birds suddenly appear?"}),Object(I.jsx)(Pn,{children:"Every time you are near"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})}),Ko),Go="Learn Chord Paper",Jo=function(){return Object(I.jsx)(vt.a,{variant:"h5",children:Go})},qo=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{children:"Chord Paper aims to be as intuitive and handy as possible, but there could still be features that aren't obvious as we work out the kinks. Let's walk through the basics together by making some changes to chords and lyrics!"}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Since Chord Paper is still in early stages, some of these could change in the future."})]})},Ho=Va((function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Jo,{}),Object(I.jsx)(Nn,{}),Object(I.jsx)(qo,{})]})}),Go),Yo=n(198),Xo=n.n(Yo),Qo="Labels with Timestamp",Zo=Object(ft.a)(vt.a)(Vi),$o=function(){return Object(L.useContext)(Kn).current=function(){return 83},null},es=Va((function(){var e=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})],section:{type:"label",name:"Verse"}}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]}),t=new it({lines:[new de({blocks:[new H({chord:"C^",lyric:new W("Why do birds suddenly ap-")}),new H({chord:"B7sus4",lyric:new W("pear?")}),new H({chord:"B7",lyric:new W("\ue200")})],section:{type:"time",name:"Verse",time:83}}),new de({blocks:[new H({chord:"",lyric:new W("Every time you are near")})]})]}),n=ns(Lo);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(vt.a,{variant:"h5",children:Qo}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"After creating a label, it's possible to annotate each section with the time of recording, e.g. this verse is at 2:10."}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["If you hover over the"," ",Object(I.jsx)(Zo,{display:"inline",children:"Verse"})," label, a floating input will show up. You can enter a time by typing it in, and then pressing enter."]}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["Alternatively, you can set the time to the current time in the"," ",Object(I.jsx)(qt.b,{to:n,children:"track player"})," by clicking the"," ",Object(I.jsx)(Xo.a,{})," button."]}),Object(I.jsx)(Nn,{}),Object(I.jsxs)(vt.a,{children:["In this example, pretend that the current verse starts at time 1:23 and that is the current time in the track player. Let's set the time of the label to 1:23 by clicking the"," ",Object(I.jsx)(Xo.a,{})," button."]}),Object(I.jsx)(Nn,{}),Object(I.jsx)(vt.a,{children:"Try it!"}),Object(I.jsxs)(Wn,{children:[Object(I.jsx)($o,{}),Object(I.jsx)(Na,{initialSong:e,expectedSong:t})]})]})}),Qo),ts=[{route:new ht("start").URL(),component:Ho},{route:new ht("edit-chord").URL(),component:Xa},{route:new ht("remove-chord").URL(),component:No},{route:new ht("add-chord").URL(),component:_a},{route:new ht("drag-and-drop-chord").URL(),component:Ha},{route:new ht("edit-lyrics").URL(),component:Za},{route:new ht("instrumentals").URL(),component:ec},{route:new ht("chord-positioning").URL(),component:Wa},{route:new ht("add-line").URL(),component:za},{route:new ht("remove-line").URL(),component:_o},{route:new ht("paste-lyrics").URL(),component:Ro},{route:new ht("remove-multiple-lines").URL(),component:zo},{route:new ht("merge-lines").URL(),component:Eo},{route:new ht("split-lines").URL(),component:Wo},{route:new ht("copy-and-paste").URL(),component:Ja},{route:new ht("labels").URL(),component:ac},{route:new ht("time-labels").URL(),component:es},{route:new ht("play-mode").URL(),component:Po},{route:new ht("login").URL(),component:Io},{route:new ht("track-player").URL(),component:Lo}],ns=function(e){var t=ts.find((function(t){return t.component.title===e.title}));if(void 0===t)throw new Error("Input tutorial component not found in list - is the list up to date?");return t.route},rs=Object(ft.a)(En.a)({color:"white"}),is=Object(ft.a)(pt.a)((function(e){var t=e.theme;return{marginTop:t.spacing(5),marginBottom:t.spacing(5),padding:t.spacing(5),minHeight:t.spacing(46),width:t.spacing(92),position:"relative"}})),as=Object(ft.a)(Dn.a)((function(e){var t=e.theme;return{position:"absolute",bottom:t.spacing(2),right:t.spacing(2)}})),cs=function(e){return Object(I.jsx)(Ts,{children:Object(I.jsx)(os,{route:e.route})})},os=function(e){var t=function(t){return t.route===e.route},n=ts.find(t);if(void 0===n)return Object(I.jsx)(An,{});var r=ts.findIndex(t),i=null;if(r<ts.length-1){var a=ts[r+1];i=Object(I.jsx)(qt.b,{to:a.route,children:Object(I.jsx)(as,{color:"primary",children:Object(I.jsx)(rs,{})})})}return Object(I.jsxs)(is,{children:[Object(I.jsx)(n.component,{}),i]})},ss=function(){return ts.map((function(e){return Object(I.jsx)(Tn.c,{path:e.route,exact:!0,children:Object(I.jsx)(cs,{route:e.route})},e.route)}))},ls=n(468),us=n(500),ds=n.p+"static/media/google_signin.1875863c.svg",bs=Object(ft.a)(pt.a)({width:"100%",cursor:"pointer"}),hs=Object(ft.a)(vt.a)((function(e){return{margin:e.theme.spacing(2),color:Jt.a[600]}})),js=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{marginTop:t.spacing(2),marginBottom:t.spacing(2)}})),fs="google-sign-in",ps=function(e){var t=Object(nn.b)().enqueueSnackbar,n=Object(L.useState)(!1),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Object(L.useState)(null),s=Object(c.a)(o,2),l=s[0],u=s[1],d=Object(L.useState)(null),b=Object(c.a)(d,2),h=b[0],j=b[1],f=T.a.useContext(Cn),p=function(e){return null===e};if(Object(L.useEffect)((function(){i||(void 0!==window.gapi?a(!0):t("gapi is not loaded, working offline only",{variant:"error"}))}),[i,t]),Object(L.useEffect)((function(){null!==h&&(Object(gn.isLeft)(h)?(console.error(h.left),t("Login failed for an unknown reason, please check console for more details",{variant:"error"})):t("Login failed: ".concat(h.right.msg),{variant:"error"}),j(null))}),[t,h,j]),Object(L.useEffect)((function(){i&&gapi.load("auth2",(function(){var n=function(t,n){var r=function(e){if(null===e)return null;if(Object(gn.isLeft)(e))return null;var t=e.right;return"no_account"!==t.code&&"failed_google_verification"!==t.code?null:t}(t);null!==r?u(r):j(t),e.onUserChanged(null),n.signOut()},r=function(){var r=Object(Ht.a)(Xt.a.mark((function r(i,a){var c,o,s;return Xt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=i.get().getAuthResponse().id_token,r.next=3,un(c);case 3:if(o=r.sent,!Object(gn.isLeft)(o)){r.next=7;break}return n(o.left,a),r.abrupt("return");case 7:if(l=o.right,u=i,null!==(s=Ln(l)?new kn(u,l.id):null)){r.next=12;break}return console.error("JSON payload is not a user",o.right),t("Failed to login to backend. Check console for more error details",{variant:"error"}),r.abrupt("return");case 12:e.onUserChanged(s);case 13:case"end":return r.stop()}var l,u}),r)})));return function(e,t){return r.apply(this,arguments)}}();if(p(f)){gapi.auth2.init({client_id:"650853277550-ta69qbfcvdl6tb5ogtnh2d07ae9rcdlf.apps.googleusercontent.com",scope:"profile email"}).then((function(e){e.attachClickHandler(document.getElementById(fs),{},(function(){return r(e.currentUser,e)}),(function(e){console.error("Failed to login to Google",e)})),e.isSignedIn.get()&&r(e.currentUser,e)}))}}))}),[t,f,e,i,u,j]),!i)return Object(I.jsx)("div",{});var O=p(f)?"Sign In":null===f.name?"You Logged In But Who Are You???":f.name,v=function(){var e=function(){if(null===l)return null;switch(l.code){case"no_account":var e=ns(Io),t=Object(I.jsx)(vn.a,{href:"https://forms.gle/4kgLF6oXPfFYDTm86",target:"_blank",rel:"noopener",children:"here"});return Object(I.jsxs)(ls.a,{severity:"info",children:[Object(I.jsx)(us.a,{children:"No account found"}),Object(I.jsx)(js,{children:"Thanks for stopping by! Looks like there is no Chord Paper account associated with your Google account."}),Object(I.jsxs)(js,{children:["You can still use the offline functionalities for now. You won't be able to save any songs that you write right now. See more details"," ",Object(I.jsx)(qt.b,{to:e,children:"here"}),"."]}),Object(I.jsx)(js,{children:"In addition to being able to save your song, you will also be able to use the audio player with an account (check out how that works in the Demo, accessible on the left hand menu)"}),Object(I.jsxs)(js,{children:["To request an account, please fill out the form"," ",t,". I will try to get back to you soon!"]})]});case"failed_google_verification":return Object(I.jsxs)(ls.a,{severity:"error",children:[Object(I.jsx)(us.a,{children:"Google account verification failed"}),Object(I.jsx)(js,{children:"Your Google account failed server verification."}),Object(I.jsx)(js,{children:"Please try to refresh and login to your Google account again."})]});default:return null}}();return Object(I.jsx)(Qt.a,{open:null!==e,onClose:function(){return u(null)},children:e})}();return Object(I.jsxs)(bs,{id:fs,children:[Object(I.jsxs)(Ot.a,{container:!0,alignItems:"center",justifyContent:"center",children:[Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)("img",{src:ds,alt:"Google Signin",style:{display:"inline-block",objectFit:"contain"}})}),Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)(hs,{variant:"h6",display:"inline",children:O})})]}),v]})},Os={cursor:"pointer"},vs=Object(ft.a)(Et.a)(Os),ms=Object(ft.a)(yt.a)(Os),gs=Object(ft.a)(Vt.a)({display:"flex",flexDirection:"column"}),ys=Object(ft.a)(Ot.a)({maxWidth:"none"}),xs=function(e){return Object(I.jsx)(gs,{variant:"persistent",open:e.open,anchor:"left",children:Object(I.jsx)(pt.a,{sx:{minWidth:"24px",height:"100vh"},children:Object(I.jsxs)(Ot.a,{container:!0,direction:"column",alignContent:"center",sx:{height:"100%",width:"100%"},children:[Object(I.jsx)(ys,{item:!0,xs:1}),Object(I.jsx)(ys,{item:!0,xs:1,children:Object(I.jsx)(vs,{onClick:e.onClick})}),Object(I.jsx)(ys,{item:!0,xs:10})]})})})},ws=function(){var e=T.a.useContext(Cn),t=T.a.useContext(Sn),n=Object(L.useState)(!1),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Object(L.useState)(!1),s=Object(c.a)(o,2),l=s[0],u=s[1],d=Object(L.useState)(!1),b=Object(c.a)(d,2),h=b[0],j=b[1],f={variant:"h6"},p=function(){j(!h)},O={textDecoration:"none",color:"inherit"},v=Object(I.jsx)(Wt.a,{sx:{flexGrow:1}}),m=Object(I.jsx)(xs,{open:!i,onClick:function(){return a(!0)}}),g=Object(I.jsxs)(gs,{variant:"persistent",open:i,anchor:"left",children:[Object(I.jsxs)(Ot.a,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:3},children:[Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)(qt.b,{to:"/",style:O,"data-testid":"Menu-TitleButton",children:Object(I.jsx)(vt.a,{variant:"h5",display:"inline",sx:{color:Jt.a[600]},children:"Chord Paper"})})}),Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)(ms,{onClick:function(){return a(!1)}})})]}),Object(I.jsx)(Gt.a,{}),Object(I.jsxs)(Kt.a,{children:[Object(I.jsx)(qt.b,{to:st.rootURL(),style:O,"data-testid":"Menu-HomeButton",children:Object(I.jsxs)(Mt.a,{button:!0,children:[Object(I.jsx)(Ut.a,{children:Object(I.jsx)(Rt.a,{})}),Object(I.jsx)(_t.a,{primary:"New Song",primaryTypographyProps:f})]},"New Song")},st.rootURL()),null!==e&&Object(I.jsxs)(Mt.a,{button:!0,onClick:function(e){return u(!0)},children:[Object(I.jsx)(Ut.a,{children:Object(I.jsx)(It.a,{})}),Object(I.jsx)(_t.a,{primary:"Load Song",primaryTypographyProps:f})]},"Load Song"),Object(I.jsx)(qt.b,{to:bt.rootURL(),style:O,"data-testid":"Menu-DemoButton",children:Object(I.jsxs)(Mt.a,{button:!0,children:[Object(I.jsx)(Ut.a,{children:Object(I.jsx)(Nt.a,{})}),Object(I.jsx)(_t.a,{primary:"Demo",primaryTypographyProps:f})]},"Demo")},bt.rootURL()),function(){var e=ts.map((function(e){return{title:e.component.title,route:e.route}})).map((function(e){return Object(I.jsx)(qt.b,{to:e.route,style:O,children:Object(I.jsx)(Mt.a,{button:!0,children:Object(I.jsx)(_t.a,{inset:!0,primary:e.title})})},e.route)}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Mt.a,{button:!0,onClick:p,children:[Object(I.jsx)(Ut.a,{children:Object(I.jsx)(Lt.a,{})}),Object(I.jsx)(_t.a,{primary:"Learn",primaryTypographyProps:f}),h?Object(I.jsx)(wt.a,{}):Object(I.jsx)(Ct.a,{})]},"Learn"),Object(I.jsx)(zt.a,{in:h,timeout:"auto",children:Object(I.jsx)(Kt.a,{children:e})})]})}(),Object(I.jsx)(qt.b,{to:"/about",style:O,"data-testid":"Menu-AboutButton",children:Object(I.jsxs)(Mt.a,{button:!0,children:[Object(I.jsx)(Ut.a,{children:Object(I.jsx)(Pt.a,{})}),Object(I.jsx)(_t.a,{primary:"About",primaryTypographyProps:f})]},"About")},"/about")]}),v,Object(I.jsx)(ps,{onUserChanged:t})]});return Object(I.jsxs)(I.Fragment,{children:[m,g,l&&Object(I.jsx)(In,{open:!0,onClose:function(){return u(!1)}})]})},ks=T.a.memo(ws),Cs=Object(ft.a)(vt.a)((function(e){return{position:"absolute",top:0,right:0,padding:e.theme.spacing(1),color:Jt.a[600]}})),Ss=function(){var e,t=null!==(e="0.7.1.30.gbc640a0")?e:"dev-build";return Object(I.jsx)(Cs,{variant:"subtitle2",children:t})},Ls=Object(ft.a)(Ot.a)({backgroundImage:"url(".concat(mt,")"),minHeight:"100vh"}),Ts=function(e){var t=Object(I.jsx)(ks,{});return void 0!==e.menuElement&&(t=e.menuElement),Object(I.jsxs)(I.Fragment,{children:[t,Object(I.jsx)(Ls,{container:!0,children:Object(I.jsx)(Ot.a,{item:!0,container:!0,justifyContent:"center",children:e.children})}),Object(I.jsx)(Ss,{})]})},Is=Object(ft.a)(pt.a)((function(e){var t=e.theme;return{marginTop:t.spacing(5),padding:t.spacing(5),minHeight:t.spacing(46),minWidth:t.spacing(92)}})),Bs=function(){return Object(I.jsxs)(Ot.a,{container:!0,"data-testid":"About",children:[Object(I.jsx)(Ot.a,{item:!0,xs:3}),Object(I.jsx)(Ot.a,{item:!0,xs:6,children:Object(I.jsxs)(Is,{children:[Object(I.jsx)(vt.a,{variant:"h6",children:"About Chord Paper"}),Object(I.jsx)(vt.a,{variant:"h6",children:"\xa0"}),Object(I.jsx)(vt.a,{children:"Chord Paper makes writing and reading chord sheets easier than the traditional monospace font formatting. It's a passion project born out of frustration at the clunkiness of writing chords on a computer."}),Object(I.jsx)(vt.a,{children:"\xa0"}),Object(I.jsx)(vt.a,{children:"Hope you will find that Chord Paper helps you focus more of your musical time on playing and listening, and less on formatting."}),Object(I.jsx)(vt.a,{children:"\xa0"}),Object(I.jsxs)(vt.a,{children:["Background audio separation is built on"," ",Object(I.jsx)("a",{href:"https://github.com/deezer/spleeter",children:"Spleeter"}),"."]}),Object(I.jsx)(vt.a,{children:"\xa0"}),Object(I.jsx)(vt.a,{children:"Credits:"}),Object(I.jsxs)(vt.a,{children:["Kubernetes infrastructure and deployment:"," ",Object(I.jsx)("a",{href:"https://github.com/pw1124",children:"@pw1124"})]}),Object(I.jsx)(vt.a,{children:"Initial design (all the good parts!): Key"}),Object(I.jsxs)(vt.a,{children:["Everything else:"," ",Object(I.jsx)("a",{href:"https://github.com/veedubyou",children:"@veedubyou"})]})]})}),Object(I.jsx)(Ot.a,{item:!0,xs:3})]})},Es=function(){return Object(I.jsx)(Ts,{children:Object(I.jsx)(Bs,{})})},Ds=n(250),Rs=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),As=function(){var e=Object(L.useState)(!0),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(I.jsx)(Ds.MobileView,{children:Object(I.jsxs)(Qt.a,{open:n,onClose:function(){r(!1)},children:[Object(I.jsx)(Zt.a,{children:"Mobile not supported"}),Object(I.jsxs)($t.a,{children:[Object(I.jsx)(Rs,{children:Object(I.jsx)(mn.a,{children:"Thanks for coming by to check out Chord Paper, but only desktop is supported right now."})}),Object(I.jsx)(Rs,{children:Object(I.jsx)(mn.a,{children:Object(I.jsx)("sub",{children:"Seriously don't try it, the mobile experience is awful."})})})]})]})})},Ps=n(455),Fs=n(272),Ns=function(){var e=Fs.a.apply(void 0,arguments),t=function(){throw console.error("----------------------BAD THING HAPPENED----------------------"),console.error("HTML5 Drag and Drop backend changed internally"),console.error("Drag and drop is probably broken"),console.error("----------------------BAD THING HAPPENED----------------------"),new Error("HTMLBackend changed and is now broken")},n=e;return void 0!==n.handleTopDragEnter&&null!==n.handleTopDragEnter||t(),n.__original__handleTopDragEnter=n.handleTopDragEnter,n.handleTopDragEnter=function(e){var t;null===(t=n.__original__handleTopDragEnter)||void 0===t||t.call(n,e),n.altKeyPressed=e.ctrlKey||e.metaKey||e.altKey},void 0!==n.handleTopDragOver&&null!==n.handleTopDragOver||t(),n.__original__handleTopDragOver=n.handleTopDragOver,n.handleTopDragOver=function(e){var t;null===(t=n.__original__handleTopDragOver)||void 0===t||t.call(n,e),n.altKeyPressed=e.ctrlKey||e.metaKey||e.altKey},e},Vs=function(e){return Object(I.jsx)(Ps.a,{backend:Ns,children:e.children})},Ms={Lydian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"#4",importance:"special"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"7",importance:"chordtone"}],Ionian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"7",importance:"chordtone"}],Mixolydian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Dorian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"6",importance:"special"},{interval:"b7",importance:"chordtone"}],Aeolian:[{interval:"1",importance:"root"},{interval:"2",importance:"normal"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Phrygian:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Locrian:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"b3",importance:"chordtone"},{interval:"4",importance:"normal"},{interval:"b5",importance:"chordtone"},{interval:"b6",importance:"normal"},{interval:"b7",importance:"chordtone"}],Dominant:[{interval:"1",importance:"root"},{interval:"b2",importance:"special"},{interval:"#2",importance:"special"},{interval:"3",importance:"chordtone"},{interval:"#4",importance:"special"},{interval:"b6",importance:"special"},{interval:"b7",importance:"chordtone"}]},_s=function(e,t){var n=Ms[t].map((function(t){return{note:Ue[e][t.interval],interval:t.interval,importance:t.importance}}));return{center:e,name:t,notes:n}},Us=be(Ms,(function(e){return function(e){return be(ve,(function(t){return _s(t,e)}))}(e)})),zs=function(){function e(t){Object(p.a)(this,e),this.scale=void 0,this.scale=t}return Object(O.a)(e,[{key:"name",value:function(){return"".concat(this.scale.center," ").concat(this.scale.name)}}]),e}(),Ks=function(e){return Object(I.jsx)(Hr.a,{label:"Starting Fret",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:e.startingFret,onChange:function(t){var n=parseInt(t.target.value);n<=0||n>21||n%1===0&&e.onStartingFretChanged(n)}})},Ws={highE:void 0,B:void 0,G:void 0,D:void 0,A:void 0,E:void 0},Gs=function(){function e(){Object(p.a)(this,e),this.noteMap=void 0,this.noteMap={highE:e.buildString("E"),B:e.buildString("B"),G:e.buildString("G"),D:e.buildString("D"),A:e.buildString("A"),E:e.buildString("E")}}return Object(O.a)(e,[{key:"getPositions",value:function(e,t,n){var r,i=be(Ws,(function(){return[]}));for(r in i){var a,c=this.noteMap[r][e],o=Object(u.a)(c);try{for(o.s();!(a=o.n()).done;){var s=a.value;s<t||s>n||i[r].push({fret:s,note:e})}}catch(l){o.e(l)}finally{o.f()}}return i}}],[{key:"buildString",value:function(t){for(var n=be(ve,(function(){return[]})),r=we[t],i=0;i<=e.maxFrets;i++){var a,c=r.semitonesUp(Oe(i)),o=Object(u.a)(c);try{for(o.s();!(a=o.n()).done;){n[a.value].push(i)}}catch(s){o.e(s)}finally{o.f()}}return n}}]),e}();Gs.maxFrets=24;var Js=new Gs,qs=function(e,t){switch(t){case"interval":return e.interval;case"note":return e.note}},Hs=n(144),Ys=Object(ft.a)(Wt.a)({transform:"rotate(270deg)","& svg":{transform:"scale(0.85)"},"& .title":{fontFamily:"PoriChord"}}),Xs={highE:1,B:2,G:3,D:4,A:5,E:6},Qs=function(e,t){var n,r=[];for(n in e){var i,a=Xs[n],c=e[n],o=Object(u.a)(c);try{var s=function(){var e=i.value,n=function(){var n=e.fret-t+1;if(n<=0)throw new Error("Invalid finger generated - got a zero or negative fretting");return n}(),c=function(){switch(e.importance){case"normal":return"black";case"root":return"#f44336";case"chordtone":return"#64b5f6";case"special":return"purple"}}(),o="root"===e.importance?Hs.c.SQUARE:Hs.c.CIRCLE;r.push([a,n,{text:e.labelText,color:c,shape:o}])};for(o.s();!(i=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}}return r},Zs=function(e){var t=Object(L.useRef)(null),n=Object(L.useRef)(null);Object(L.useEffect)((function(){if(null!==t.current){null!==n.current&&n.current.remove();var r=e.startingFret+4,i=function(e,t,n,r){var i,a=be(Ws,(function(){return[]})),c=Object(u.a)(e.notes);try{var o=function(){var e=i.value,c=Js.getPositions(e.note,t,n),o=void 0;for(o in c){var s,l=c[o].map((function(t){return{fret:t.fret,labelText:qs(e,r),importance:e.importance}}));(s=a[o]).push.apply(s,Object(d.a)(l))}};for(c.s();!(i=c.n()).done;)o()}catch(s){c.e(s)}finally{c.f()}return a}(e.scale,e.startingFret,r,"note"),a=new Hs.b(t.current);a.chord({barres:[],fingers:Qs(i,e.startingFret),title:e.scaleLabel}),a.configure({position:e.startingFret,fretLabelPosition:Hs.a.LEFT}),a.draw(),n.current=a,t.current.querySelectorAll(".nut-text,.position").forEach((function(e){if(e instanceof SVGTextElement){var t=function(e){if(0!==e.x.baseVal.numberOfItems&&0!==e.y.baseVal.numberOfItems)return[e.x.baseVal.getItem(0).value,e.y.baseVal.getItem(0).value]}(e);void 0!==t&&setTimeout((function(){return e.setAttribute("transform","rotate(90,".concat(t[0],",").concat(t[1],")"))}))}}))}}),[e.scale,e.startingFret,e.scaleLabel]);var r={ref:t};return Object(I.jsx)(Ys,Object(f.a)({},r))},$s=ji((function(e){return{background:"white",boxShadow:e.shadows[2]}})),el=Object(ft.a)(Wt.a)((function(e){return{margin:e.theme.spacing(2)}})),tl=function(e){var t=Object(L.useState)(new zs(e.scale).name()),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useState)(e.initialStartingFret),o=Object(c.a)(a,2),s=o[0],l=o[1],u=Object(I.jsxs)(Ot.a,{container:!0,children:[Object(I.jsx)(Ot.a,{item:!0,xs:6,children:Object(I.jsx)(el,{children:Object(I.jsx)(Ks,{startingFret:s,onStartingFretChanged:l})})}),Object(I.jsx)(Ot.a,{item:!0,xs:6,children:Object(I.jsx)(el,{children:Object(I.jsx)(Hr.a,{label:"Label",InputLabelProps:{shrink:!0},variant:"outlined",value:r,onChange:function(e){i(e.target.value)}})})})]});return Object(I.jsx)($s,{placement:"top",title:u,children:Object(I.jsx)("span",{children:Object(I.jsx)(Zs,{scale:e.scale,scaleLabel:r,startingFret:s})})})},nl=n(456),rl=n(465),il=function(){var e,t,n=[];for(e in ve)for(t in Ms)n.push({note:e,scaleName:t,label:"".concat(e," ").concat(t)});return n}(),al=function(e){var t=Object(nl.a)({matchFrom:"start"}),n=y.a.cloneDeep(il);return Object(I.jsx)(rl.a,{multiple:!0,options:n,filterOptions:t,getOptionLabel:function(e){return e.label},renderInput:function(e){return Object(I.jsx)(Hr.a,Object(f.a)(Object(f.a)({},e),{},{variant:"outlined",label:"Scales"}))},value:e.scales,onChange:function(t,n){e.onSelection(n)}})},cl=(n(338),n(462)),ol=n(457),sl=n(458),ll=n(459),ul=n(463);n(339);cl.a.use([ol.a,sl.a]);var dl,bl=Object(ft.a)(Wt.a)((function(e){return{margin:e.theme.spacing(2)}})),hl=Object(ft.a)(pt.a)({display:"block"}),jl=function(e){var t=Object(L.useState)([]),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useState)(5),o=Object(c.a)(a,2),s=o[0],l=o[1],u=Object(L.useRef)(null),d=Object(L.useRef)(null),b=Object(I.jsxs)(Ot.a,{container:!0,children:[Object(I.jsx)(Ot.a,{item:!0,xs:9,children:Object(I.jsx)(bl,{children:Object(I.jsx)(al,{scales:r,onSelection:i})})}),Object(I.jsx)(Ot.a,{item:!0,xs:3,children:Object(I.jsx)(bl,{children:Object(I.jsx)(Ks,{startingFret:s,onStartingFretChanged:l})})})]}),h=function(e){var t=Us[e.scaleName][e.note];return Object(I.jsx)(ll.a,{children:Object(I.jsx)(tl,{scale:t,initialStartingFret:s},new zs(t).name())})},j=r.length>4,f=r.length>8,p=function(){var e=f?r.map(h):r.slice(0,4).map(h);return Object(I.jsx)(ul.a,{slidesPerView:4,navigation:f,loop:f,onSlideChange:function(e){if(f&&null!==d.current){var t=(e.realIndex+4)%r.length;d.current.slideToLoop(t)}},onSwiper:function(e){u.current=e},children:e})}(),O=function(){if(!j)return null;var e=f?r.map(h):r.slice(4,8).map(h);return Object(I.jsx)(ul.a,{slidesPerView:4,loop:f,onSwiper:function(e){d.current=e},initialSlide:4,children:e})}();return Object(I.jsxs)(hl,{children:[b,p,O]})},fl=n.p+"static/media/error.91c3c13e.jpeg",pl=function(){return Object(I.jsx)("img",{src:fl,alt:"Song Loading Error",style:{objectFit:"scale-down"}})},Ol=n(470),vl=n(502),ml=T.a.forwardRef((function(e,t){return Object(I.jsx)(Wt.a,{sx:Object(f.a)({display:"flex",justifyContent:"center",alignItems:"center"},e.sx),ref:t,children:Object(I.jsx)(vl.a,{size:e.size,thickness:e.thickness})})})),gl=ml,yl=function(){var e=Object(I.jsx)(xs,{open:!0});return Object(I.jsx)(Ts,{menuElement:e,children:Object(I.jsx)(Ol.a,{open:!0,children:Object(I.jsx)($t.a,{children:Object(I.jsx)(gl,{size:200,thickness:2,sx:{width:"100vw",height:"100vh"}})})})})},xl=function(e){var t=Object(L.useState)({state:"not-started"}),n=Object(c.a)(t,2),r=n[0],i=n[1],a=function(){var t=Object(Ht.a)(Xt.a.mark((function t(){var n,r;return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dn(e.id);case 2:if(n=t.sent,!Object(gn.isLeft)(n)){t.next=6;break}return i({state:"error",error:n.left}),t.abrupt("return");case 6:if(r=it.fromJSONObject(n.right),!Object(gn.isLeft)(r)){t.next=10;break}return i({state:"error",error:Object(v.left)("Failed to deserialize payload to song")}),t.abrupt("return");case 10:i({state:"loaded",item:r.right});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();switch(r.state){case"not-started":return i({state:"loading"}),a(),Object(I.jsx)(I.Fragment,{});case"error":return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(pl,{}),Object(I.jsx)(xn,{componentDescription:"Chord Paper",error:r.error})]});case"loading":return Object(I.jsx)(yl,{});case"loaded":return e.children(r.item)}},wl=function(e){var t=Object(Tn.i)().id;return Object(I.jsx)(xl,{id:t,children:e.children},t)},kl=Object(ft.a)(vt.a)({color:Jt.a[600]}),Cl=function(e){return Object(I.jsxs)(Wt.a,{className:e.className,children:[Object(I.jsx)(Wt.a,{children:Object(I.jsx)(kl,{variant:"caption",children:"Key of: ".concat(e.currentKey)})}),Object(I.jsx)(Wt.a,{children:Object(I.jsx)(kl,{variant:"caption",children:"Original key: ".concat(e.originalKey)})})]})},Sl=Object(ft.a)(vt.a)({color:Jt.a[600]}),Ll=function(e){var t=Object(L.useState)(new Date),n=Object(c.a)(t,2)[1];return Object(L.useEffect)((function(){var e=setInterval((function(){return n(new Date)}),3e4);return function(){return clearInterval(e)}}),[n]),Object(I.jsx)(Sl,{variant:"caption",className:e.className,children:"Last Saved: ".concat(function(){var t=na.DateTime.fromJSDate(e.lastSaved);if(t.diffNow().as("day")<=-1)return t.toLocaleString(na.DateTime.DATE_MED);if(t.diffNow().as("second")>=-1)return"just now";var n=t.toRelative();return null===n?"WHAT IS HAPPENING? CONTACT YOUR DEV":n}())})},Tl=Object(ft.a)(Ll)((function(e){var t=e.theme;return{position:"absolute",top:t.spacing(2),right:t.spacing(2)}})),Il=Object(ft.a)(Cl)((function(e){var t=e.theme;return{position:"absolute",top:t.spacing(2),left:t.spacing(4)}})),Bl=Object(ft.a)(Wt.a)((function(e){return{paddingBottom:e.theme.spacing(4)}})),El=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{paddingTop:t.spacing(8),paddingLeft:t.spacing(4),paddingRight:t.spacing(4)}})),Dl=function(e){var t=Object(I.jsx)(Bl,{children:Object(I.jsx)(zi,{value:e.song.title,variant:"h4",align:"center","data-testid":"SongTitle",placeholder:"Song Title",onValueChange:function(t){e.songDispatch({type:"set-header",title:t})}})}),n=null===e.song.lastSavedAt?null:Object(I.jsx)(Tl,{lastSaved:e.song.lastSavedAt}),r=null===e.song.originalKey||null===e.song.currentKey?null:Object(I.jsx)(Il,{originalKey:e.song.originalKey,currentKey:e.song.currentKey}),i=Object(I.jsxs)(Ot.a,{container:!0,justifyContent:"center",children:[Object(I.jsx)(Ot.a,{container:!0,item:!0,xs:6,justifyContent:"center",children:Object(I.jsxs)(Ot.a,{item:!0,children:[Object(I.jsxs)(vt.a,{display:"block",variant:"caption",children:["Composed by:"," "]}),Object(I.jsx)(zi,{value:e.song.composedBy,display:"block",variant:"caption",placeholder:"Stock Aitken Waterman",onValueChange:function(t){e.songDispatch({type:"set-header",composedBy:t})},"data-testid":"ComposedBy"})]})}),Object(I.jsx)(Ot.a,{container:!0,item:!0,xs:6,justifyContent:"center",children:Object(I.jsxs)(Ot.a,{item:!0,children:[Object(I.jsxs)(vt.a,{display:"inline",variant:"caption",children:["Performed by:"," "]}),Object(I.jsx)(zi,{value:e.song.performedBy,variant:"caption",placeholder:"Rick Astley",onValueChange:function(t){e.songDispatch({type:"set-header",performedBy:t})},"data-testid":"PerformedBy"})]})})]});return Object(I.jsxs)(El,{"data-testid":"Header",children:[r,n,t,i]})},Rl=T.a.memo(Dl),Al=n(253),Pl=n.n(Al),Fl=n(101),Nl=n.n(Fl),Vl=n(255),Ml=n.n(Vl),_l=n(170),Ul=n.n(_l),zl=n(252),Kl=n.n(zl),Wl=n(254),Gl=n.n(Wl),Jl=n(479),ql=n(506),Hl=function(e,t){return function(){var n=document.createElement("input");n.type="file";var r=function(e,t){return function(){var n=this.files;if(null!==n)if(n.length>1)t("Multiple files selected, only one file expected",{variant:"error"});else{var r=n.item(0);if(null!==r){var i=new FileReader;i.onload=function(n){if(!(null===n.target||null===n.target.result||n.target.result instanceof ArrayBuffer)){var r=it.deserialize(n.target.result);Object(v.isLeft)(r)?t("Can't load file, Song file failed validation",{variant:"error"}):e(r.right)}},i.readAsText(r)}else t("Could not retrieve file from file dialog",{variant:"error"})}}}(e,t);n.addEventListener("change",r),n.click()}},Yl=n(472),Xl=n(503),Ql=n(504),Zl=n(505),$l=n(492),eu=n(460),tu=Object(ft.a)(qi.a)((function(e){return{margin:e.theme.spacing(2),display:"flex"}})),nu=Object(ft.a)(Yl.a)((function(e){return{margin:e.theme.spacing(.5)}})),ru=function(e){var t=Object(L.useContext)(Cn),n=Object(L.useState)({originalKey:"C",transposedKey:"C"}),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Object(L.useState)("in-place"),s=Object(c.a)(o,2),l=s[0],u=s[1],d=function(e){return function(t){var n=t.target.value,r=Object(f.a)({},i);r[e]=n,a(r)}},b=function(e,t){var n=[];for(var r in ve)n.push(Object(I.jsx)(Xl.a,{value:r,children:r}));return Object(I.jsx)(nu,{value:e,onChange:t,children:n})},h=Object(I.jsx)(Ql.a,{checked:"new-song"===l,onChange:function(e,t){u(t?"new-song":"in-place")}}),j=null!==t?Object(I.jsx)(tu,{children:Object(I.jsx)(Zl.a,{control:h,labelPlacement:"end",label:"Copy transposition into a new song"})}):null;return Object(I.jsxs)(Qt.a,{open:e.open,onClose:e.onClose,children:[Object(I.jsx)(Zt.a,{children:"Transpose Key"}),Object(I.jsxs)($t.a,{children:[Object(I.jsx)(eu.a,{children:Object(I.jsx)(vt.a,{children:"Select the keys to transpose from and to. Major and minor do not need to be specified (e.g. choose G for G major or G minor)."})}),Object(I.jsxs)(Ot.a,{container:!0,direction:"row",children:[Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsxs)(tu,{children:[b(i.originalKey,d("originalKey")),Object(I.jsx)($l.a,{children:"Original Key"})]})}),Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsxs)(tu,{children:[b(i.transposedKey,d("transposedKey")),Object(I.jsx)($l.a,{children:"Transposed Key"})]})})]}),j]}),Object(I.jsxs)(Ta.a,{children:[Object(I.jsx)(si.a,{onClick:e.onClose,children:"Cancel"}),Object(I.jsx)(si.a,{onClick:function(){e.songDispatch({type:"transpose",originalKey:i.originalKey,transposeKey:i.transposedKey,modifyMode:l}),e.onClose()},children:"Transpose"})]})]})},iu=n(251),au=n.n(iu),cu=Object(ft.a)(Jl.a)((function(e){var t=e.theme;return{position:"fixed",top:t.spacing(3),right:t.spacing(2)}})),ou=function(e){var t,n=Object(L.useState)(!1),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Object(L.useState)(!1),s=Object(c.a)(o,2),l=s[0],u=s[1],d=Object(L.useState)(!1),b=Object(c.a)(d,2),h=b[0],j=b[1],f=Object(nn.b)().enqueueSnackbar,p=T.a.useContext(Cn),O=Hl((function(t){return e.songDispatch({type:"replace-song",newSong:t})}),f),v=(t=e.song,function(){var e=JSON.stringify(t.fork()),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.download="chord_paper_song.json",""!==t.title&&(i.download=t.title+".json"),i.href=r,i.click(),URL.revokeObjectURL(r)}),m=Ia(),g=function(e,t){var n=Object(nn.b)().enqueueSnackbar,r=on(),i=Object(Tn.h)(),a=Object(L.useState)(!1),o=Object(c.a)(a,2),s=o[0],l=o[1];if(!s)return[function(){return l(!0)},null];if(null===t)return[wn,null];if(null===t)return[wn,null];var u=function(){return l(!1)},d=function(){var a=Object(Ht.a)(Xt.a.mark((function a(){var c;return Xt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.isUnsaved()){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,pn(e,t.authToken);case 4:if(c=a.sent,!Object(gn.isLeft)(c)){a.next=9;break}return a.next=8,r(c.left);case 8:return a.abrupt("return");case 9:n("Song has been successfully deleted",{variant:"success"}),i.push(st.newURL());case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),b=Object(I.jsxs)(Qt.a,{open:!0,onClose:u,children:[Object(I.jsx)(Zt.a,{children:"Delete Song"}),Object(I.jsx)($t.a,{children:Object(I.jsx)(vt.a,{children:"This will delete the song and cannot be undone. Are you sure?"})}),Object(I.jsxs)(Ta.a,{children:[Object(I.jsx)(si.a,{onClick:u,children:"Cancel"}),Object(I.jsx)(si.a,{onClick:d,children:"Delete"})]})]});return[wn,b]}(e.song,p),y=Object(c.a)(g,2),x=y[0],w=y[1];return au()((function(){j(!0),f("Local save and load buttons are enabled!",{variant:"info"})})),l?Object(I.jsx)(ru,{song:e.song,songDispatch:e.songDispatch,open:!0,onClose:function(){u(!1)}}):null!==w?w:Object(I.jsxs)(cu,{icon:Object(I.jsx)(Ul.a,{}),open:i,onOpen:function(){a(!0)},onClose:function(){a(!1)},direction:"down",ariaLabel:"SpeedDial",children:[Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Kl.a,{}),tooltipTitle:"Play Mode",onClick:e.onPlay}),!e.song.isUnsaved()&&null!==p&&Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Pl.a,{}),tooltipTitle:"Fork",onClick:function(){return function(e,t){var n=e.fork();m(n,t)}(e.song,p)}}),e.song.isUnsaved()&&null!==p&&Object(I.jsx)(ql.a,{icon:Object(I.jsx)(oc.a,{}),tooltipTitle:"Save to Cloud",onClick:function(){return m(e.song,p)}}),Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Ec,{}),tooltipTitle:"Transpose",onClick:function(){u(!0)}}),h&&Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Gl.a,{}),tooltipTitle:"Save to computer",onClick:v}),h&&Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Ml.a,{}),tooltipTitle:"Load from computer",onClick:O}),!e.song.isUnsaved()&&e.song.isOwner(p)&&Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Nl.a,{}),tooltipTitle:"Delete Song",onClick:x})]})},su=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(L.useEffect)((function(){if(!r){var e=setTimeout((function(){return i(!0)}));return function(){return clearTimeout(e)}}}),[r,i]),r?e.children:Object(I.jsx)(yl,{})},lu=n(256),uu=n.n(lu),du=n(124),bu=n.n(du),hu=n(273),ju=function(e){return""!==e.trim()},fu=m.k({id:m.i,label:m.i}),pu=m.d([fu,m.k({track_type:m.e("single"),url:m.i})]),Ou=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e,r,i){return Object(p.a)(this,n),t.call(this,{id:e,track_type:"single",label:r,url:i})}return Object(O.a)(n,[{key:"validate",value:function(){return ju(this.label)&&ju(this.url)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.url)}}]),n}(Object(k.b)({id:"",track_type:"single",label:"",url:""})),vu=m.d([fu,m.k({track_type:m.l([m.e("split_2stems"),m.e("split_4stems"),m.e("split_5stems")]),original_url:m.i,job_status:m.l([m.e("requested"),m.e("processing"),m.e("error")]),job_status_message:m.i,job_status_debug_log:m.i,job_progress:m.g})]),mu=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e,r,i,a,c,o,s,l){return Object(p.a)(this,n),t.call(this,{id:e,track_type:i,label:r,original_url:a,job_status:c,job_status_message:o,job_progress:s,job_status_debug_log:l})}return Object(O.a)(n,[{key:"validate",value:function(){return ju(this.label)&&ju(this.original_url)}}],[{key:"defaultLabel",value:function(e){switch(e){case"split_2stems":return"2 stems";case"split_4stems":return"4 stems";case"split_5stems":return"5 stems"}}},{key:"newTrackRequest",value:function(e){return new n("",this.defaultLabel(e),e,"","requested","",0,"")}},{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.track_type,e.original_url,e.job_status,e.job_status_message,e.job_progress,e.job_status_debug_log)}}]),n}(Object(k.b)({id:"",track_type:"split_2stems",label:"",original_url:"",job_status:"requested",job_status_message:"",job_status_debug_log:"",job_progress:0})),gu=function(e,t){var n=he(e,(function(){return m.i}));return m.d([fu,m.k({track_type:m.e(t),stem_urls:m.k(n)})])},yu=function(){function e(t,n,r){Object(p.a)(this,e),this.id=void 0,this.label=void 0,this.stem_urls=void 0,this.id=t,this.label=n,this.stem_urls=r}return Object(O.a)(e,[{key:"validate",value:function(){if(!ju(this.label))return!1;var e;for(e in this.stem_urls)if(!ju(this.stem_urls[e]))return!1;return!0}}]),e}(),xu={accompaniment:void 0,vocals:void 0},wu=gu(xu,"2stems"),ku=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,i)).track_type=void 0,a.track_type="2stems",a}return Object(O.a)(n,[{key:"keyObject",value:function(){return xu}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(yu),Cu={bass:void 0,drums:void 0,other:void 0,vocals:void 0},Su=gu(Cu,"4stems"),Lu=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,i)).track_type=void 0,a.track_type="4stems",a}return Object(O.a)(n,[{key:"keyObject",value:function(){return Cu}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(yu),Tu={bass:void 0,drums:void 0,other:void 0,piano:void 0,vocals:void 0},Iu=gu(Tu,"5stems"),Bu=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,i)).track_type=void 0,a.track_type="5stems",a}return Object(O.a)(n,[{key:"keyObject",value:function(){return Tu}},{key:"setLabel",value:function(e){return new n(this.id,e,this.stem_urls)}}],[{key:"fromValidatedFields",value:function(e){return new n(e.id,e.label,e.stem_urls)}}]),n}(yu),Eu=function(e){var t=function(e){return""!==e.trim()}(e);return{error:!t||void 0,helperText:t?void 0:"Can't be empty"}},Du=function(e){return Object(I.jsx)(Hr.a,Object(f.a)({label:"Track Label",variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value)}},Eu(e.value)))},Ru=new RegExp(".*drive.google.com/.*?.+"),Au=new RegExp(".*drive.google.com/file/d/(.+)/.*"),Pu=function(e,t){return function(e){return null!==e.match(Ru)}(e)?e+"&cacheBuster="+t:e},Fu=function(e){return Object(I.jsx)(Hr.a,Object(f.a)({label:e.labelText,variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value)},onKeyDown:function(t){if((t.metaKey||t.ctrlKey)&&("g"===t.key||"G"===t.key)){var n=function(e){var t=e.match(Au);return null===t||t.length<2?null:"https://drive.google.com/uc?export=download&id="+t[1]}(e.value);null!==n&&(e.onChange(n),t.preventDefault())}},disabled:e.disabled},Eu(e.value)))},Nu=Object(ft.a)(Ot.a)((function(e){return{margin:e.theme.spacing(2)}})),Vu=function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Nu,{container:!0,alignItems:"center",children:[Object(I.jsx)(Ot.a,{xs:5,item:!0,children:Object(I.jsx)(Du,{value:e.track.label,onChange:function(t){var n=e.track.set("label",t);e.onChange(n)}})}),Object(I.jsx)(Ot.a,{xs:5,item:!0,children:Object(I.jsx)(Fu,{labelText:"Track URL",value:e.track.url,onChange:function(t){var n=e.track.set("url",t);e.onChange(n)}})}),Object(I.jsx)(Ot.a,{xs:2,item:!0,children:Object(I.jsx)(si.a,{onClick:e.onRemove,children:Object(I.jsx)(Nl.a,{})})})]}),Object(I.jsx)(Gt.a,{})]})},Mu=Object(ft.a)(Ot.a)((function(e){return{margin:e.theme.spacing(2)}})),_u=function(e){var t=""!==e.track.id,n=function(){if(t)return"Processing track...";switch(e.track.track_type){case"split_2stems":return"Track URL to be split into 2 stems";case"split_4stems":return"Track URL to be split into 4 stems";case"split_5stems":return"Track URL to be split into 5 stems"}}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Mu,{container:!0,alignItems:"center",children:[Object(I.jsx)(Ot.a,{xs:5,item:!0,children:Object(I.jsx)(Du,{value:e.track.label,onChange:function(t){var n=e.track.set("label",t);e.onChange(n)}})}),Object(I.jsx)(Ot.a,{xs:5,item:!0,children:Object(I.jsx)(Fu,{labelText:n,value:e.track.original_url,onChange:function(t){var n=e.track.set("original_url",t);e.onChange(n)},disabled:t})}),Object(I.jsx)(Ot.a,{xs:2,item:!0,children:Object(I.jsx)(si.a,{onClick:e.onRemove,children:Object(I.jsx)(Nl.a,{})})})]}),Object(I.jsx)(Gt.a,{})]})},Uu=Object(ft.a)(Ot.a)((function(e){return{margin:e.theme.spacing(2)}})),zu=function(e){var t=function(t){var n=e.track.setLabel(t);e.onChange(n)},n=he(e.track.stem_urls,(function(t,n){var r=function(){var t=e.urlFieldLabels.find((function(e){return e.key===n}));return void 0===t?"File URL":t.label}();return Object(I.jsx)(Fu,{labelText:r,value:t,onChange:function(t){var r=y.a.clone(e.track);r.stem_urls[n]=t,e.onChange(r)}})})),r=e.urlFieldLabels.map((function(r,i){return 0===i?(a=r.key,Object(I.jsxs)(Uu,{container:!0,alignItems:"center",children:[Object(I.jsx)(Ot.a,{xs:5,item:!0,children:Object(I.jsx)(Du,{value:e.track.label,onChange:t})}),Object(I.jsx)(Ot.a,{xs:5,item:!0,children:n[a]}),Object(I.jsx)(Ot.a,{xs:2,item:!0,children:Object(I.jsx)(si.a,{onClick:e.onRemove,children:Object(I.jsx)(Nl.a,{})})})]},a)):function(e){return Object(I.jsxs)(Uu,{container:!0,alignItems:"center",children:[Object(I.jsx)(Ot.a,{xs:5,item:!0}),Object(I.jsx)(Ot.a,{xs:5,item:!0,children:n[e]}),Object(I.jsx)(Ot.a,{xs:2,item:!0})]},e)}(r.key);var a}));return Object(I.jsxs)(I.Fragment,{children:[r,Object(I.jsx)(Gt.a,{})]})},Ku=Object(ft.a)(Wt.a)((function(e){return{display:"flex",padding:e.theme.spacing(5),alignItems:"center",justifyItems:"center"}})),Wu=Object(ft.a)(Wt.a)({display:"inline-block"}),Gu=Object(ft.a)(Wt.a)((function(e){var t=e.theme;return{cursor:"pointer",display:"flex",alignItems:"center",marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),Ju=Object(ft.a)(vt.a)((function(e){var t=e.theme;return{marginLeft:t.spacing(2),marginBottom:t.spacing(1)}})),qu=function(e){var t=function(){var t=y.a.cloneDeep(e.trackList);return 0===t.tracks.length&&t.tracks.push(new Ou("","","")),t}(),n=Object(L.useState)(t),r=Object(c.a)(n,2),i=r[0],a=r[1],o=Object(L.useState)(0),s=Object(c.a)(o,2),l=s[0],d=s[1],b=Object(L.useState)(null),h=Object(c.a)(b,2),j=h[0],f=h[1],p=function(){return d(l+1)},O=function(){return y.a.cloneDeep(i)},v=function(e){f(e.currentTarget)},m=function(){f(null)},g=function(){S(new Ou("","",""))},x=function(){S(new ku("","",{vocals:"",accompaniment:""}))},w=function(){S(new Lu("","",{vocals:"",other:"",bass:"",drums:""}))},k=function(){S(new Bu("","",{vocals:"",other:"",piano:"",bass:"",drums:""}))},C=function(e){S(mu.newTrackRequest(e))},S=function(e){B(e),m()},B=function(e){var t=O();t.tracks.push(e),p(),a(t)},E=function(e){var t=O();t.tracks.splice(e,1),p(),a(t)},D=function(){var e,t=Object(u.a)(i.tracks);try{for(t.s();!(e=t.n()).done;){if(!e.value.validate())return!0}}catch(n){t.e(n)}finally{t.f()}return!1}(),R=function(e){return function(t){!function(e,t){var n=O();n.tracks.splice(e,1,t),a(n)}(e,t)}},A=function(){var e=i.tracks.map((function(e,t){var n="".concat(l,"-").concat(t);switch(e.track_type){case"single":return Object(I.jsx)(Vu,{track:e,onChange:R(t),onRemove:function(){return E(t)}},n);case"2stems":return Object(I.jsx)(zu,{track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"accompaniment",label:"Accompaniment File URL"}],onChange:R(t),onRemove:function(){return E(t)}},n);case"4stems":return Object(I.jsx)(zu,{track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"other",label:"Other File URL"},{key:"bass",label:"Bass File URL"},{key:"drums",label:"Drums File URL"}],onChange:R(t),onRemove:function(){return E(t)}},n);case"5stems":return Object(I.jsx)(zu,{track:e,urlFieldLabels:[{key:"vocals",label:"Vocals File URL"},{key:"other",label:"Other File URL"},{key:"piano",label:"Piano File URL"},{key:"bass",label:"Bass File URL"},{key:"drums",label:"Drums File URL"}],onChange:R(t),onRemove:function(){return E(t)}},n);case"split_2stems":case"split_4stems":case"split_5stems":return Object(I.jsx)(_u,{track:e,onChange:R(t),onRemove:function(){return E(t)}},n)}})),t=null!==j;return e.push(Object(I.jsxs)(T.a.Fragment,{children:[Object(I.jsx)(Wu,{children:Object(I.jsxs)(Gu,{onClick:v,children:[Object(I.jsx)(uu.a,{}),Object(I.jsx)(Ju,{children:"Add a new track"})]},"append-action")}),Object(I.jsxs)(hu.a,{open:t,anchorEl:j,onClose:m,children:[Object(I.jsx)(Xl.a,{onClick:g,children:"Single Track"}),Object(I.jsx)(Xl.a,{onClick:function(){return C("split_2stems")},children:"Split Track into 2 Stems"}),Object(I.jsx)(Xl.a,{onClick:function(){return C("split_4stems")},children:"Split Track into 4 Stems"}),Object(I.jsx)(Xl.a,{onClick:function(){return C("split_5stems")},children:"Split Track into 5 Stems"}),Object(I.jsx)(Xl.a,{onClick:x,children:"2 Stem Track"}),Object(I.jsx)(Xl.a,{onClick:w,children:"4 Stem Track"}),Object(I.jsx)(Xl.a,{onClick:k,children:"5 Stem Track"})]})]},"append")),e}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)($t.a,{children:[Object(I.jsxs)(Ju,{variant:"body2",variantMapping:{body2:"div"},children:[Object(I.jsx)(Wt.a,{children:"Add URLs for the audio track this song."}),Object(I.jsx)(Wt.a,{children:"This can be your own hosted files, or Youtube, etc."})]}),Object(I.jsxs)(Ju,{variant:"body2",variantMapping:{body2:"div"},children:[Object(I.jsx)(Wt.a,{children:"This player works best if every track is a version of the same song,"}),Object(I.jsx)(Wt.a,{children:"e.g. the original recording, just the accompaniment, only drums + bass."})]}),Object(I.jsx)(Gt.a,{}),A]}),Object(I.jsxs)(Ta.a,{children:[Object(I.jsx)(si.a,{onClick:e.onClose,children:"Cancel"}),Object(I.jsx)(si.a,{disabled:D,onClick:function(){var t;D||null===(t=e.onSubmit)||void 0===t||t.call(e,i)},children:"OK"})]})]})},Hu=function(e){var t="loading"===e.trackListLoad.state?Object(I.jsx)(Ku,{children:Object(I.jsx)(vl.a,{size:"15rem"})}):Object(I.jsx)(qu,{trackList:e.trackListLoad.tracklist,onSubmit:e.onSubmit,onClose:e.onClose});return Object(I.jsxs)(Qt.a,{open:e.open,onClose:e.onClose,maxWidth:!1,children:[Object(I.jsxs)(Zt.a,{children:[Object(I.jsx)(si.a,{onClick:e.onRefresh,children:Object(I.jsx)(bu.a,{})}),"Edit Track List"]}),t]})},Yu={timeA:null,timeB:{type:"custom",time:null},mode:"disabled"},Xu=Object(k.b)(Yu),Qu=function(){function e(t){Object(p.a)(this,e),this.record=void 0,this.record=t}return Object(O.a)(e,[{key:"timeA",get:function(){return this.record.timeA}},{key:"timeB",get:function(){if("custom"===this.record.timeB.type)return this.record.timeB.time;var e=this.timeA;return null===e?null:e+this.record.timeB.loopLength}},{key:"mode",get:function(){return this.record.mode}},{key:"setAWithoutCheck",value:function(t){return new e(this.record.set("timeA",t))}},{key:"setA",value:function(e){var t=this.setAWithoutCheck(e);return t.isInvalid()?Object(v.left)(new Error("Point A must be before Point B")):Object(v.right)(t)}},{key:"clearA",value:function(){return this.setAWithoutCheck(null)}},{key:"setBWithoutCheck",value:function(t){return new e(this.record.set("timeB",{type:"custom",time:t}))}},{key:"setB",value:function(e){var t=this.setBWithoutCheck(e);return t.isInvalid()?Object(v.left)(new Error("Point B must be after Point A")):Object(v.right)(t)}},{key:"clearB",value:function(){return this.setBWithoutCheck(null)}},{key:"setDefaultLoop",value:function(){return new e(this.record.set("timeB",{type:"defaultLength",loopLength:5}))}},{key:"isDefaultLoop",value:function(){return"defaultLength"===this.record.timeB.type}},{key:"setMode",value:function(t){return new e(this.record.set("mode",t))}},{key:"isSet",value:function(){return null!==this.timeA&&null!==this.timeB}},{key:"isInvalid",value:function(){return!!this.isSet()&&this.timeA>=this.timeB}},{key:"isPlayable",value:function(){return this.isSet()&&!this.isInvalid()}},{key:"isOutsideLoop",value:function(e){return!!this.isSet()&&(e<this.timeA||e>=this.timeB)}}],[{key:"empty",value:function(){return new e(Xu(Yu))}}]),e}(),Zu=n(257),$u=n.n(Zu),ed={playerRef:new(function(){function e(){Object(p.a)(this,e),this._current=void 0,this._current=void 0}return Object(O.a)(e,[{key:"current",get:function(){},set:function(e){}}]),e}()),playing:!1,transport:{togglePlay:wn,jumpBack:wn,jumpForward:wn,goToBeginning:wn,skipBack:{action:wn,enabled:!1},skipForward:{action:wn,enabled:!1}},getCurrentTime:function(){return 0},onProgress:wn,onPlay:wn,onPause:wn,tempo:{percentage:100,onChange:wn},abLoop:{abLoop:Qu.empty(),onChange:wn}},td=function(e,t){var n=e.get(t);if(void 0===n)throw new Error("Section index is out of range, unexpected");return n},nd=n(259),rd=n.n(nd),id=n(258),ad=n.n(id),cd=function(e){var t=wa(),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useState)(null),o=Object(c.a)(a,2),s=o[0],l=o[1],u=e.show,d=e.onClick,b=e.togglePlay,h=e.jumpBack,j=e.jumpForward;Object(L.useEffect)((function(){if(u){var e=function(e){if("Slash"===e.code&&(d(),e.preventDefault()),e.ctrlKey||e.metaKey)switch(e.code){case"Enter":case"Space":b(),e.preventDefault();break;case"ArrowLeft":h(),l("back"),e.preventDefault();break;case"ArrowRight":j(),l("forward"),e.preventDefault()}};return r(e),function(){return i(e)}}}),[r,i,u,d,b,h,j,l]),Object(L.useEffect)((function(){null!==s&&setTimeout((function(){return l(null)}),1e3)}),[s,l]);var p=e.playersLoaded?"back"===s?Object(I.jsx)(ad.a,{}):"forward"===s?Object(I.jsx)(rd.a,{}):e.playing?Object(I.jsx)(En.a,{sx:{color:"primary.main"}}):Object(I.jsx)(fc.a,{sx:{color:"secondary.main"}}):Object(I.jsx)(lc.a,{});return Object(I.jsx)(br.a,{in:e.show,direction:"up",children:ea(Object(I.jsx)(di.a,{title:e.tooltipMessage,children:Object(I.jsx)("span",{children:Object(I.jsx)(si.a,{className:e.className,onClick:e.onClick,disabled:e.disabled,sx:function(t){return Object(f.a)(Object(f.a)({},Hi(t)),e.sx)},children:p})})}))})},od=T.a.memo(cd),sd=n(263),ld=n.n(sd),ud=function(e){return{ref:e.playerRef,playing:e.playing,controls:!0,playbackRate:e.tempo.percentage/100,onPlay:e.onPlay,onPause:e.onPause,onProgress:e.onProgress,progressInterval:500,height:"auto",width:"unset",onKeyUp:function(e){return e.preventDefault()}}},dd={width:"100%",height:"revert"},bd=n(260),hd=n.n(bd),jd=function(e){var t=Object(L.useMemo)((function(){return Pu(e.track.url,w.a.generate())}),[e.track.url]),n=function(e){var t=ud(e);return Object(f.a)(Object(f.a)({},t),{},{config:{file:{forceAudio:!0,attributes:{style:dd}}}})}(e.playerControls);return Object(L.useEffect)((function(){!e.isCurrentTrack&&e.playerControls.playing&&e.playerControls.onPause()}),[e.isCurrentTrack,e.playerControls]),Object(I.jsxs)(Wt.a,{children:[Object(I.jsx)(Wt.a,{children:Object(I.jsx)(hd.a,Object(f.a)(Object(f.a)({},n),{},{url:t}))}),Object(I.jsx)(uo,{show:e.focused,playing:e.playerControls.playing,transport:e.playerControls.transport,tempo:e.playerControls.tempo,abLoop:e.playerControls.abLoop})]})},fd=null,pd=function(){return null===fd&&(fd=new window.AudioContext),fd},Od=n(261),vd=n.n(Od),md=n(262),gd=n.n(md),yd=n(92),xd=function(e){var t=new yd.c,n=new yd.a({url:e.audioBuffer,grainSize:.1,overlap:.1});return n.chain(t),{label:e.label,volumeNode:t,playerNode:n,endNode:t}},wd=function(e){var t=Object(nn.b)().enqueueSnackbar,n=Object(L.useMemo)((function(){return e.stems.map(xd)}),[e.stems]),r={masterVolumePercentage:100,masterPitchShift:0,stems:e.stems.map((function(e){return{key:e.label,muted:!1,volumePercentage:100}}))},i=Object(L.useState)(r),a=Object(c.a)(i,2),o=a[0],s=a[1],l=Object(L.useRef)(o);l.current=o;var d=Object(L.useMemo)((function(){return 0===e.stems.length?"":function(e){var t=pd(),n=t.createBuffer(2,t.sampleRate*e,t.sampleRate),r=vd()(n),i=new window.Blob([r]);return URL.createObjectURL(i)}(e.stems[0].audioBuffer.duration)}),[e.stems]),b=function(e,t,n){var r={onVolumeChange:n,style:dd},i=ud(e);return Object(f.a)(Object(f.a)({},i),{},{volume:t/100,config:{forceAudio:!0,attributes:r}})}(e.playerControls,o.masterVolumePercentage,(function(e){var t=y.a.cloneDeep(l.current);t.masterVolumePercentage=100*e.currentTarget.volume,s(t)})),h=e.refreshTrackFn;Object(L.useEffect)((function(){var t,n=null,r=null,i=Object(u.a)(e.stems);try{for(i.s();!(t=i.n()).done;){var a=t.value.audioBuffer;(null===n||a.duration<n)&&(n=a.duration),(null===r||a.duration>r)&&(r=a.duration)}}catch(c){i.e(c)}finally{i.f()}null!==r&&null!==n&&r-n>1&&h()}),[t,e.stems,h]),Object(L.useEffect)((function(){e.playerControls.playing&&"started"!==yd.b.state?yd.b.start():e.playerControls.playing||"paused"===yd.b.state||"stopped"===yd.b.state||yd.b.pause()}),[e.playerControls.playing]);var j=e.playerControls,p=j.tempo,O=j.getCurrentTime;Object(L.useEffect)((function(){var e=setInterval((function(){var e=p.percentage/100,t=yd.b.seconds*e,n=O();Math.abs(n-t)>1&&(yd.b.seconds=n/e)}),250);return function(){return clearInterval(e)}}),[O,p.percentage]),Object(L.useEffect)((function(){o.stems.forEach((function(t,r){var i=n[r],a=t.volumePercentage/100*(o.masterVolumePercentage/100);if(a>0){var c=20*Math.log10(a);i.volumeNode.volume.value=c}i.endNode.mute=t.muted||0===a,i.playerNode.playbackRate=e.playerControls.tempo.percentage/100}))}),[n,o,e.playerControls.tempo.percentage]),Object(L.useEffect)((function(){o.stems.forEach((function(e,t){var r=n[t];"drums"!==r.label&&(r.playerNode.detune=100*o.masterPitchShift)}))}),[n,o]),Object(L.useEffect)((function(){if(e.currentTrack)return n.forEach((function(e){e.playerNode.sync().start(0),e.endNode.toDestination()})),function(){n.forEach((function(e){e.playerNode.unsync(),e.endNode.disconnect()}))}}),[e.currentTrack,n]),Object(L.useEffect)((function(){!e.currentTrack&&e.playerControls.playing&&e.playerControls.onPause()}),[e.currentTrack,e.playerControls]),Object(L.useEffect)((function(){return function(){n.forEach((function(e){e.volumeNode.dispose(),e.playerNode.dispose()}))}}),[n]);var v=Object(L.useCallback)((function(t,n){var r=function(){var n=e.stems.find((function(e){return e.label===t.key}));return void 0===n?"white":n.buttonColour}();return{label:t.key,buttonColour:r,enabled:!t.muted,onEnabledChanged:function(e){var t=y.a.cloneDeep(o);t.stems[n].muted=!e,s(t)},volume:t.volumePercentage,onVolumeChanged:function(e){var t=y.a.cloneDeep(o);t.stems[n].volumePercentage=e,s(t)}}}),[o,e.stems]),m=Object(L.useMemo)((function(){return o.stems.map(v)}),[o.stems,v]),g=Object(I.jsx)(ko,{stemControls:m}),x=Object(L.useCallback)((function(e){s(Object(f.a)(Object(f.a)({},o),{},{masterPitchShift:e}))}),[o,s]),w=Object(L.useMemo)((function(){return{level:o.masterPitchShift,onChange:x}}),[o,x]);return Object(I.jsxs)(Wt.a,{children:[Object(I.jsx)(Wt.a,{children:Object(I.jsx)(gd.a,Object(f.a)(Object(f.a)({},b),{},{url:d}))}),g,Object(I.jsx)(uo,{show:e.focused,playing:e.playerControls.playing,transport:e.playerControls.transport,tempo:e.playerControls.tempo,abLoop:e.playerControls.abLoop,transpose:w})]})},kd=T.a.memo(wd),Cd=n(199),Sd=n.n(Cd),Ld=Object(ft.a)(Wt.a)((function(e){return{padding:e.theme.spacing(2),backgroundColor:Jt.a[100]}})),Td=function(e){var t=Object(L.useState)({state:"not-started"}),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useRef)(r);a.current=r;var o=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn.a.get(t,{timeout:!1,onDownloadProgress:n}).arrayBuffer();case 2:return r=e.sent,e.next=5,pd().decodeAudioData(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();if(Object(L.useEffect)((function(){var t=function(e,t){return o(e,(function(e){var n=a.current;if("loading"===n.state){var r=y.a.clone(n);r.details[t].loadedBytes=e.transferredBytes,r.details[t].totalBytes=0!==e.totalBytes?e.totalBytes:"unknown",i(r)}})).then((function(e){return{audioBuffer:e,stemKey:t}}))},n=function(){var n=Object(Ht.a)(Xt.a.mark((function n(){var r,a,c,o,s,l;return Xt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a in n.prev=0,r=[],e.track.stem_urls)c=t(e.track.stem_urls[a],a),r.push(c);return n.next=5,Promise.all(r);case 5:if(o=n.sent,s=!1,l=e.buttonSpecs.map((function(e){var t,n=o.find((function(t){return t.stemKey===e.label}));return void 0===n?(s=!0,t=new AudioBuffer({length:0,sampleRate:1})):t=n.audioBuffer,{label:e.label,audioBuffer:t,buttonColour:e.buttonColour}})),!s){n.next=11;break}return i({state:"error",error:Object(v.left)("Could not find stem key in audio buffer array to object mapping")}),n.abrupt("return");case 11:i({state:"loaded",item:l}),n.next=23;break;case 14:return n.prev=14,n.t0=n.catch(0),n.t1=i,n.next=19,an(n.t0);case 19:return n.t2=n.sent,n.t3={state:"error",error:n.t2},(0,n.t1)(n.t3),n.abrupt("return");case 23:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}();"not-started"===r.state&&(n(),i({state:"loading",details:he(e.track.keyObject(),(function(){return{loadedBytes:0,totalBytes:"initial"}}))}))}),[r,i,e.track,e.buttonSpecs]),"not-started"===r.state)return Object(I.jsx)(Ld,{children:Object(I.jsx)(vt.a,{variant:"body1",children:"Tracks have not started loading..."})});if("loading"===r.state){var s=function(){var e,t=0;for(e in r.details){var n=r.details[e].totalBytes;switch(n){case"unknown":return"unknown";case"initial":return"initial";default:t+=n}}return t}(),l=function(){var e,t=0;for(e in r.details)t+=r.details[e].loadedBytes;return t}(),u=Sd()(l);"unknown"!==s&&"initial"!==s&&(u+="/"+Sd()(s));var d=function(){if("unknown"===s)return Object(I.jsx)(en.a,{});var e=function(){if("initial"===s){return l/1e8*100}return l/s*100}();return Object(I.jsx)(en.a,{variant:"determinate",value:e})}(),b=l===s?"Processing track...":"Loading track...";return Object(I.jsxs)(Ld,{children:[Object(I.jsxs)(vt.a,{variant:"body1",children:[b,"(",u,")"]}),d]})}if("error"===r.state){console.error(r.error);return Object(I.jsxs)(Ld,{display:"flex",alignItems:"center",children:[Object(I.jsx)(si.a,{onClick:function(){i({state:"not-started"})},children:Object(I.jsx)(bu.a,{})}),Object(I.jsx)(vt.a,{variant:"body1",children:"Failed to load tracks"})]})}return Object(I.jsx)(kd,{focused:e.focused,currentTrack:e.isCurrentTrack,stems:r.item,playerControls:e.playerControls,refreshTrackFn:e.refreshTrackFn})},Id=Object(ft.a)(Wt.a)((function(e){return{padding:e.theme.spacing(2),backgroundColor:Jt.a[100]}})),Bd=function(e){if(Object(L.useEffect)((function(){"error"!==e.track.job_status&&setTimeout(e.refreshTrackFn,1e4)}),[e]),"error"===e.track.job_status){console.error(e.track.job_status_debug_log);var t="An Error Occurred: ".concat(e.track.job_status_message);return Object(I.jsxs)(Id,{children:[Object(I.jsx)(vt.a,{variant:"body1",children:t}),Object(I.jsx)(en.a,{variant:"determinate",value:e.track.job_progress,color:"secondary"})]})}return Object(I.jsxs)(Id,{children:[Object(I.jsx)(vt.a,{variant:"body1",children:e.track.job_status_message}),Object(I.jsx)(en.a,{variant:"determinate",value:e.track.job_progress})]})},Ed=m.l([pu,wu,Su,Iu,vu]),Dd=m.k({song_id:m.i,tracks:m.b(Ed)}),Rd=function(){function e(t,n){Object(p.a)(this,e),this.song_id=void 0,this.tracks=void 0,this.song_id=t,this.tracks=n}return Object(O.a)(e,null,[{key:"fromValidatedFields",value:function(t){var n=t.tracks.map((function(e){switch(e.track_type){case"single":return Ou.fromValidatedFields(e);case"2stems":return ku.fromValidatedFields(e);case"4stems":return Lu.fromValidatedFields(e);case"5stems":return Bu.fromValidatedFields(e);case"split_2stems":case"split_4stems":case"split_5stems":return mu.fromValidatedFields(e)}}));return new e(t.song_id,n)}},{key:"fromJSONObject",value:function(e){var t=Dd.decode(e);return Object(v.isLeft)(t)?Object(v.left)(new Error("Invalid Chord Song object")):Object(v.right)(this.fromValidatedFields(t.right))}}]),e}(),Ad=n(461),Pd=function(e){var t=Object(L.useState)({state:"not-started"}),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(Ad.a)((function(){return i({state:"not-started"})}),500),o=function(e){if(Object(v.isLeft)(e))i({state:"error",error:e.left});else{var t=Rd.fromJSONObject(e.right);Object(v.isLeft)(t)?i({state:"error",error:Object(v.left)("Failed to deserialize payload to tracklist")}):i({state:"loaded",item:t.right})}},s=function(){var t=Object(Ht.a)(Xt.a.mark((function t(){var n;return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bn(e);case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t,n){var r;return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=3;break}return i({state:"loaded",item:t}),e.abrupt("return");case 3:return e.next=5,On(t,n);case 5:r=e.sent,o(r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();switch(r.state){case"not-started":return i({state:"loading"}),s(),[{state:"loading"},a,l];case"error":return[{state:"error",error:r.error},a,l];case"loading":return[{state:"loading"},a,l];case"loaded":return[{state:"loaded",tracklist:r.item},a,l]}},Fd=function(e){var t=function(e,t){var n=Pd(e),r=Object(c.a)(n,2),i=r[0],a=r[1];switch(i.state){case"error":return[{state:"error",error:i.error},a];case"loading":return[{state:"loading"},a];case"loaded":var o=i.tracklist.tracks.find((function(e){return e.id===t}));return void 0===o?[{state:"error",error:Object(v.left)("Track is not found")},a]:[{state:"loaded",track:o},a]}}(e.tracklistID,e.trackID),n=Object(c.a)(t,2),r=n[0],i=n[1];switch(r.state){case"loading":return Object(I.jsx)(gl,{});case"error":return Object(I.jsx)(xn,{componentDescription:"Track Player",error:r.error});case"loaded":return Object(I.jsx)(Nd,{track:r.track,focused:e.focused,isCurrentTrack:e.isCurrentTrack,playerControls:e.playerControls,refreshTrackFn:i})}},Nd=function(e){var t=function(){switch(e.track.track_type){case"single":return Object(I.jsx)(jd,{focused:e.focused,isCurrentTrack:e.isCurrentTrack,track:e.track,playerControls:e.playerControls});case"2stems":return Object(I.jsx)(Td,{focused:e.focused,isCurrentTrack:e.isCurrentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"accompaniment",buttonColour:"purple"}],playerControls:e.playerControls,refreshTrackFn:e.refreshTrackFn});case"4stems":return Object(I.jsx)(Td,{focused:e.focused,isCurrentTrack:e.isCurrentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"other",buttonColour:"purple"},{label:"bass",buttonColour:"pink"},{label:"drums",buttonColour:"yellow"}],playerControls:e.playerControls,refreshTrackFn:e.refreshTrackFn});case"5stems":return Object(I.jsx)(Td,{focused:e.focused,isCurrentTrack:e.isCurrentTrack,track:e.track,buttonSpecs:[{label:"vocals",buttonColour:"lightBlue"},{label:"other",buttonColour:"purple"},{label:"piano",buttonColour:"lightGreen"},{label:"bass",buttonColour:"pink"},{label:"drums",buttonColour:"yellow"}],playerControls:e.playerControls,refreshTrackFn:e.refreshTrackFn});case"split_2stems":case"split_4stems":case"split_5stems":return Object(I.jsx)(Bd,{track:e.track,refreshTrackFn:e.refreshTrackFn})}}();return Object(I.jsx)(zt.a,{in:e.focused,children:t})},Vd=T.a.memo(Fd),Md=Object(ft.a)(Wt.a)((function(e){return{display:"flex",alignItems:"center",margin:e.theme.spacing(.5)}})),_d=Object(ft.a)(si.a)((function(e){var t=e.theme;return Object(f.a)({minWidth:0},Yi(t))})),Ud=Object(C.a)({},"& .{selectClasses.select}",{paddingLeft:2}),zd=Object(ft.a)(Yl.a)((function(e){return{minWidth:e.theme.spacing(30)}})),Kd=Object(ft.a)(Wt.a)((function(e){var t=e.theme,n=t.spacing(36);return Object(f.a)({backgroundColor:"white",minWidth:"50vw",maxWidth:n},Hi(t))})),Wd=function(e){var t=wa(),n=Object(c.a)(t,2),r=n[0],i=n[1],a=e.show,o=e.onMinimize;Object(L.useEffect)((function(){if(a){var e=function(e){"Slash"===e.code&&(o(),e.preventDefault())};return r(e),function(){return i(e)}}}),[r,i,o,a]);var s=void 0!==e.onOpenTrackEditDialog&&Object(I.jsx)(_d,{onClick:e.onOpenTrackEditDialog,children:Object(I.jsx)(ld.a,{})}),l=Object(I.jsx)(_d,{onClick:e.onRefresh,children:Object(I.jsx)(bu.a,{})}),u=function(t){var n=t.target.value;"number"===typeof n?e.onSelectCurrentTrack(n):console.error("Unexpected! Selected value in full size player selector is not a number type")},d=function(){var t=function(){if("loaded"===e.tracklistLoad.state)return e.tracklistLoad.tracklist.tracks.map((function(e,t){return Object(I.jsx)(Xl.a,{value:t,children:e.label},"".concat(t,"-").concat(e.label))}))}();return Object(I.jsx)(qi.a,{size:"small",children:Object(I.jsx)(zd,{sx:Ud,value:e.currentTrackIndex,onChange:u,MenuProps:{disableScrollLock:!0},children:t})})}(),b=Object(I.jsxs)(ta,{children:[Object(I.jsx)(Wt.a,{}),Object(I.jsxs)(Md,{children:[l,s,d]}),Object(I.jsx)(Wt.a,{children:Object(I.jsx)(_d,{onClick:e.onMinimize,children:Object(I.jsx)(Ct.a,{})})})]}),h=function(){if("loading"===e.tracklistLoad.state)return Object(I.jsx)(gl,{});var t=e.tracklistLoad.tracklist.song_id;return e.tracklistLoad.tracklist.tracks.map((function(n,r){var i=r===e.currentTrackIndex,a=i&&e.show,c=i?e.playerControls:ed;return Object(I.jsx)(Vd,{focused:a,isCurrentTrack:i,tracklistID:t,trackID:n.id,playerControls:c},"".concat(r,"-").concat(n.id))}))}();return Object(I.jsx)(br.a,{in:e.show,direction:"up",children:ea(Object(I.jsxs)(Kd,{children:[b,Object(I.jsx)(Gt.a,{}),h]}))})},Gd=T.a.memo(Wd),Jd=function(e){var t=Object(L.useState)("minimized"),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useState)({open:!1,randomID:""}),o=Object(c.a)(a,2),s=o[0],l=o[1],u=Object(L.useState)(!1),d=Object(c.a)(u,2),b=d[0],h=d[1],j=Object(L.useState)(0),f=Object(c.a)(j,2),p=f[0],O=f[1],v=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Object(L.useRef)(0),o=Object(L.useState)(Qu.empty()),s=Object(c.a)(o,2),l=s[0],u=s[1],d=Object(L.useRef)(),b=Object(L.useState)(100),h=Object(c.a)(b,2),j=h[0],f=h[1],p=Object(L.useContext)(Gn),O=Object(L.useCallback)((function(){return a.current}),[]),v=Object(L.useContext)(Kn);Object(L.useEffect)((function(){v.current=O}),[v,O]);var m=Object(L.useCallback)((function(e){var t;e<0&&(e=0),null===(t=d.current)||void 0===t||t.seekTo(e,"seconds")}),[]),g=Object(L.useCallback)((function(){i(!0)}),[i]),y=Object(L.useCallback)((function(){i(!1)}),[i]),x=Object(L.useCallback)((function(e){var t,n=null===(t=d.current)||void 0===t?void 0:t.props.url;"string"===typeof n&&$u.a.canPlay(n)&&setTimeout((function(){var t=null!==e&&void 0!==e?e:a.current;m(t)}),200)}),[m]),w=Object(L.useCallback)((function(e){i(!1),x(e)}),[i,x]),k=Object(L.useCallback)((function(){i(!0)}),[i]),C=Object(L.useCallback)((function(){r?w():k()}),[k,w,r]),S=Object(L.useCallback)((function(){var e=a.current-5;e<0&&(e=0),m(e)}),[m]),T=Object(L.useCallback)((function(){var e=a.current+5;m(e)}),[m]),I=Object(L.useCallback)((function(){m(0)}),[m]),B=Object(L.useCallback)((function(){if(null!==p){var t=null===p||0===p.index?null:td(e,p.index-1);null!==t&&a.current<=p.timestampedSection.time+2?m(t.time-1):m(p.timestampedSection.time-1)}}),[p,m,e]),E=Object(L.useMemo)((function(){return{action:B,enabled:null!==p}}),[B,p]),D=Object(L.useMemo)((function(){var t=function(t){return 0===e.size?null:null===t?0:t===e.size-1?null:t+1},n=null!==p?p.index:null,r=t(n),i=function(){if(null===r)return null;var n=td(e,r);if(a.current<n.time-2)return n;var i=t(r);return null===i?null:td(e,i)}();return{action:function(){null!==i&&m(i.time-1)},enabled:null!==i}}),[p,m,e]),R=Object(L.useCallback)((function(e){if("disabled"!==l.mode&&l.isSet()&&l.isPlayable()&&l.isOutsideLoop(e))switch(l.mode){case"loop":return void m(l.timeA);case"rewind":return m(l.timeA),void w(l.timeA)}}),[l,w,m]),A=Object(L.useMemo)((function(){return{percentage:j,onChange:f}}),[j,f]),P=Object(L.useMemo)((function(){return{abLoop:l,onChange:u}}),[l,u]),F=Object(L.useCallback)((function(e){a.current=e.playedSeconds,R(e.playedSeconds)}),[R]),N=Object(L.useMemo)((function(){return{togglePlay:C,skipBack:E,skipForward:D,jumpBack:S,jumpForward:T,goToBeginning:I}}),[C,E,D,S,T,I]);return Object(L.useMemo)((function(){return{playerRef:d,playing:r,getCurrentTime:O,onProgress:F,onPlay:g,onPause:y,transport:N,tempo:A,abLoop:P}}),[r,O,F,g,y,N,A,P])}(e.timestampedSections),m="loaded"===e.tracklistLoad.state&&0===e.tracklistLoad.tracklist.tracks.length,g=function(t,n,i){return Object(I.jsx)(od,{sx:e.collapsedButtonSx,show:"minimized"===r,playersLoaded:b,playing:v.playing,togglePlay:v.transport.togglePlay,jumpBack:v.transport.jumpBack,jumpForward:v.transport.jumpForward,tooltipMessage:i,disabled:t,onClick:n})},y=Object(L.useCallback)((function(){l({open:!0,randomID:w.a.generate()})}),[l]),x=function(){l({open:!1,randomID:""})},k=s.open&&Object(I.jsx)(Hu,{open:s.open,trackListLoad:e.tracklistLoad,onSubmit:function(t){var n;x(),null===(n=e.onTrackListChanged)||void 0===n||n.call(e,t)},onClose:x,onRefresh:e.onRefresh},s.randomID),C=Object(L.useCallback)((function(){b||h(!0),i("full")}),[b,h,i]),S=Object(L.useCallback)((function(){i("minimized")}),[i]);if(m)return Object(I.jsxs)(I.Fragment,{children:[g(!1,y,"Show Player"),k]});if(!b)return g(!1,C,"Show Player");var T=b&&Object(I.jsx)(Gd,{show:"full"===r,tracklistLoad:e.tracklistLoad,playerControls:v,currentTrackIndex:p,onSelectCurrentTrack:O,onMinimize:S,onRefresh:e.onRefresh,onOpenTrackEditDialog:y});return Object(I.jsxs)(I.Fragment,{children:[g(!1,C,"Show Player"),T,k]})},qd=function(e){var t=Pd(e.song.id),n=Object(c.a)(t,3),r=n[0],i=n[1],a=n[2],o=T.a.useContext(Cn),s=function(){var t=Object(Ht.a)(Xt.a.mark((function t(n){return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==o&&e.song.isOwner(o)){t.next=4;break}return t.next=3,a(n,null);case 3:return t.abrupt("return");case 4:return t.next=6,a(n,o.authToken);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();switch(r.state){case"error":return Object(I.jsx)(xn,{componentDescription:"Track List",error:r.error});case"loading":return e.children({state:"loading"},i,s);case"loaded":return e.children({state:"loaded",tracklist:r.tracklist},i,s)}},Hd=n(111),Yd=Object(ft.a)(pt.a)((function(e){var t=e.theme;return{position:"relative",margin:t.spacing(5),minHeight:t.spacing(92),minWidth:t.spacing(92)}})),Xd=function(e){var t=e.song.isUnsaved()?null:Object(I.jsx)(qd,{song:e.song,children:function(t,n,r){return Object(I.jsx)(Jd,{collapsedButtonSx:{backgroundColor:"white"},timestampedSections:e.song.timestampedSections,tracklistLoad:t,onTrackListChanged:r,onRefresh:n})}});return Object(I.jsx)(Wn,{children:Object(I.jsxs)(Jn,{song:e.song,children:[Object(I.jsx)(Hd.a,{children:Object(I.jsx)("title",{children:""!==e.song.metadata.title?e.song.metadata.title:"New Song"})}),Object(I.jsxs)(Yd,{elevation:3,"data-testid":"ChordPaper",children:[Object(I.jsx)(Rl,{"data-testid":"Header",song:e.song,songDispatch:e.songDispatch}),Object(I.jsx)(La,{song:e.song,songDispatch:e.songDispatch}),Object(I.jsx)(ou,{song:e.song,songDispatch:e.songDispatch,onPlay:e.onPlay}),t]})]})})},Qd=function(e){return Object(I.jsx)(su,{children:Object(I.jsx)(Ts,{children:Object(I.jsx)(Xd,Object(f.a)({},e))})})},Zd=function(e){return Object(I.jsx)(Ot.a,{container:!0,children:Object(I.jsx)(Ot.a,{item:!0,container:!0,justifyContent:"center",children:e.children})})},$d=n(274),eb=function(e){return Object(I.jsx)(Wt.a,{display:"inline-block",children:Object(I.jsxs)(Ot.a,{container:!0,direction:"column",component:"span",children:[Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)(Vr,{children:e.block.chord})}),Object(I.jsx)(Ot.a,{item:!0,children:Object(I.jsx)(Pr,{"data-testid":"lyric",children:e.block.lyric})})]})})},tb=Object(ft.a)(vt.a)(Object(f.a)({},Vi)),nb=Object(ft.a)(Wt.a)((function(e){return{marginTop:e.theme.spacing(1)}})),rb=function(e){var t,n=Object(I.jsx)(Wt.a,{children:e.chordLine.chordBlocks.list.map((function(e){return Object(I.jsx)(eb,{block:e},e.id)}))}),r=null===(t=e.chordLine.section)||void 0===t?void 0:t.name;if(void 0!==r&&""!==r){var i=Object(I.jsx)(nb,{children:Object(I.jsx)(tb,{variant:Mi,children:r})});n=Object(I.jsxs)(Wt.a,{children:[i,n]})}return n},ib=T.a.memo(rb),ab=function(e){return e.ctrlKey||e.metaKey},cb=["ArrowUp","ArrowLeft","Backspace","ShiftLeft","PageUp"],ob=["KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Space","Enter","ArrowDown","ArrowRight","PageDown","Comma","Period","Slash","Backslash","Semicolon","Quote","Backquote","Tab","ShiftRight","Equal","BracketLeft","BracketRight"],sb=n(125),lb=function(e){return Object(sb.useThrottledCallback)(e,400,{leading:!0,trailing:!1})},ub=function(e,t){var n=xa(),r=Object(c.a)(n,2),i=r[0],a=r[1],o=lb(t),s=lb(e);Object(L.useEffect)((function(){var e=function(e){(function(e){if(ab(e))return!1;var t,n=Object(u.a)(cb);try{for(n.s();!(t=n.n()).done;)if(t.value===e.code)return!0}catch(r){n.e(r)}finally{n.f()}return!1})(e)?o()&&e.preventDefault():function(e){if(ab(e))return!1;var t,n=Object(u.a)(ob);try{for(n.s();!(t=n.n()).done;)if(t.value===e.code)return!0}catch(r){n.e(r)}finally{n.f()}return!1}(e)&&s()&&e.preventDefault()};return i(e),function(){return a(e)}}),[o,s,i,a])},db=n(265),bb=n.n(db),hb=function(e){var t=Object(L.useState)(0),n=Object(c.a)(t,2),r=n[0],i=n[1],a=e.displaySettings.numberOfColumnsPerPage>=1?e.displaySettings.numberOfColumnsPerPage:1,o=e.displaySettings.columnMargin>=0?e.displaySettings.columnMargin:0,s=Object($d.a)(),l=s/a,u=l/2,d=bb()().height,b=function(t){var n=window.scrollX+function(){var n="column"===e.displaySettings.flipType?l:s;return"backward"===t?-n:n}(),r=n%l;r<u?n-=r:n+=l-r;return window.scrollTo({left:n,top:0,behavior:"smooth"}),!0};ub((function(){return b("forward")}),(function(){return b("backward")}));var h="calc(100vh - ".concat(d,"px)"),j=Object(ft.a)(pt.a)({columnGap:"0px",columnRuleWidth:"2px",columnRuleStyle:"solid",columnRuleColor:Jt.a[300],columns:a,height:h,width:"100%"}),f=Object(ft.a)(Wt.a)({marginLeft:"".concat(o,"px"),marginRight:"".concat(o,"px")}),p=function(e){return Object(I.jsx)(ib,{chordLine:e},e.id)},O=e.song.timeSectionedChordLines.flatMap((function(e){return Xn(e,p)})),v=Object(ft.a)(Wt.a)({height:h,pageBreakInside:"avoid"}),m=function(){if(null===r)return[];for(var e=[],t=0;t<r;t++)e.push(Object(I.jsx)(v,{children:Object(I.jsx)("div",{})},"empty-column-".concat(t)));return e}();return Object(L.useEffect)((function(){var e=Math.round(document.body.scrollWidth/l)%a;if(0!==e){var t=a-e+r;i(t%=a)}}),[a,l,r,i,e]),Object(I.jsxs)(j,{children:[Object(I.jsx)(f,{children:O}),m]})},jb=n(267),fb=n.n(jb),pb=n(268),Ob=n.n(pb),vb=n(266),mb=n.n(vb),gb=Object(ft.a)(Ul.a)({backgroundColor:"transparent"}),yb=Object(ft.a)(Jl.a)((function(e){var t=e.theme;return{position:"fixed",top:t.spacing(3),right:t.spacing(2),"& .MuiSpeedDial-fab":{backgroundColor:"transparent",color:Jt.a[500]}}})),xb=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(I.jsxs)(yb,{icon:Object(I.jsx)(gb,{}),direction:"down",open:r,onOpen:function(){i(!0)},onClose:function(){i(!1)},ariaLabel:"SpeedDial",FabProps:{color:"inherit"},children:[e.children,Object(I.jsx)(ql.a,{icon:Object(I.jsx)(mb.a,{}),tooltipTitle:"Exit Play Mode",onMouseDownCapture:function(t){var n;null===(n=e.onExit)||void 0===n||n.call(e),t.stopPropagation()}})]})},wb=n(447),kb=n(480),Cb=n(469),Sb=Object(ft.a)(Wt.a)((function(e){return{margin:e.theme.spacing(1)}})),Lb=Object(ft.a)(wb.a)((function(e){e.theme;return{fontSize:"0.75rem"}})),Tb=Object(ft.a)(vt.a)((function(e){e.theme;return{fontSize:"0.75rem"}})),Ib=function(e){var t=Object(L.useState)({numberOfColumns:e.defaultSettings.numberOfColumnsPerPage.toString(),fontSize:e.defaultSettings.fontSize.toString(),columnMargin:e.defaultSettings.columnMargin.toString(),flipType:e.defaultSettings.flipType}),n=Object(c.a)(t,2),r=n[0],i=n[1],a=function(e){if(""===e||_(e))return Object(v.left)(new Error("A value is required"));var t=Number(e);return isNaN(t)?Object(v.left)(new Error("Only numbers are allowed")):t<=0?Object(v.left)(new Error("Only positive numbers are allowed")):Object(v.right)(t)},o=function(e){var t=a(e);if(Object(v.isLeft)(t))return t;var n=t.right,r=Math.floor(n);return n!==r?Object(v.left)(new Error("Only integers are allowed")):Object(v.right)(r)},s=function(){var e=o(r.numberOfColumns),t=a(r.fontSize),n=a(r.columnMargin);if(Object(v.isLeft)(e))return e;if(Object(v.isLeft)(t))return t;if(Object(v.isLeft)(n))return n;var i={numberOfColumnsPerPage:e.right,fontSize:t.right,columnMargin:n.right,flipType:r.flipType};return Object(v.right)(i)},l=[{label:"number of columns",field:"numberOfColumns",adornment:null,validationErrorPropsFn:function(e){return o(e)}},{label:"font size",field:"fontSize",adornment:"px",validationErrorPropsFn:function(e){return a(e)}},{label:"column margin",field:"columnMargin",adornment:"px",validationErrorPropsFn:function(e){return a(e)}}],u=function(e){var t,n,a=Object(f.a)({label:e.label,defaultValue:r[e.field],onChange:(n=e.field,function(e){var t=e.target.value,a=Object(f.a)({},r);a[n]=t,i(a)})},(t=e.validationErrorPropsFn(r[e.field]),{error:!!Object(v.isLeft)(t)||void 0,helperText:Object(v.isLeft)(t)?t.left.message:void 0}));return null!==e.adornment&&(a.InputProps={endAdornment:Object(I.jsx)(Gi.a,{position:"end",children:e.adornment})}),Object(I.jsx)(Sb,{children:Object(I.jsx)(Hr.a,Object(f.a)({},a))})},d=Object(I.jsx)(Sb,{children:Object(I.jsxs)(qi.a,{component:"fieldset",children:[Object(I.jsx)(Lb,{children:"flip type"}),Object(I.jsxs)(kb.a,{value:r.flipType,onChange:function(e,t){"page"===t||"column"===t?i(Object(f.a)(Object(f.a)({},r),{},{flipType:t})):console.error("Display dialog - flip type: Received an invalid radio value")},children:[Object(I.jsx)(Zl.a,{value:"column",control:Object(I.jsx)(Cb.a,{size:"small"}),label:Object(I.jsx)(Tb,{children:"flip column"})}),Object(I.jsx)(Zl.a,{value:"page",control:Object(I.jsx)(Cb.a,{size:"small"}),label:Object(I.jsx)(Tb,{children:"flip page"})})]})]})});return Object(I.jsxs)(Qt.a,{open:e.open,onClose:e.onClose,children:[Object(I.jsx)(Zt.a,{children:"Display Settings"}),Object(I.jsxs)($t.a,{children:[d,l.map((function(e){return u(e)}))]}),Object(I.jsxs)(Ta.a,{children:[Object(I.jsx)(si.a,{onClick:e.onClose,children:"Cancel"}),Object(I.jsx)(si.a,{disabled:Object(v.isLeft)(s()),onClick:function(){var t,n=s();Object(v.isLeft)(n)||null===(t=e.onSubmit)||void 0===t||t.call(e,{numberOfColumnsPerPage:n.right.numberOfColumnsPerPage,fontSize:n.right.fontSize,columnMargin:n.right.columnMargin,flipType:n.right.flipType})},children:"OK"})]})]})},Bb=function(e){var t=Object(L.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];if(r){return Object(I.jsx)(Ib,{open:!0,onClose:function(){return i(!1)},defaultSettings:e.displaySettings,onSubmit:function(t){var n;null===(n=e.onDisplaySettingsChange)||void 0===n||n.call(e,t),i(!1)}})}return Object(I.jsxs)(xb,{onExit:e.onExit,children:[Object(I.jsx)(ql.a,{icon:Object(I.jsx)(fb.a,{}),tooltipTitle:"Scroll View",onMouseDownCapture:e.onScrollView}),Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Ob.a,{}),tooltipTitle:"Display Settings",onMouseDownCapture:function(){return i(!0)}})]})},Eb=function(e){var t=Object(L.useState)({numberOfColumnsPerPage:2,fontSize:14,columnMargin:20,flipType:"column"}),n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Bb,{displaySettings:r,onDisplaySettingsChange:i,onScrollView:e.onScrollView,onExit:e.onEditMode}),Object(I.jsx)(l.a,{theme:function(e){return Object(s.a)(Object(f.a)(Object(f.a)({},e),{},{typography:{fontFamily:e.typography.fontFamily,fontWeightRegular:e.typography.fontWeightRegular,fontSize:r.fontSize}}))},children:Object(I.jsx)(hb,{song:e.song,displaySettings:r})})]})},Db=T.a.createContext({getBorderColour:function(){return"red"},rotateBorderColour:wn}),Rb={blue:function(e){return{borderColor:e.palette.primary.main}},purple:function(e){return{borderColor:e.palette.secondary.main}},red:function(e){return{borderColor:"#ff9679"}}},Ab=function(e){var t=Object(L.useRef)("red"),n=Object(sb.useDebouncedCallback)((function(){switch(t.current){case"blue":t.current="purple";break;case"purple":t.current="red";break;case"red":t.current="blue"}}),300,{leading:!1,trailing:!0}),r=Object(L.useCallback)((function(){return t.current}),[]),i=Object(L.useMemo)((function(){return{getBorderColour:r,rotateBorderColour:n}}),[r,n]);return Object(I.jsx)(Db.Provider,{value:i,children:e.children})},Pb=T.a.forwardRef((function(e,t){var n=function(){var e=(0,T.a.useContext(Db).getBorderColour)();return Rb[e]}(),r=!0===e.highlight?n:function(e){};return Object(I.jsx)(Wt.a,{ref:t,sx:function(e){return Object(f.a)({borderColor:"transparent",borderStyle:"dashed",borderRadius:e.spacing(1.5),borderWidth:e.spacing(.3),transition:"border-color ".concat("cubic-bezier(.19,1,.22,1)"," 2s")},r(e))},children:e.children})})),Fb=n(269),Nb=function(e){var t=Object(Fb.a)({threshold:.9,rootMargin:"".concat(e.topMarginPercentage,"% 0px ").concat(e.bottomMarginPercentage,"% 0px")}),n=t.ref,r=t.inView,i=Object(L.useRef)(!1),a=e.inViewChanged;return e.isInViewFnCallback((function(){return i.current})),Object(L.useEffect)((function(){i.current!==r&&(i.current=r,null===a||void 0===a||a())}),[r,a]),n},Vb=0,Mb=-70,_b=-70,Ub=0,zb=0,Kb=0,Wb=100,Gb=-100,Jb=T.a.memo((function(e){var t=Nb({topMarginPercentage:zb,bottomMarginPercentage:Kb,isInViewFnCallback:e.inViewCallbacks.currentView,inViewChanged:e.inViewChanged}),n=Nb({topMarginPercentage:Wb,bottomMarginPercentage:Gb,isInViewFnCallback:e.inViewCallbacks.previousView}),r=Nb({topMarginPercentage:Vb,bottomMarginPercentage:Mb,isInViewFnCallback:e.inViewCallbacks.topPortion}),i=Nb({topMarginPercentage:_b,bottomMarginPercentage:Ub,isInViewFnCallback:e.inViewCallbacks.bottomPortion}),a=function(e){var t=Object(L.useRef)();return e(Object(L.useCallback)((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})}),[])),t}(e.scrollFnCallback),c=Object(L.useCallback)((function(e){null!==e?(a.current=e,t(e),n(e),r(e),i(e)):(a.current=void 0,t(null),n(null),r(null),i(null))}),[t,n,r,i,a]);return Object(I.jsx)(Pb,{ref:c,highlight:e.colourBorder,children:Object(I.jsx)(ib,{chordLine:e.chordLine})})})),qb=Object(ft.a)(Wt.a)({height:"100vh"}),Hb=function(e){var t=e.song.chordLines,n=function(e){return function(){return console.error("".concat(e," method not initialized")),!1}},r=function(e){var t={id:e.id,type:"ViewportLine",chordLine:e,currentView:{setIsInView:wn,isInView:n("currentView")},previousView:{setIsInView:wn,isInView:n("previousView")},topPortion:{setIsInView:wn,isInView:n("topView")},bottomPortion:{setIsInView:wn,isInView:n("bottomView")},scrollInView:function(){return console.error("scrollInView method not initialized",e.id)},setScrollInView:wn};return t.currentView.setIsInView=function(e){t.currentView.isInView=e},t.previousView.setIsInView=function(e){t.previousView.isInView=e},t.topPortion.setIsInView=function(e){t.topPortion.isInView=e},t.bottomPortion.setIsInView=function(e){t.bottomPortion.isInView=e},t.setScrollInView=function(e){t.scrollInView=e},t},i=Object(L.useRef)(function(e){var t=e.map(r);return new Q(t)}(t.list)),a=Object(L.useContext)(Gn),o=T.a.useContext(Db).rotateBorderColour,s=Object(L.useState)(null),l=Object(c.a)(s,2),u=l[0],d=l[1],b=Object(L.useState)(null),h=Object(c.a)(b,2),j=h[0],f=h[1];Object(L.useEffect)((function(){if(null!==a){var e=function(e){for(var t=0;t<i.current.length;t++){var n=i.current.getAtIndex(t);if(e.lineID===n.id)return n}return null}(a.timestampedSection);null!==e?e.scrollInView():console.error("Could not find matching section in any line")}}),[a]);var p=Object(L.useCallback)((function(){for(var e=null,t=0;t<i.current.length;t++){var n=i.current.getAtIndex(t);if(n.currentView.isInView()){var r=n;if(!r.topPortion.isInView()&&!r.bottomPortion.isInView()){var a=r;if(a.chordLine.isSectionHead())return a;e=a}}}return e}),[]),O=Object(L.useCallback)((function(){for(var e=null,t=i.current.length-1;t>=0;t--){var n=i.current.getAtIndex(t);if(n.previousView.isInView()){var r=n;if(r.chordLine.isSectionHead())return r;e=r}}return e}),[]),v=Object(L.useCallback)((function(){var e=p();e!==u&&d(e);var t=O();t!==j&&f(t)}),[p,O,u,d,j,f]),m=Object(sb.useDebouncedCallback)(v,300,{leading:!1,trailing:!0,maxWait:300}),g=Object(L.useCallback)((function(e){var t=i.current.get({id:e.id,type:"ViewportLine"}),n=e.id===(null===u||void 0===u?void 0:u.id)||e.id===(null===j||void 0===j?void 0:j.id);return Object(I.jsx)(Jb,{chordLine:e,colourBorder:n,inViewCallbacks:{currentView:t.currentView.setIsInView,previousView:t.previousView.setIsInView,topPortion:t.topPortion.setIsInView,bottomPortion:t.bottomPortion.setIsInView},scrollFnCallback:t.setScrollInView,inViewChanged:m},e.id)}),[m,u,j]),y=Object(L.useMemo)((function(){return e.song.timeSectionedChordLines}),[e.song]),x=Object(L.useMemo)((function(){return y.map((function(e){var t;return Object(I.jsx)(Qn,{sectionLines:e,lineElementFn:g},null===(t=e.get(0))||void 0===t?void 0:t.id)}))}),[y,g]);return ub((function(){return null!==u&&(o(),u.scrollInView(),!0)}),(function(){return null!==j&&(o(),j.scrollInView(),!0)})),Object(I.jsxs)(Wt.a,{children:[x,Object(I.jsx)(qb,{})]})},Yb=function(e){return Object(I.jsx)(Ab,{children:Object(I.jsx)(Hb,{song:e.song})})},Xb=n(270),Qb=n.n(Xb),Zb=function(e){return Object(I.jsx)(xb,{onExit:e.onExit,children:Object(I.jsx)(ql.a,{icon:Object(I.jsx)(Qb.a,{}),tooltipTitle:"Page View",onMouseDownCapture:e.onPageView})})},$b=function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Zb,{onPageView:e.onPageView,onExit:e.onEditMode}),Object(I.jsx)(Yb,{song:e.song})]})},eh=function(e){var t=e.song.isUnsaved()?null:Object(I.jsx)(qd,{song:e.song,children:function(t,n,r){return Object(I.jsx)(Jd,{collapsedButtonSx:{backgroundColor:"transparent"},timestampedSections:e.song.timestampedSections,tracklistLoad:t,onTrackListChanged:r,onRefresh:n})}});return Object(I.jsx)(su,{children:Object(I.jsx)(Zd,{children:Object(I.jsx)(Wn,{children:Object(I.jsxs)(Jn,{song:e.song,children:[Object(I.jsx)(Hd.a,{children:Object(I.jsx)("title",{children:""!==e.song.metadata.title?e.song.metadata.title:"New Song"})}),e.children,t]})})})})},th=function(e){var t=Object(Tn.h)(),n=e.path.withPageView(),r=e.path.withScrollView();return[Object(I.jsxs)(Tn.c,{path:e.path.URL(),exact:!0,children:[Object(I.jsx)(Tn.b,{to:r.URL()}),","]},e.path.URL()),Object(I.jsx)(Tn.c,{path:n.URL(),children:Object(I.jsx)(eh,{song:e.song,children:Object(I.jsx)(Eb,{song:e.song,onScrollView:function(){return t.push(r.URL())},onEditMode:e.onEditMode})})},n.URL()),Object(I.jsx)(Tn.c,{path:r.URL(),children:Object(I.jsx)(eh,{song:e.song,children:Object(I.jsx)($b,{song:e.song,onPageView:function(){return t.push(n.URL())},onEditMode:e.onEditMode})})},r.URL())]},nh=function(e){var t=Object(Tn.h)(),n=e.path.withEditMode(),r=e.path.withPlayMode();return[Object(I.jsxs)(Tn.c,{path:e.path.URL(),exact:!0,children:[Object(I.jsx)(Tn.b,{to:n.URL()}),","]},e.path.URL()),Object(I.jsx)(Tn.c,{path:n.URL(),children:Object(I.jsx)(Qd,{song:e.song,songDispatch:e.songDispatch,onPlay:function(){t.push(r.URL())}})},n.URL()),Object(I.jsx)(Tn.c,{path:r.URL(),children:Object(I.jsx)(th,{song:e.song,onEditMode:function(){t.push(n.URL())},path:r})},r.URL())]},rh=n(271),ih=n.n(rh),ah=["song"],ch={main:"#4fc3f7",light:"#8bf6ff",dark:"#0093c4",contrastText:"#000000"},oh={main:"#844ffc",light:"#bb7eff",dark:"#4a1fc8",contrastText:"#ffffff"},sh={main:"#00c853",light:"#5efc82",dark:"#009624",contrastText:"#000000"},lh=Object(s.a)({palette:{primary:ch,secondary:oh,success:sh},typography:{fontFamily:"Merriweather",fontWeightRegular:300},components:{MuiButton:{styleOverrides:{root:{color:"black","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}}}}),uh=Object(o.b)(Object(o.a)({backgroundColor:sh.main})),dh=(dl=nh,function(e){var t=function(){var e=Object(L.useRef)(!1);return[Object(L.useCallback)((function(t,n){"set-last-saved-at"!==n.type&&(e.current=!0)}),[]),function(t,n){var r=T.a.useContext(Cn),i=on(),a=Object(nn.b)().enqueueSnackbar,c=Object(Tn.h)(),o=Object(L.useCallback)((function(t){return e.current&&!t.isUnsaved()&&t.isOwner(r)}),[r]);return Object(L.useEffect)((function(){var c=function(){var t=Object(Ht.a)(Xt.a.mark((function t(n){return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=4;break}a(n,{variant:"error"}),t.next=6;break;case 4:return t.next=6,i(n);case 6:e.current=!0;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(Ht.a)(Xt.a.mark((function t(r,i){var a,o;return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fn(i,r.authToken);case 2:if(a=t.sent,!Object(v.isLeft)(a)){t.next=7;break}return t.next=6,c(a.left);case 6:return t.abrupt("return");case 7:if(e.current=!1,o=it.fromJSONObject(a.right),!Object(v.isLeft)(o)){t.next=13;break}return t.next=12,c("Song results from backend can't be deserialized");case 12:return t.abrupt("return");case 13:n({type:"set-last-saved-at",lastSavedAt:o.right.lastSavedAt});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var e=Object(Ht.a)(Xt.a.mark((function e(t){return Xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r){e.next=2;break}return e.abrupt("return");case 2:if(o(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ih()();case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,s(r,t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=setInterval((function(){return l(t)}),1e4);return function(){return clearInterval(u)}}),[t,n,r,a,i,o]),Object(L.useEffect)((function(){var e=function(e){o(t)&&(e.preventDefault(),e.returnValue=!0)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[t,o]),Object(I.jsx)(Tn.a,{message:function(){return!o(t)||!ut.isEditMode(c.location.pathname)||"This page is asking you to confirm that you want to leave - data you have entered may not be saved."}})}]}(),n=Object(c.a)(t,2),r=n[0],i=n[1],a=Aa(e.song,r),o=Object(c.a)(a,2),s=o[0],l=o[1],u=i(s,l),d=(e.song,Object(ui.a)(e,ah)),b=Object(f.a)(Object(f.a)({},d),{},{song:s,songDispatch:l});return Object(I.jsxs)(I.Fragment,{children:[u,Object(I.jsx)(dl,Object(f.a)({},b))]})}),bh=function(){var e=Object(L.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1],i=st.root.withID(":id"),a=Object(I.jsxs)(Tn.e,{children:[Object(I.jsx)(Tn.b,{from:at.rootURL(),to:st.newURL(),exact:!0}),Object(I.jsx)(Tn.c,{path:st.newURL(),children:Object(I.jsx)(dh,{song:new it({}),path:st.root.withNew()})},st.newURL()),Object(I.jsx)(Tn.c,{path:i.URL(),children:Object(I.jsx)(wl,{children:function(e){return Object(I.jsx)(dh,{song:e,path:i.parent().withID(e.id)})}})},i.URL()),Object(I.jsx)(Tn.c,{path:ht.rootURL(),children:Object(I.jsx)(ss,{})},ht.rootURL()),Object(I.jsx)(Tn.c,{path:ct.rootURL(),exact:!0,children:Object(I.jsx)(Es,{})},ct.rootURL()),Object(I.jsx)(Tn.c,{path:ot.rootURL(),exact:!0,children:Object(I.jsx)(jl,{})},ot.rootURL()),Object(I.jsx)(Tn.b,{to:at.rootURL()})]});return Object(I.jsx)(Cn.Provider,{value:n,children:Object(I.jsx)(Sn.Provider,{value:function(e){return r(e)},children:a})})},hh=function(){return Object(I.jsx)(Hd.b,{children:Object(I.jsxs)(l.a,{theme:lh,children:[Object(I.jsx)(Hd.a,{titleTemplate:"%s - Chord Paper",defaultTitle:"Chord Paper"}),Object(I.jsx)(nn.a,{classes:{variantSuccess:uh},children:Object(I.jsx)(qt.a,{children:Object(I.jsx)(Vs,{children:Object(I.jsxs)(ka,{children:[Object(I.jsx)(bh,{}),Object(I.jsx)(As,{})]})})})})]})})},jh=(n(380),n(87)),fh=n.n(jh);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));fh.a.render(Object(I.jsx)(T.a.StrictMode,{children:Object(I.jsx)(hh,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[381,1,2]]]);
//# sourceMappingURL=main.246dd99e.chunk.js.map